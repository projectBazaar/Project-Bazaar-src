function ZI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var EO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eR={exports:{}},vp={},tR={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=Symbol.for("react.element"),TO=Symbol.for("react.portal"),SO=Symbol.for("react.fragment"),IO=Symbol.for("react.strict_mode"),RO=Symbol.for("react.profiler"),CO=Symbol.for("react.provider"),bO=Symbol.for("react.context"),AO=Symbol.for("react.forward_ref"),xO=Symbol.for("react.suspense"),PO=Symbol.for("react.memo"),kO=Symbol.for("react.lazy"),CE=Symbol.iterator;function NO(t){return t===null||typeof t!="object"?null:(t=CE&&t[CE]||t["@@iterator"],typeof t=="function"?t:null)}var nR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rR=Object.assign,iR={};function Ul(t,e,n){this.props=t,this.context=e,this.refs=iR,this.updater=n||nR}Ul.prototype.isReactComponent={};Ul.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ul.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sR(){}sR.prototype=Ul.prototype;function tv(t,e,n){this.props=t,this.context=e,this.refs=iR,this.updater=n||nR}var nv=tv.prototype=new sR;nv.constructor=tv;rR(nv,Ul.prototype);nv.isPureReactComponent=!0;var bE=Array.isArray,oR=Object.prototype.hasOwnProperty,rv={current:null},aR={key:!0,ref:!0,__self:!0,__source:!0};function lR(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oR.call(e,r)&&!aR.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zc,type:t,key:s,ref:o,props:i,_owner:rv.current}}function OO(t,e){return{$$typeof:Zc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zc}function DO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var AE=/\/+/g;function Vm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DO(""+t.key):e.toString(36)}function xh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zc:case TO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Vm(o,0):r,bE(i)?(n="",t!=null&&(n=t.replace(AE,"$&/")+"/"),xh(i,e,n,"",function(u){return u})):i!=null&&(iv(i)&&(i=OO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(AE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Vm(s,a);o+=xh(s,e,n,l,i)}else if(l=NO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Vm(s,a++),o+=xh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qd(t,e,n){if(t==null)return t;var r=[],i=0;return xh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wn={current:null},Ph={transition:null},MO={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:rv};function uR(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Qd,forEach:function(t,e,n){Qd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qd(t,function(){e++}),e},toArray:function(t){return Qd(t,function(e){return e})||[]},only:function(t){if(!iv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Ul;ze.Fragment=SO;ze.Profiler=RO;ze.PureComponent=tv;ze.StrictMode=IO;ze.Suspense=xO;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MO;ze.act=uR;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rR({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oR.call(e,l)&&!aR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Zc,type:t.type,key:i,ref:s,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:bO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CO,_context:t},t.Consumer=t};ze.createElement=lR;ze.createFactory=function(t){var e=lR.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:AO,render:t}};ze.isValidElement=iv;ze.lazy=function(t){return{$$typeof:kO,_payload:{_status:-1,_result:t},_init:LO}};ze.memo=function(t,e){return{$$typeof:PO,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};ze.unstable_act=uR;ze.useCallback=function(t,e){return Wn.current.useCallback(t,e)};ze.useContext=function(t){return Wn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Wn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Wn.current.useEffect(t,e)};ze.useId=function(){return Wn.current.useId()};ze.useImperativeHandle=function(t,e,n){return Wn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return Wn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Wn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Wn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return Wn.current.useReducer(t,e,n)};ze.useRef=function(t){return Wn.current.useRef(t)};ze.useState=function(t){return Wn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return Wn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return Wn.current.useTransition()};ze.version="18.3.1";tR.exports=ze;var I=tR.exports;const ve=ev(I),rf=ZI({__proto__:null,default:ve},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO=I,VO=Symbol.for("react.element"),UO=Symbol.for("react.fragment"),jO=Object.prototype.hasOwnProperty,$O=FO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BO={key:!0,ref:!0,__self:!0,__source:!0};function cR(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jO.call(e,r)&&!BO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VO,type:t,key:s,ref:o,props:i,_owner:$O.current}}vp.Fragment=UO;vp.jsx=cR;vp.jsxs=cR;eR.exports=vp;var D=eR.exports,dR={exports:{}},Er={},hR={exports:{}},fR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Q){var ie=W.length;W.push(Q);e:for(;0<ie;){var Pe=ie-1>>>1,q=W[Pe];if(0<i(q,Q))W[Pe]=Q,W[ie]=q,ie=Pe;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Q=W[0],ie=W.pop();if(ie!==Q){W[0]=ie;e:for(var Pe=0,q=W.length,J=q>>>1;Pe<J;){var ye=2*(Pe+1)-1,Te=W[ye],pe=ye+1,U=W[pe];if(0>i(Te,ie))pe<q&&0>i(U,Te)?(W[Pe]=U,W[pe]=ie,Pe=pe):(W[Pe]=Te,W[ye]=ie,Pe=ye);else if(pe<q&&0>i(U,ie))W[Pe]=U,W[pe]=ie,Pe=pe;else break e}}return Q}function i(W,Q){var ie=W.sortIndex-Q.sortIndex;return ie!==0?ie:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,y=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=W)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function b(W){if(w=!1,E(W),!y)if(n(l)!==null)y=!0,Re(O);else{var Q=n(u);Q!==null&&te(b,Q.startTime-W)}}function O(W,Q){y=!1,w&&(w=!1,T(g),g=-1),p=!0;var ie=f;try{for(E(Q),h=n(l);h!==null&&(!(h.expirationTime>Q)||W&&!k());){var Pe=h.callback;if(typeof Pe=="function"){h.callback=null,f=h.priorityLevel;var q=Pe(h.expirationTime<=Q);Q=t.unstable_now(),typeof q=="function"?h.callback=q:h===n(l)&&r(l),E(Q)}else r(l);h=n(l)}if(h!==null)var J=!0;else{var ye=n(u);ye!==null&&te(b,ye.startTime-Q),J=!1}return J}finally{h=null,f=ie,p=!1}}var F=!1,C=null,g=-1,R=5,A=-1;function k(){return!(t.unstable_now()-A<R)}function N(){if(C!==null){var W=t.unstable_now();A=W;var Q=!0;try{Q=C(!0,W)}finally{Q?P():(F=!1,C=null)}}else F=!1}var P;if(typeof _=="function")P=function(){_(N)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,be=re.port2;re.port1.onmessage=N,P=function(){be.postMessage(null)}}else P=function(){S(N,0)};function Re(W){C=W,F||(F=!0,P())}function te(W,Q){g=S(function(){W(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,Re(O))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var ie=f;f=Q;try{return W()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=f;f=W;try{return Q()}finally{f=ie}},t.unstable_scheduleCallback=function(W,Q,ie){var Pe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Pe+ie:Pe):ie=Pe,W){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ie+q,W={id:d++,callback:Q,priorityLevel:W,startTime:ie,expirationTime:q,sortIndex:-1},ie>Pe?(W.sortIndex=ie,e(u,W),n(l)===null&&W===n(u)&&(w?(T(g),g=-1):w=!0,te(b,ie-Pe))):(W.sortIndex=q,e(l,W),y||p||(y=!0,Re(O))),W},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(W){var Q=f;return function(){var ie=f;f=Q;try{return W.apply(this,arguments)}finally{f=ie}}}})(fR);hR.exports=fR;var zO=hR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO=I,wr=zO;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pR=new Set,gc={};function ha(t,e){ml(t,e),ml(t+"Capture",e)}function ml(t,e){for(gc[t]=e,t=0;t<e.length;t++)pR.add(e[t])}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zg=Object.prototype.hasOwnProperty,WO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xE={},PE={};function qO(t){return Zg.call(PE,t)?!0:Zg.call(xE,t)?!1:WO.test(t)?PE[t]=!0:(xE[t]=!0,!1)}function KO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GO(t,e,n,r){if(e===null||typeof e>"u"||KO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var sv=/[\-:]([a-z])/g;function ov(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sv,ov);pn[e]=new qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sv,ov);pn[e]=new qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sv,ov);pn[e]=new qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new qn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function av(t,e,n,r){var i=pn.hasOwnProperty(e)?pn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GO(e,n,i,r)&&(n=null),r||i===null?qO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var is=HO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yd=Symbol.for("react.element"),ja=Symbol.for("react.portal"),$a=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),mR=Symbol.for("react.provider"),gR=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),ty=Symbol.for("react.suspense"),ny=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),yR=Symbol.for("react.offscreen"),kE=Symbol.iterator;function gu(t){return t===null||typeof t!="object"?null:(t=kE&&t[kE]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,Um;function Fu(t){if(Um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Um=e&&e[1]||""}return`
`+Um+t}var jm=!1;function $m(t,e){if(!t||jm)return"";jm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{jm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fu(t):""}function QO(t){switch(t.tag){case 5:return Fu(t.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return t=$m(t.type,!1),t;case 11:return t=$m(t.type.render,!1),t;case 1:return t=$m(t.type,!0),t;default:return""}}function ry(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $a:return"Fragment";case ja:return"Portal";case ey:return"Profiler";case lv:return"StrictMode";case ty:return"Suspense";case ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gR:return(t.displayName||"Context")+".Consumer";case mR:return(t._context.displayName||"Context")+".Provider";case uv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cv:return e=t.displayName||null,e!==null?e:ry(t.type)||"Memo";case ys:e=t._payload,t=t._init;try{return ry(t(e))}catch{}}return null}function YO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ry(e);case 8:return e===lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _R(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XO(t){var e=_R(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xd(t){t._valueTracker||(t._valueTracker=XO(t))}function vR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_R(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iy(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function NE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wR(t,e){e=e.checked,e!=null&&av(t,"checked",e,!1)}function sy(t,e){wR(t,e);var n=Ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oy(t,e.type,n):e.hasOwnProperty("defaultValue")&&oy(t,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oy(t,e,n){(e!=="number"||sf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vu=Array.isArray;function nl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ws(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ay(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function DE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Vu(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ws(n)}}function ER(t,e){var n=Ws(e.value),r=Ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function LE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ly(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jd,SR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jd=Jd||document.createElement("div"),Jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JO=["Webkit","ms","Moz","O"];Object.keys(Ku).forEach(function(t){JO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ku[e]=Ku[t]})});function IR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ku.hasOwnProperty(t)&&Ku[t]?(""+e).trim():e+"px"}function RR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZO=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uy(t,e){if(e){if(ZO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function cy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dy=null;function dv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hy=null,rl=null,il=null;function ME(t){if(t=nd(t)){if(typeof hy!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Ip(e),hy(t.stateNode,t.type,e))}}function CR(t){rl?il?il.push(t):il=[t]:rl=t}function bR(){if(rl){var t=rl,e=il;if(il=rl=null,ME(t),e)for(t=0;t<e.length;t++)ME(e[t])}}function AR(t,e){return t(e)}function xR(){}var Bm=!1;function PR(t,e,n){if(Bm)return t(e,n);Bm=!0;try{return AR(t,e,n)}finally{Bm=!1,(rl!==null||il!==null)&&(xR(),bR())}}function _c(t,e){var n=t.stateNode;if(n===null)return null;var r=Ip(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var fy=!1;if(qi)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){fy=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{fy=!1}function eD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Gu=!1,of=null,af=!1,py=null,tD={onError:function(t){Gu=!0,of=t}};function nD(t,e,n,r,i,s,o,a,l){Gu=!1,of=null,eD.apply(tD,arguments)}function rD(t,e,n,r,i,s,o,a,l){if(nD.apply(this,arguments),Gu){if(Gu){var u=of;Gu=!1,of=null}else throw Error(ee(198));af||(af=!0,py=u)}}function fa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function FE(t){if(fa(t)!==t)throw Error(ee(188))}function iD(t){var e=t.alternate;if(!e){if(e=fa(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return FE(i),t;if(s===r)return FE(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function NR(t){return t=iD(t),t!==null?OR(t):null}function OR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OR(t);if(e!==null)return e;t=t.sibling}return null}var DR=wr.unstable_scheduleCallback,VE=wr.unstable_cancelCallback,sD=wr.unstable_shouldYield,oD=wr.unstable_requestPaint,Ut=wr.unstable_now,aD=wr.unstable_getCurrentPriorityLevel,hv=wr.unstable_ImmediatePriority,LR=wr.unstable_UserBlockingPriority,lf=wr.unstable_NormalPriority,lD=wr.unstable_LowPriority,MR=wr.unstable_IdlePriority,wp=null,gi=null;function uD(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(wp,t,void 0,(t.current.flags&128)===128)}catch{}}var Xr=Math.clz32?Math.clz32:hD,cD=Math.log,dD=Math.LN2;function hD(t){return t>>>=0,t===0?32:31-(cD(t)/dD|0)|0}var Zd=64,eh=4194304;function Uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Uu(a):(s&=o,s!==0&&(r=Uu(s)))}else o=n&~i,o!==0?r=Uu(o):s!==0&&(r=Uu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xr(e),i=1<<n,r|=t[n],e&=~i;return r}function fD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=fD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function my(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FR(){var t=Zd;return Zd<<=1,!(Zd&4194240)&&(Zd=64),t}function zm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ed(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xr(e),t[e]=n}function mD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var st=0;function VR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UR,pv,jR,$R,BR,gy=!1,th=[],ks=null,Ns=null,Os=null,vc=new Map,wc=new Map,vs=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UE(t,e){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function _u(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nd(e),e!==null&&pv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function yD(t,e,n,r,i){switch(e){case"focusin":return ks=_u(ks,t,e,n,r,i),!0;case"dragenter":return Ns=_u(Ns,t,e,n,r,i),!0;case"mouseover":return Os=_u(Os,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vc.set(s,_u(vc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wc.set(s,_u(wc.get(s)||null,t,e,n,r,i)),!0}return!1}function zR(t){var e=xo(t.target);if(e!==null){var n=fa(e);if(n!==null){if(e=n.tag,e===13){if(e=kR(n),e!==null){t.blockedOn=e,BR(t.priority,function(){jR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dy=r,n.target.dispatchEvent(r),dy=null}else return e=nd(n),e!==null&&pv(e),t.blockedOn=n,!1;e.shift()}return!0}function jE(t,e,n){kh(t)&&n.delete(e)}function _D(){gy=!1,ks!==null&&kh(ks)&&(ks=null),Ns!==null&&kh(Ns)&&(Ns=null),Os!==null&&kh(Os)&&(Os=null),vc.forEach(jE),wc.forEach(jE)}function vu(t,e){t.blockedOn===e&&(t.blockedOn=null,gy||(gy=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,_D)))}function Ec(t){function e(i){return vu(i,t)}if(0<th.length){vu(th[0],t);for(var n=1;n<th.length;n++){var r=th[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ks!==null&&vu(ks,t),Ns!==null&&vu(Ns,t),Os!==null&&vu(Os,t),vc.forEach(e),wc.forEach(e),n=0;n<vs.length;n++)r=vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vs.length&&(n=vs[0],n.blockedOn===null);)zR(n),n.blockedOn===null&&vs.shift()}var sl=is.ReactCurrentBatchConfig,cf=!0;function vD(t,e,n,r){var i=st,s=sl.transition;sl.transition=null;try{st=1,mv(t,e,n,r)}finally{st=i,sl.transition=s}}function wD(t,e,n,r){var i=st,s=sl.transition;sl.transition=null;try{st=4,mv(t,e,n,r)}finally{st=i,sl.transition=s}}function mv(t,e,n,r){if(cf){var i=yy(t,e,n,r);if(i===null)Zm(t,e,r,df,n),UE(t,r);else if(yD(i,t,e,n,r))r.stopPropagation();else if(UE(t,r),e&4&&-1<gD.indexOf(t)){for(;i!==null;){var s=nd(i);if(s!==null&&UR(s),s=yy(t,e,n,r),s===null&&Zm(t,e,r,df,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Zm(t,e,r,null,n)}}var df=null;function yy(t,e,n,r){if(df=null,t=dv(r),t=xo(t),t!==null)if(e=fa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return df=t,null}function HR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aD()){case hv:return 1;case LR:return 4;case lf:case lD:return 16;case MR:return 536870912;default:return 16}default:return 16}}var Cs=null,gv=null,Nh=null;function WR(){if(Nh)return Nh;var t,e=gv,n=e.length,r,i="value"in Cs?Cs.value:Cs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Nh=i.slice(t,1<r?1-r:void 0)}function Oh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function $E(){return!1}function Tr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nh:$E,this.isPropagationStopped=$E,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yv=Tr(jl),td=kt({},jl,{view:0,detail:0}),ED=Tr(td),Hm,Wm,wu,Ep=kt({},td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wu&&(wu&&t.type==="mousemove"?(Hm=t.screenX-wu.screenX,Wm=t.screenY-wu.screenY):Wm=Hm=0,wu=t),Hm)},movementY:function(t){return"movementY"in t?t.movementY:Wm}}),BE=Tr(Ep),TD=kt({},Ep,{dataTransfer:0}),SD=Tr(TD),ID=kt({},td,{relatedTarget:0}),qm=Tr(ID),RD=kt({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),CD=Tr(RD),bD=kt({},jl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AD=Tr(bD),xD=kt({},jl,{data:0}),zE=Tr(xD),PD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ND={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ND[t])?!!e[t]:!1}function _v(){return OD}var DD=kt({},td,{key:function(t){if(t.key){var e=PD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(t){return t.type==="keypress"?Oh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LD=Tr(DD),MD=kt({},Ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HE=Tr(MD),FD=kt({},td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),VD=Tr(FD),UD=kt({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),jD=Tr(UD),$D=kt({},Ep,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BD=Tr($D),zD=[9,13,27,32],vv=qi&&"CompositionEvent"in window,Qu=null;qi&&"documentMode"in document&&(Qu=document.documentMode);var HD=qi&&"TextEvent"in window&&!Qu,qR=qi&&(!vv||Qu&&8<Qu&&11>=Qu),WE=" ",qE=!1;function KR(t,e){switch(t){case"keyup":return zD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ba=!1;function WD(t,e){switch(t){case"compositionend":return GR(e);case"keypress":return e.which!==32?null:(qE=!0,WE);case"textInput":return t=e.data,t===WE&&qE?null:t;default:return null}}function qD(t,e){if(Ba)return t==="compositionend"||!vv&&KR(t,e)?(t=WR(),Nh=gv=Cs=null,Ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qR&&e.locale!=="ko"?null:e.data;default:return null}}var KD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KD[t.type]:e==="textarea"}function QR(t,e,n,r){CR(r),e=hf(e,"onChange"),0<e.length&&(n=new yv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yu=null,Tc=null;function GD(t){oC(t,0)}function Tp(t){var e=Wa(t);if(vR(e))return t}function QD(t,e){if(t==="change")return e}var YR=!1;if(qi){var Km;if(qi){var Gm="oninput"in document;if(!Gm){var GE=document.createElement("div");GE.setAttribute("oninput","return;"),Gm=typeof GE.oninput=="function"}Km=Gm}else Km=!1;YR=Km&&(!document.documentMode||9<document.documentMode)}function QE(){Yu&&(Yu.detachEvent("onpropertychange",XR),Tc=Yu=null)}function XR(t){if(t.propertyName==="value"&&Tp(Tc)){var e=[];QR(e,Tc,t,dv(t)),PR(GD,e)}}function YD(t,e,n){t==="focusin"?(QE(),Yu=e,Tc=n,Yu.attachEvent("onpropertychange",XR)):t==="focusout"&&QE()}function XD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tp(Tc)}function JD(t,e){if(t==="click")return Tp(e)}function ZD(t,e){if(t==="input"||t==="change")return Tp(e)}function e2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ti=typeof Object.is=="function"?Object.is:e2;function Sc(t,e){if(ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zg.call(e,i)||!ti(t[i],e[i]))return!1}return!0}function YE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XE(t,e){var n=YE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YE(n)}}function JR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZR(){for(var t=window,e=sf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sf(t.document)}return e}function wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t2(t){var e=ZR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JR(n.ownerDocument.documentElement,n)){if(r!==null&&wv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=XE(n,s);var o=XE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var n2=qi&&"documentMode"in document&&11>=document.documentMode,za=null,_y=null,Xu=null,vy=!1;function JE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vy||za==null||za!==sf(r)||(r=za,"selectionStart"in r&&wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xu&&Sc(Xu,r)||(Xu=r,r=hf(_y,"onSelect"),0<r.length&&(e=new yv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=za)))}function rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ha={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},Qm={},eC={};qi&&(eC=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function Sp(t){if(Qm[t])return Qm[t];if(!Ha[t])return t;var e=Ha[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eC)return Qm[t]=e[n];return t}var tC=Sp("animationend"),nC=Sp("animationiteration"),rC=Sp("animationstart"),iC=Sp("transitionend"),sC=new Map,ZE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){sC.set(t,e),ha(e,[t])}for(var Ym=0;Ym<ZE.length;Ym++){var Xm=ZE[Ym],r2=Xm.toLowerCase(),i2=Xm[0].toUpperCase()+Xm.slice(1);to(r2,"on"+i2)}to(tC,"onAnimationEnd");to(nC,"onAnimationIteration");to(rC,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(iC,"onTransitionEnd");ml("onMouseEnter",["mouseout","mouseover"]);ml("onMouseLeave",["mouseout","mouseover"]);ml("onPointerEnter",["pointerout","pointerover"]);ml("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function eT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rD(r,e,void 0,t),t.currentTarget=null}function oC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;eT(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;eT(i,a,u),s=l}}}if(af)throw t=py,af=!1,py=null,t}function _t(t,e){var n=e[Iy];n===void 0&&(n=e[Iy]=new Set);var r=t+"__bubble";n.has(r)||(aC(e,t,2,!1),n.add(r))}function Jm(t,e,n){var r=0;e&&(r|=4),aC(n,t,r,e)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[ih]){t[ih]=!0,pR.forEach(function(n){n!=="selectionchange"&&(s2.has(n)||Jm(n,!1,t),Jm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ih]||(e[ih]=!0,Jm("selectionchange",!1,e))}}function aC(t,e,n,r){switch(HR(e)){case 1:var i=vD;break;case 4:i=wD;break;default:i=mv}n=i.bind(null,e,n,t),i=void 0,!fy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Zm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}PR(function(){var u=s,d=dv(n),h=[];e:{var f=sC.get(t);if(f!==void 0){var p=yv,y=t;switch(t){case"keypress":if(Oh(n)===0)break e;case"keydown":case"keyup":p=LD;break;case"focusin":y="focus",p=qm;break;case"focusout":y="blur",p=qm;break;case"beforeblur":case"afterblur":p=qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=BE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=VD;break;case tC:case nC:case rC:p=CD;break;case iC:p=jD;break;case"scroll":p=ED;break;case"wheel":p=BD;break;case"copy":case"cut":case"paste":p=AD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=HE}var w=(e&4)!==0,S=!w&&t==="scroll",T=w?f!==null?f+"Capture":null:f;w=[];for(var _=u,E;_!==null;){E=_;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,T!==null&&(b=_c(_,T),b!=null&&w.push(Rc(_,b,E)))),S)break;_=_.return}0<w.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==dy&&(y=n.relatedTarget||n.fromElement)&&(xo(y)||y[Ki]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?xo(y):null,y!==null&&(S=fa(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(w=BE,b="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(w=HE,b="onPointerLeave",T="onPointerEnter",_="pointer"),S=p==null?f:Wa(p),E=y==null?f:Wa(y),f=new w(b,_+"leave",p,n,d),f.target=S,f.relatedTarget=E,b=null,xo(d)===u&&(w=new w(T,_+"enter",y,n,d),w.target=E,w.relatedTarget=S,b=w),S=b,p&&y)t:{for(w=p,T=y,_=0,E=w;E;E=xa(E))_++;for(E=0,b=T;b;b=xa(b))E++;for(;0<_-E;)w=xa(w),_--;for(;0<E-_;)T=xa(T),E--;for(;_--;){if(w===T||T!==null&&w===T.alternate)break t;w=xa(w),T=xa(T)}w=null}else w=null;p!==null&&tT(h,f,p,w,!1),y!==null&&S!==null&&tT(h,S,y,w,!0)}}e:{if(f=u?Wa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=QD;else if(KE(f))if(YR)O=ZD;else{O=XD;var F=YD}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=JD);if(O&&(O=O(t,u))){QR(h,O,n,d);break e}F&&F(t,f,u),t==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&oy(f,"number",f.value)}switch(F=u?Wa(u):window,t){case"focusin":(KE(F)||F.contentEditable==="true")&&(za=F,_y=u,Xu=null);break;case"focusout":Xu=_y=za=null;break;case"mousedown":vy=!0;break;case"contextmenu":case"mouseup":case"dragend":vy=!1,JE(h,n,d);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":JE(h,n,d)}var C;if(vv)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ba?KR(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(qR&&n.locale!=="ko"&&(Ba||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ba&&(C=WR()):(Cs=d,gv="value"in Cs?Cs.value:Cs.textContent,Ba=!0)),F=hf(u,g),0<F.length&&(g=new zE(g,t,null,n,d),h.push({event:g,listeners:F}),C?g.data=C:(C=GR(n),C!==null&&(g.data=C)))),(C=HD?WD(t,n):qD(t,n))&&(u=hf(u,"onBeforeInput"),0<u.length&&(d=new zE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}oC(h,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_c(t,n),s!=null&&r.unshift(Rc(t,s,i)),s=_c(t,e),s!=null&&r.push(Rc(t,s,i))),t=t.return}return r}function xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=_c(n,s),l!=null&&o.unshift(Rc(n,l,a))):i||(l=_c(n,s),l!=null&&o.push(Rc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var o2=/\r\n?/g,a2=/\u0000|\uFFFD/g;function nT(t){return(typeof t=="string"?t:""+t).replace(o2,`
`).replace(a2,"")}function sh(t,e,n){if(e=nT(e),nT(t)!==e&&n)throw Error(ee(425))}function ff(){}var wy=null,Ey=null;function Ty(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sy=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,rT=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof rT<"u"?function(t){return rT.resolve(null).then(t).catch(c2)}:Sy;function c2(t){setTimeout(function(){throw t})}function eg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ec(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ec(e)}function Ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $l=Math.random().toString(36).slice(2),di="__reactFiber$"+$l,Cc="__reactProps$"+$l,Ki="__reactContainer$"+$l,Iy="__reactEvents$"+$l,d2="__reactListeners$"+$l,h2="__reactHandles$"+$l;function xo(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ki]||n[di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iT(t);t!==null;){if(n=t[di])return n;t=iT(t)}return e}t=n,n=t.parentNode}return null}function nd(t){return t=t[di]||t[Ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Ip(t){return t[Cc]||null}var Ry=[],qa=-1;function no(t){return{current:t}}function St(t){0>qa||(t.current=Ry[qa],Ry[qa]=null,qa--)}function pt(t,e){qa++,Ry[qa]=t.current,t.current=e}var qs={},Nn=no(qs),tr=no(!1),qo=qs;function gl(t,e){var n=t.type.contextTypes;if(!n)return qs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nr(t){return t=t.childContextTypes,t!=null}function pf(){St(tr),St(Nn)}function sT(t,e,n){if(Nn.current!==qs)throw Error(ee(168));pt(Nn,e),pt(tr,n)}function lC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,YO(t)||"Unknown",i));return kt({},n,r)}function mf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qs,qo=Nn.current,pt(Nn,t),pt(tr,tr.current),!0}function oT(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=lC(t,e,qo),r.__reactInternalMemoizedMergedChildContext=t,St(tr),St(Nn),pt(Nn,t)):St(tr),pt(tr,n)}var Ni=null,Rp=!1,tg=!1;function uC(t){Ni===null?Ni=[t]:Ni.push(t)}function f2(t){Rp=!0,uC(t)}function ro(){if(!tg&&Ni!==null){tg=!0;var t=0,e=st;try{var n=Ni;for(st=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ni=null,Rp=!1}catch(i){throw Ni!==null&&(Ni=Ni.slice(t+1)),DR(hv,ro),i}finally{st=e,tg=!1}}return null}var Ka=[],Ga=0,gf=null,yf=0,Cr=[],br=0,Ko=null,Di=1,Li="";function Io(t,e){Ka[Ga++]=yf,Ka[Ga++]=gf,gf=t,yf=e}function cC(t,e,n){Cr[br++]=Di,Cr[br++]=Li,Cr[br++]=Ko,Ko=t;var r=Di;t=Li;var i=32-Xr(r)-1;r&=~(1<<i),n+=1;var s=32-Xr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Di=1<<32-Xr(e)+i|n<<i|r,Li=s+t}else Di=1<<s|n<<i|r,Li=t}function Ev(t){t.return!==null&&(Io(t,1),cC(t,1,0))}function Tv(t){for(;t===gf;)gf=Ka[--Ga],Ka[Ga]=null,yf=Ka[--Ga],Ka[Ga]=null;for(;t===Ko;)Ko=Cr[--br],Cr[br]=null,Li=Cr[--br],Cr[br]=null,Di=Cr[--br],Cr[br]=null}var pr=null,cr=null,bt=!1,Wr=null;function dC(t,e){var n=xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pr=t,cr=Ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pr=t,cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ko!==null?{id:Di,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pr=t,cr=null,!0):!1;default:return!1}}function Cy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function by(t){if(bt){var e=cr;if(e){var n=e;if(!aT(t,e)){if(Cy(t))throw Error(ee(418));e=Ds(n.nextSibling);var r=pr;e&&aT(t,e)?dC(r,n):(t.flags=t.flags&-4097|2,bt=!1,pr=t)}}else{if(Cy(t))throw Error(ee(418));t.flags=t.flags&-4097|2,bt=!1,pr=t}}}function lT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pr=t}function oh(t){if(t!==pr)return!1;if(!bt)return lT(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ty(t.type,t.memoizedProps)),e&&(e=cr)){if(Cy(t))throw hC(),Error(ee(418));for(;e;)dC(t,e),e=Ds(e.nextSibling)}if(lT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cr=Ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cr=null}}else cr=pr?Ds(t.stateNode.nextSibling):null;return!0}function hC(){for(var t=cr;t;)t=Ds(t.nextSibling)}function yl(){cr=pr=null,bt=!1}function Sv(t){Wr===null?Wr=[t]:Wr.push(t)}var p2=is.ReactCurrentBatchConfig;function Eu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uT(t){var e=t._init;return e(t._payload)}function fC(t){function e(T,_){if(t){var E=T.deletions;E===null?(T.deletions=[_],T.flags|=16):E.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function i(T,_){return T=Vs(T,_),T.index=0,T.sibling=null,T}function s(T,_,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<_?(T.flags|=2,_):E):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,_,E,b){return _===null||_.tag!==6?(_=lg(E,T.mode,b),_.return=T,_):(_=i(_,E),_.return=T,_)}function l(T,_,E,b){var O=E.type;return O===$a?d(T,_,E.props.children,b,E.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ys&&uT(O)===_.type)?(b=i(_,E.props),b.ref=Eu(T,_,E),b.return=T,b):(b=jh(E.type,E.key,E.props,null,T.mode,b),b.ref=Eu(T,_,E),b.return=T,b)}function u(T,_,E,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=ug(E,T.mode,b),_.return=T,_):(_=i(_,E.children||[]),_.return=T,_)}function d(T,_,E,b,O){return _===null||_.tag!==7?(_=jo(E,T.mode,b,O),_.return=T,_):(_=i(_,E),_.return=T,_)}function h(T,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=lg(""+_,T.mode,E),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yd:return E=jh(_.type,_.key,_.props,null,T.mode,E),E.ref=Eu(T,null,_),E.return=T,E;case ja:return _=ug(_,T.mode,E),_.return=T,_;case ys:var b=_._init;return h(T,b(_._payload),E)}if(Vu(_)||gu(_))return _=jo(_,T.mode,E,null),_.return=T,_;ah(T,_)}return null}function f(T,_,E,b){var O=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(T,_,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yd:return E.key===O?l(T,_,E,b):null;case ja:return E.key===O?u(T,_,E,b):null;case ys:return O=E._init,f(T,_,O(E._payload),b)}if(Vu(E)||gu(E))return O!==null?null:d(T,_,E,b,null);ah(T,E)}return null}function p(T,_,E,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(E)||null,a(_,T,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yd:return T=T.get(b.key===null?E:b.key)||null,l(_,T,b,O);case ja:return T=T.get(b.key===null?E:b.key)||null,u(_,T,b,O);case ys:var F=b._init;return p(T,_,E,F(b._payload),O)}if(Vu(b)||gu(b))return T=T.get(E)||null,d(_,T,b,O,null);ah(_,b)}return null}function y(T,_,E,b){for(var O=null,F=null,C=_,g=_=0,R=null;C!==null&&g<E.length;g++){C.index>g?(R=C,C=null):R=C.sibling;var A=f(T,C,E[g],b);if(A===null){C===null&&(C=R);break}t&&C&&A.alternate===null&&e(T,C),_=s(A,_,g),F===null?O=A:F.sibling=A,F=A,C=R}if(g===E.length)return n(T,C),bt&&Io(T,g),O;if(C===null){for(;g<E.length;g++)C=h(T,E[g],b),C!==null&&(_=s(C,_,g),F===null?O=C:F.sibling=C,F=C);return bt&&Io(T,g),O}for(C=r(T,C);g<E.length;g++)R=p(C,T,g,E[g],b),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?g:R.key),_=s(R,_,g),F===null?O=R:F.sibling=R,F=R);return t&&C.forEach(function(k){return e(T,k)}),bt&&Io(T,g),O}function w(T,_,E,b){var O=gu(E);if(typeof O!="function")throw Error(ee(150));if(E=O.call(E),E==null)throw Error(ee(151));for(var F=O=null,C=_,g=_=0,R=null,A=E.next();C!==null&&!A.done;g++,A=E.next()){C.index>g?(R=C,C=null):R=C.sibling;var k=f(T,C,A.value,b);if(k===null){C===null&&(C=R);break}t&&C&&k.alternate===null&&e(T,C),_=s(k,_,g),F===null?O=k:F.sibling=k,F=k,C=R}if(A.done)return n(T,C),bt&&Io(T,g),O;if(C===null){for(;!A.done;g++,A=E.next())A=h(T,A.value,b),A!==null&&(_=s(A,_,g),F===null?O=A:F.sibling=A,F=A);return bt&&Io(T,g),O}for(C=r(T,C);!A.done;g++,A=E.next())A=p(C,T,g,A.value,b),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?g:A.key),_=s(A,_,g),F===null?O=A:F.sibling=A,F=A);return t&&C.forEach(function(N){return e(T,N)}),bt&&Io(T,g),O}function S(T,_,E,b){if(typeof E=="object"&&E!==null&&E.type===$a&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Yd:e:{for(var O=E.key,F=_;F!==null;){if(F.key===O){if(O=E.type,O===$a){if(F.tag===7){n(T,F.sibling),_=i(F,E.props.children),_.return=T,T=_;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ys&&uT(O)===F.type){n(T,F.sibling),_=i(F,E.props),_.ref=Eu(T,F,E),_.return=T,T=_;break e}n(T,F);break}else e(T,F);F=F.sibling}E.type===$a?(_=jo(E.props.children,T.mode,b,E.key),_.return=T,T=_):(b=jh(E.type,E.key,E.props,null,T.mode,b),b.ref=Eu(T,_,E),b.return=T,T=b)}return o(T);case ja:e:{for(F=E.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(T,_.sibling),_=i(_,E.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=ug(E,T.mode,b),_.return=T,T=_}return o(T);case ys:return F=E._init,S(T,_,F(E._payload),b)}if(Vu(E))return y(T,_,E,b);if(gu(E))return w(T,_,E,b);ah(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(T,_.sibling),_=i(_,E),_.return=T,T=_):(n(T,_),_=lg(E,T.mode,b),_.return=T,T=_),o(T)):n(T,_)}return S}var _l=fC(!0),pC=fC(!1),_f=no(null),vf=null,Qa=null,Iv=null;function Rv(){Iv=Qa=vf=null}function Cv(t){var e=_f.current;St(_f),t._currentValue=e}function Ay(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ol(t,e){vf=t,Iv=Qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function Or(t){var e=t._currentValue;if(Iv!==t)if(t={context:t,memoizedValue:e,next:null},Qa===null){if(vf===null)throw Error(ee(308));Qa=t,vf.dependencies={lanes:0,firstContext:t}}else Qa=Qa.next=t;return e}var Po=null;function bv(t){Po===null?Po=[t]:Po.push(t)}function mC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gi(t,r)}function Gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _s=!1;function Av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gi(t,n)}return i=r.interleaved,i===null?(e.next=e,bv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gi(t,n)}function Dh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}function cT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wf(t,e,n,r){var i=t.updateQueue;_s=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(f=e,p=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=kt({},h,f);break e;case 2:_s=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qo|=o,t.lanes=o,t.memoizedState=h}}function dT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var rd={},yi=no(rd),bc=no(rd),Ac=no(rd);function ko(t){if(t===rd)throw Error(ee(174));return t}function xv(t,e){switch(pt(Ac,e),pt(bc,t),pt(yi,rd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ly(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ly(e,t)}St(yi),pt(yi,e)}function vl(){St(yi),St(bc),St(Ac)}function yC(t){ko(Ac.current);var e=ko(yi.current),n=ly(e,t.type);e!==n&&(pt(bc,t),pt(yi,n))}function Pv(t){bc.current===t&&(St(yi),St(bc))}var xt=no(0);function Ef(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ng=[];function kv(){for(var t=0;t<ng.length;t++)ng[t]._workInProgressVersionPrimary=null;ng.length=0}var Lh=is.ReactCurrentDispatcher,rg=is.ReactCurrentBatchConfig,Go=0,Pt=null,Xt=null,nn=null,Tf=!1,Ju=!1,xc=0,m2=0;function En(){throw Error(ee(321))}function Nv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function Ov(t,e,n,r,i,s){if(Go=s,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?v2:w2,t=n(r,i),Ju){s=0;do{if(Ju=!1,xc=0,25<=s)throw Error(ee(301));s+=1,nn=Xt=null,e.updateQueue=null,Lh.current=E2,t=n(r,i)}while(Ju)}if(Lh.current=Sf,e=Xt!==null&&Xt.next!==null,Go=0,nn=Xt=Pt=null,Tf=!1,e)throw Error(ee(300));return t}function Dv(){var t=xc!==0;return xc=0,t}function ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Pt.memoizedState=nn=t:nn=nn.next=t,nn}function Dr(){if(Xt===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=nn===null?Pt.memoizedState:nn.next;if(e!==null)nn=e,Xt=t;else{if(t===null)throw Error(ee(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},nn===null?Pt.memoizedState=nn=t:nn=nn.next=t}return nn}function Pc(t,e){return typeof e=="function"?e(t):e}function ig(t){var e=Dr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Go&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Pt.lanes|=d,Qo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ti(r,e.memoizedState)||(Zn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pt.lanes|=s,Qo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sg(t){var e=Dr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ti(s,e.memoizedState)||(Zn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _C(){}function vC(t,e){var n=Pt,r=Dr(),i=e(),s=!ti(r.memoizedState,i);if(s&&(r.memoizedState=i,Zn=!0),r=r.queue,Lv(TC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,kc(9,EC.bind(null,n,r,i,e),void 0,null),on===null)throw Error(ee(349));Go&30||wC(n,e,i)}return i}function wC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EC(t,e,n,r){e.value=n,e.getSnapshot=r,SC(e)&&IC(t)}function TC(t,e,n){return n(function(){SC(e)&&IC(t)})}function SC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ti(t,n)}catch{return!0}}function IC(t){var e=Gi(t,1);e!==null&&Jr(e,t,1,-1)}function hT(t){var e=ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:t},e.queue=t,t=t.dispatch=_2.bind(null,Pt,t),[e.memoizedState,t]}function kc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RC(){return Dr().memoizedState}function Mh(t,e,n,r){var i=ui();Pt.flags|=t,i.memoizedState=kc(1|e,n,void 0,r===void 0?null:r)}function Cp(t,e,n,r){var i=Dr();r=r===void 0?null:r;var s=void 0;if(Xt!==null){var o=Xt.memoizedState;if(s=o.destroy,r!==null&&Nv(r,o.deps)){i.memoizedState=kc(e,n,s,r);return}}Pt.flags|=t,i.memoizedState=kc(1|e,n,s,r)}function fT(t,e){return Mh(8390656,8,t,e)}function Lv(t,e){return Cp(2048,8,t,e)}function CC(t,e){return Cp(4,2,t,e)}function bC(t,e){return Cp(4,4,t,e)}function AC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xC(t,e,n){return n=n!=null?n.concat([t]):null,Cp(4,4,AC.bind(null,e,t),n)}function Mv(){}function PC(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kC(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NC(t,e,n){return Go&21?(ti(n,e)||(n=FR(),Pt.lanes|=n,Qo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function g2(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var r=rg.transition;rg.transition={};try{t(!1),e()}finally{st=n,rg.transition=r}}function OC(){return Dr().memoizedState}function y2(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DC(t))LC(e,n);else if(n=mC(t,e,n,r),n!==null){var i=Hn();Jr(n,t,r,i),MC(n,e,r)}}function _2(t,e,n){var r=Fs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DC(t))LC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ti(a,o)){var l=e.interleaved;l===null?(i.next=i,bv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mC(t,e,i,r),n!==null&&(i=Hn(),Jr(n,t,r,i),MC(n,e,r))}}function DC(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function LC(t,e){Ju=Tf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fv(t,n)}}var Sf={readContext:Or,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},v2={readContext:Or,useCallback:function(t,e){return ui().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:fT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4194308,4,AC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mh(4,2,t,e)},useMemo:function(t,e){var n=ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=y2.bind(null,Pt,t),[r.memoizedState,t]},useRef:function(t){var e=ui();return t={current:t},e.memoizedState=t},useState:hT,useDebugValue:Mv,useDeferredValue:function(t){return ui().memoizedState=t},useTransition:function(){var t=hT(!1),e=t[0];return t=g2.bind(null,t[1]),ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pt,i=ui();if(bt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),on===null)throw Error(ee(349));Go&30||wC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fT(TC.bind(null,r,s,t),[t]),r.flags|=2048,kc(9,EC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ui(),e=on.identifierPrefix;if(bt){var n=Li,r=Di;n=(r&~(1<<32-Xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=m2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w2={readContext:Or,useCallback:PC,useContext:Or,useEffect:Lv,useImperativeHandle:xC,useInsertionEffect:CC,useLayoutEffect:bC,useMemo:kC,useReducer:ig,useRef:RC,useState:function(){return ig(Pc)},useDebugValue:Mv,useDeferredValue:function(t){var e=Dr();return NC(e,Xt.memoizedState,t)},useTransition:function(){var t=ig(Pc)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:_C,useSyncExternalStore:vC,useId:OC,unstable_isNewReconciler:!1},E2={readContext:Or,useCallback:PC,useContext:Or,useEffect:Lv,useImperativeHandle:xC,useInsertionEffect:CC,useLayoutEffect:bC,useMemo:kC,useReducer:sg,useRef:RC,useState:function(){return sg(Pc)},useDebugValue:Mv,useDeferredValue:function(t){var e=Dr();return Xt===null?e.memoizedState=t:NC(e,Xt.memoizedState,t)},useTransition:function(){var t=sg(Pc)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:_C,useSyncExternalStore:vC,useId:OC,unstable_isNewReconciler:!1};function Br(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bp={isMounted:function(t){return(t=t._reactInternals)?fa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Fs(t),s=$i(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ls(t,s,i),e!==null&&(Jr(e,t,i,r),Dh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Fs(t),s=$i(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ls(t,s,i),e!==null&&(Jr(e,t,i,r),Dh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hn(),r=Fs(t),i=$i(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ls(t,i,r),e!==null&&(Jr(e,t,r,n),Dh(e,t,r))}};function pT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Sc(n,r)||!Sc(i,s):!0}function FC(t,e,n){var r=!1,i=qs,s=e.contextType;return typeof s=="object"&&s!==null?s=Or(s):(i=nr(e)?qo:Nn.current,r=e.contextTypes,s=(r=r!=null)?gl(t,i):qs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bp.enqueueReplaceState(e,e.state,null)}function Py(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Av(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Or(s):(s=nr(e)?qo:Nn.current,i.context=gl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bp.enqueueReplaceState(i,i.state,null),wf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wl(t,e){try{var n="",r=e;do n+=QO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function og(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ky(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T2=typeof WeakMap=="function"?WeakMap:Map;function VC(t,e,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rf||(Rf=!0,$y=r),ky(t,e)},n}function UC(t,e,n){n=$i(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ky(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ky(t,e),typeof r!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new T2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=M2.bind(null,t,e,n),e.then(t,t))}function yT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _T(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$i(-1,1),e.tag=2,Ls(n,e,1))),n.lanes|=1),t)}var S2=is.ReactCurrentOwner,Zn=!1;function jn(t,e,n,r){e.child=t===null?pC(e,null,n,r):_l(e,t.child,n,r)}function vT(t,e,n,r,i){n=n.render;var s=e.ref;return ol(e,i),r=Ov(t,e,n,r,s,i),n=Dv(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(bt&&n&&Ev(e),e.flags|=1,jn(t,e,r,i),e.child)}function wT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jC(t,e,s,r,i)):(t=jh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Sc,n(o,r)&&t.ref===e.ref)return Qi(t,e,i)}return e.flags|=1,t=Vs(s,r),t.ref=e.ref,t.return=e,e.child=t}function jC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Sc(s,r)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,Qi(t,e,i)}return Ny(t,e,n,r,i)}function $C(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Xa,lr),lr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Xa,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pt(Xa,lr),lr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pt(Xa,lr),lr|=r;return jn(t,e,i,n),e.child}function BC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ny(t,e,n,r,i){var s=nr(n)?qo:Nn.current;return s=gl(e,s),ol(e,i),n=Ov(t,e,n,r,s,i),r=Dv(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(bt&&r&&Ev(e),e.flags|=1,jn(t,e,n,i),e.child)}function ET(t,e,n,r,i){if(nr(n)){var s=!0;mf(e)}else s=!1;if(ol(e,i),e.stateNode===null)Fh(t,e),FC(e,n,r),Py(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Or(u):(u=nr(n)?qo:Nn.current,u=gl(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&mT(e,o,r,u),_s=!1;var f=e.memoizedState;o.state=f,wf(e,r,o,i),l=e.memoizedState,a!==r||f!==l||tr.current||_s?(typeof d=="function"&&(xy(e,n,d,r),l=e.memoizedState),(a=_s||pT(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Br(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Or(l):(l=nr(n)?qo:Nn.current,l=gl(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&mT(e,o,r,l),_s=!1,f=e.memoizedState,o.state=f,wf(e,r,o,i);var y=e.memoizedState;a!==h||f!==y||tr.current||_s?(typeof p=="function"&&(xy(e,n,p,r),y=e.memoizedState),(u=_s||pT(e,n,u,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Oy(t,e,n,r,s,i)}function Oy(t,e,n,r,i,s){BC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&oT(e,n,!1),Qi(t,e,s);r=e.stateNode,S2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_l(e,t.child,null,s),e.child=_l(e,null,a,s)):jn(t,e,a,s),e.memoizedState=r.state,i&&oT(e,n,!0),e.child}function zC(t){var e=t.stateNode;e.pendingContext?sT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sT(t,e.context,!1),xv(t,e.containerInfo)}function TT(t,e,n,r,i){return yl(),Sv(i),e.flags|=256,jn(t,e,n,r),e.child}var Dy={dehydrated:null,treeContext:null,retryLane:0};function Ly(t){return{baseLanes:t,cachePool:null,transitions:null}}function HC(t,e,n){var r=e.pendingProps,i=xt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pt(xt,i&1),t===null)return by(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pp(o,r,0,null),t=jo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ly(n),e.memoizedState=Dy,t):Fv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return I2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Vs(a,s):(s=jo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ly(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Dy,r}return s=t.child,t=s.sibling,r=Vs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fv(t,e){return e=Pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,r){return r!==null&&Sv(r),_l(e,t.child,null,n),t=Fv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=og(Error(ee(422))),lh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pp({mode:"visible",children:r.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_l(e,t.child,null,o),e.child.memoizedState=Ly(o),e.memoizedState=Dy,s);if(!(e.mode&1))return lh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=og(s,r,void 0),lh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zn||a){if(r=on,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gi(t,i),Jr(r,t,i,-1))}return zv(),r=og(Error(ee(421))),lh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=F2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,cr=Ds(i.nextSibling),pr=e,bt=!0,Wr=null,t!==null&&(Cr[br++]=Di,Cr[br++]=Li,Cr[br++]=Ko,Di=t.id,Li=t.overflow,Ko=e),e=Fv(e,r.children),e.flags|=4096,e)}function ST(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ay(t.return,e,n)}function ag(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ST(t,n,e);else if(t.tag===19)ST(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(xt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ef(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ag(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ef(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ag(e,!0,n,null,s);break;case"together":ag(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function R2(t,e,n){switch(e.tag){case 3:zC(e),yl();break;case 5:yC(e);break;case 1:nr(e.type)&&mf(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pt(_f,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?HC(t,e,n):(pt(xt,xt.current&1),t=Qi(t,e,n),t!==null?t.sibling:null);pt(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pt(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,$C(t,e,n)}return Qi(t,e,n)}var qC,My,KC,GC;qC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};My=function(){};KC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ko(yi.current);var s=null;switch(n){case"input":i=iy(t,i),r=iy(t,r),s=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),s=[];break;case"textarea":i=ay(t,i),r=ay(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ff)}uy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&_t("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};GC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tu(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function C2(t,e,n){var r=e.pendingProps;switch(Tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(e),null;case 1:return nr(e.type)&&pf(),Tn(e),null;case 3:return r=e.stateNode,vl(),St(tr),St(Nn),kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(Hy(Wr),Wr=null))),My(t,e),Tn(e),null;case 5:Pv(e);var i=ko(Ac.current);if(n=e.type,t!==null&&e.stateNode!=null)KC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Tn(e),null}if(t=ko(yi.current),oh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[di]=e,r[Cc]=s,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<ju.length;i++)_t(ju[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":NE(r,s),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_t("invalid",r);break;case"textarea":DE(r,s),_t("invalid",r)}uy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sh(r.textContent,a,t),i=["children",""+a]):gc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_t("scroll",r)}switch(n){case"input":Xd(r),OE(r,s,!0);break;case"textarea":Xd(r),LE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ff)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[di]=e,t[Cc]=r,qC(t,e,!1,!1),e.stateNode=t;e:{switch(o=cy(n,r),n){case"dialog":_t("cancel",t),_t("close",t),i=r;break;case"iframe":case"object":case"embed":_t("load",t),i=r;break;case"video":case"audio":for(i=0;i<ju.length;i++)_t(ju[i],t);i=r;break;case"source":_t("error",t),i=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),i=r;break;case"details":_t("toggle",t),i=r;break;case"input":NE(t,r),i=iy(t,r),_t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":DE(t,r),i=ay(t,r),_t("invalid",t);break;default:i=r}uy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RR(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SR(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yc(t,l):typeof l=="number"&&yc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_t("scroll",t):l!=null&&av(t,s,l,o))}switch(n){case"input":Xd(t),OE(t,r,!1);break;case"textarea":Xd(t),LE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ws(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?nl(t,!!r.multiple,s,!1):r.defaultValue!=null&&nl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ff)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tn(e),null;case 6:if(t&&e.stateNode!=null)GC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ko(Ac.current),ko(yi.current),oh(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(s=r.nodeValue!==n)&&(t=pr,t!==null))switch(t.tag){case 3:sh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[di]=e,e.stateNode=r}return Tn(e),null;case 13:if(St(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&cr!==null&&e.mode&1&&!(e.flags&128))hC(),yl(),e.flags|=98560,s=!1;else if(s=oh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[di]=e}else yl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tn(e),s=!1}else Wr!==null&&(Hy(Wr),Wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Jt===0&&(Jt=3):zv())),e.updateQueue!==null&&(e.flags|=4),Tn(e),null);case 4:return vl(),My(t,e),t===null&&Ic(e.stateNode.containerInfo),Tn(e),null;case 10:return Cv(e.type._context),Tn(e),null;case 17:return nr(e.type)&&pf(),Tn(e),null;case 19:if(St(xt),s=e.memoizedState,s===null)return Tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Tu(s,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ef(t),o!==null){for(e.flags|=128,Tu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(xt,xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ut()>El&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ef(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bt)return Tn(e),null}else 2*Ut()-s.renderingStartTime>El&&n!==1073741824&&(e.flags|=128,r=!0,Tu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ut(),e.sibling=null,n=xt.current,pt(xt,r?n&1|2:n&1),e):(Tn(e),null);case 22:case 23:return Bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(Tn(e),e.subtreeFlags&6&&(e.flags|=8192)):Tn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function b2(t,e){switch(Tv(e),e.tag){case 1:return nr(e.type)&&pf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vl(),St(tr),St(Nn),kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pv(e),null;case 13:if(St(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));yl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(xt),null;case 4:return vl(),null;case 10:return Cv(e.type._context),null;case 22:case 23:return Bv(),null;case 24:return null;default:return null}}var uh=!1,Rn=!1,A2=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ya(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Lt(t,e,r)}else n.current=null}function Fy(t,e,n){try{n()}catch(r){Lt(t,e,r)}}var IT=!1;function x2(t,e){if(wy=cf,t=ZR(),wv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ey={focusedElem:t,selectionRange:n},cf=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,S=y.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?w:Br(e.type,w),S);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(b){Lt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return y=IT,IT=!1,y}function Zu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fy(e,n,s)}i=i.next}while(i!==r)}}function Ap(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QC(t){var e=t.alternate;e!==null&&(t.alternate=null,QC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[Cc],delete e[Iy],delete e[d2],delete e[h2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YC(t){return t.tag===5||t.tag===3||t.tag===4}function RT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ff));else if(r!==4&&(t=t.child,t!==null))for(Uy(t,e,n),t=t.sibling;t!==null;)Uy(t,e,n),t=t.sibling}function jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jy(t,e,n),t=t.sibling;t!==null;)jy(t,e,n),t=t.sibling}var un=null,zr=!1;function fs(t,e,n){for(n=n.child;n!==null;)XC(t,e,n),n=n.sibling}function XC(t,e,n){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(wp,n)}catch{}switch(n.tag){case 5:Rn||Ya(n,e);case 6:var r=un,i=zr;un=null,fs(t,e,n),un=r,zr=i,un!==null&&(zr?(t=un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(zr?(t=un,n=n.stateNode,t.nodeType===8?eg(t.parentNode,n):t.nodeType===1&&eg(t,n),Ec(t)):eg(un,n.stateNode));break;case 4:r=un,i=zr,un=n.stateNode.containerInfo,zr=!0,fs(t,e,n),un=r,zr=i;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fy(n,e,o),i=i.next}while(i!==r)}fs(t,e,n);break;case 1:if(!Rn&&(Ya(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Lt(n,e,a)}fs(t,e,n);break;case 21:fs(t,e,n);break;case 22:n.mode&1?(Rn=(r=Rn)||n.memoizedState!==null,fs(t,e,n),Rn=r):fs(t,e,n);break;default:fs(t,e,n)}}function CT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A2),e.forEach(function(r){var i=V2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:un=a.stateNode,zr=!1;break e;case 3:un=a.stateNode.containerInfo,zr=!0;break e;case 4:un=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(un===null)throw Error(ee(160));XC(s,o,i),un=null,zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Lt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JC(e,t),e=e.sibling}function JC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),li(t),r&4){try{Zu(3,t,t.return),Ap(3,t)}catch(w){Lt(t,t.return,w)}try{Zu(5,t,t.return)}catch(w){Lt(t,t.return,w)}}break;case 1:$r(e,t),li(t),r&512&&n!==null&&Ya(n,n.return);break;case 5:if($r(e,t),li(t),r&512&&n!==null&&Ya(n,n.return),t.flags&32){var i=t.stateNode;try{yc(i,"")}catch(w){Lt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wR(i,s),cy(a,o);var u=cy(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?RR(i,h):d==="dangerouslySetInnerHTML"?SR(i,h):d==="children"?yc(i,h):av(i,d,h,u)}switch(a){case"input":sy(i,s);break;case"textarea":ER(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?nl(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?nl(i,!!s.multiple,s.defaultValue,!0):nl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cc]=s}catch(w){Lt(t,t.return,w)}}break;case 6:if($r(e,t),li(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Lt(t,t.return,w)}}break;case 3:if($r(e,t),li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ec(e.containerInfo)}catch(w){Lt(t,t.return,w)}break;case 4:$r(e,t),li(t);break;case 13:$r(e,t),li(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jv=Ut())),r&4&&CT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Rn=(u=Rn)||d,$r(e,t),Rn=u):$r(e,t),li(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(me=t,d=t.child;d!==null;){for(h=me=d;me!==null;){switch(f=me,p=f.child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:Ya(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Lt(r,n,w)}}break;case 5:Ya(f,f.return);break;case 22:if(f.memoizedState!==null){AT(h);continue}}p!==null?(p.return=f,me=p):AT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IR("display",o))}catch(w){Lt(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Lt(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$r(e,t),li(t),r&4&&CT(t);break;case 21:break;default:$r(e,t),li(t)}}function li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YC(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yc(i,""),r.flags&=-33);var s=RT(t);jy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=RT(t);Uy(t,a,o);break;default:throw Error(ee(161))}}catch(l){Lt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function P2(t,e,n){me=t,ZC(t)}function ZC(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var i=me,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rn;a=uh;var u=Rn;if(uh=o,(Rn=l)&&!u)for(me=i;me!==null;)o=me,l=o.child,o.tag===22&&o.memoizedState!==null?xT(i):l!==null?(l.return=o,me=l):xT(i);for(;s!==null;)me=s,ZC(s),s=s.sibling;me=i,uh=a,Rn=u}bT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,me=s):bT(t)}}function bT(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rn||Ap(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Rn||e.flags&512&&Vy(e)}catch(f){Lt(e,e.return,f)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function AT(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function xT(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ap(4,e)}catch(l){Lt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Lt(e,i,l)}}var s=e.return;try{Vy(e)}catch(l){Lt(e,s,l)}break;case 5:var o=e.return;try{Vy(e)}catch(l){Lt(e,o,l)}}}catch(l){Lt(e,e.return,l)}if(e===t){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var k2=Math.ceil,If=is.ReactCurrentDispatcher,Vv=is.ReactCurrentOwner,kr=is.ReactCurrentBatchConfig,et=0,on=null,Ht=null,hn=0,lr=0,Xa=no(0),Jt=0,Nc=null,Qo=0,xp=0,Uv=0,ec=null,Xn=null,jv=0,El=1/0,ki=null,Rf=!1,$y=null,Ms=null,ch=!1,bs=null,Cf=0,tc=0,By=null,Vh=-1,Uh=0;function Hn(){return et&6?Ut():Vh!==-1?Vh:Vh=Ut()}function Fs(t){return t.mode&1?et&2&&hn!==0?hn&-hn:p2.transition!==null?(Uh===0&&(Uh=FR()),Uh):(t=st,t!==0||(t=window.event,t=t===void 0?16:HR(t.type)),t):1}function Jr(t,e,n,r){if(50<tc)throw tc=0,By=null,Error(ee(185));ed(t,n,r),(!(et&2)||t!==on)&&(t===on&&(!(et&2)&&(xp|=n),Jt===4&&ws(t,hn)),rr(t,r),n===1&&et===0&&!(e.mode&1)&&(El=Ut()+500,Rp&&ro()))}function rr(t,e){var n=t.callbackNode;pD(t,e);var r=uf(t,t===on?hn:0);if(r===0)n!==null&&VE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&VE(n),e===1)t.tag===0?f2(PT.bind(null,t)):uC(PT.bind(null,t)),u2(function(){!(et&6)&&ro()}),n=null;else{switch(VR(r)){case 1:n=hv;break;case 4:n=LR;break;case 16:n=lf;break;case 536870912:n=MR;break;default:n=lf}n=ab(n,eb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eb(t,e){if(Vh=-1,Uh=0,et&6)throw Error(ee(327));var n=t.callbackNode;if(al()&&t.callbackNode!==n)return null;var r=uf(t,t===on?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bf(t,r);else{e=r;var i=et;et|=2;var s=nb();(on!==t||hn!==e)&&(ki=null,El=Ut()+500,Uo(t,e));do try{D2();break}catch(a){tb(t,a)}while(!0);Rv(),If.current=s,et=i,Ht!==null?e=0:(on=null,hn=0,e=Jt)}if(e!==0){if(e===2&&(i=my(t),i!==0&&(r=i,e=zy(t,i))),e===1)throw n=Nc,Uo(t,0),ws(t,r),rr(t,Ut()),n;if(e===6)ws(t,r);else{if(i=t.current.alternate,!(r&30)&&!N2(i)&&(e=bf(t,r),e===2&&(s=my(t),s!==0&&(r=s,e=zy(t,s))),e===1))throw n=Nc,Uo(t,0),ws(t,r),rr(t,Ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:Ro(t,Xn,ki);break;case 3:if(ws(t,r),(r&130023424)===r&&(e=jv+500-Ut(),10<e)){if(uf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sy(Ro.bind(null,t,Xn,ki),e);break}Ro(t,Xn,ki);break;case 4:if(ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k2(r/1960))-r,10<r){t.timeoutHandle=Sy(Ro.bind(null,t,Xn,ki),r);break}Ro(t,Xn,ki);break;case 5:Ro(t,Xn,ki);break;default:throw Error(ee(329))}}}return rr(t,Ut()),t.callbackNode===n?eb.bind(null,t):null}function zy(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(Uo(t,e).flags|=256),t=bf(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&Hy(e)),t}function Hy(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function N2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ti(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ws(t,e){for(e&=~Uv,e&=~xp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xr(e),r=1<<n;t[n]=-1,e&=~r}}function PT(t){if(et&6)throw Error(ee(327));al();var e=uf(t,0);if(!(e&1))return rr(t,Ut()),null;var n=bf(t,e);if(t.tag!==0&&n===2){var r=my(t);r!==0&&(e=r,n=zy(t,r))}if(n===1)throw n=Nc,Uo(t,0),ws(t,e),rr(t,Ut()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ro(t,Xn,ki),rr(t,Ut()),null}function $v(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(El=Ut()+500,Rp&&ro())}}function Yo(t){bs!==null&&bs.tag===0&&!(et&6)&&al();var e=et;et|=1;var n=kr.transition,r=st;try{if(kr.transition=null,st=1,t)return t()}finally{st=r,kr.transition=n,et=e,!(et&6)&&ro()}}function Bv(){lr=Xa.current,St(Xa)}function Uo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,l2(n)),Ht!==null)for(n=Ht.return;n!==null;){var r=n;switch(Tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pf();break;case 3:vl(),St(tr),St(Nn),kv();break;case 5:Pv(r);break;case 4:vl();break;case 13:St(xt);break;case 19:St(xt);break;case 10:Cv(r.type._context);break;case 22:case 23:Bv()}n=n.return}if(on=t,Ht=t=Vs(t.current,null),hn=lr=e,Jt=0,Nc=null,Uv=xp=Qo=0,Xn=ec=null,Po!==null){for(e=0;e<Po.length;e++)if(n=Po[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Po=null}return t}function tb(t,e){do{var n=Ht;try{if(Rv(),Lh.current=Sf,Tf){for(var r=Pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tf=!1}if(Go=0,nn=Xt=Pt=null,Ju=!1,xc=0,Vv.current=null,n===null||n.return===null){Jt=1,Nc=e,Ht=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yT(o);if(p!==null){p.flags&=-257,_T(p,o,a,s,e),p.mode&1&&gT(s,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){gT(s,u,e),zv();break e}l=Error(ee(426))}}else if(bt&&a.mode&1){var S=yT(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),_T(S,o,a,s,e),Sv(wl(l,a));break e}}s=l=wl(l,a),Jt!==4&&(Jt=2),ec===null?ec=[s]:ec.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=VC(s,l,e);cT(s,T);break e;case 1:a=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ms===null||!Ms.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=UC(s,a,e);cT(s,b);break e}}s=s.return}while(s!==null)}ib(n)}catch(O){e=O,Ht===n&&n!==null&&(Ht=n=n.return);continue}break}while(!0)}function nb(){var t=If.current;return If.current=Sf,t===null?Sf:t}function zv(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),on===null||!(Qo&268435455)&&!(xp&268435455)||ws(on,hn)}function bf(t,e){var n=et;et|=2;var r=nb();(on!==t||hn!==e)&&(ki=null,Uo(t,e));do try{O2();break}catch(i){tb(t,i)}while(!0);if(Rv(),et=n,If.current=r,Ht!==null)throw Error(ee(261));return on=null,hn=0,Jt}function O2(){for(;Ht!==null;)rb(Ht)}function D2(){for(;Ht!==null&&!sD();)rb(Ht)}function rb(t){var e=ob(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?ib(t):Ht=e,Vv.current=null}function ib(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=b2(n,e),n!==null){n.flags&=32767,Ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,Ht=null;return}}else if(n=C2(n,e,lr),n!==null){Ht=n;return}if(e=e.sibling,e!==null){Ht=e;return}Ht=e=t}while(e!==null);Jt===0&&(Jt=5)}function Ro(t,e,n){var r=st,i=kr.transition;try{kr.transition=null,st=1,L2(t,e,n,r)}finally{kr.transition=i,st=r}return null}function L2(t,e,n,r){do al();while(bs!==null);if(et&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mD(t,s),t===on&&(Ht=on=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ch||(ch=!0,ab(lf,function(){return al(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kr.transition,kr.transition=null;var o=st;st=1;var a=et;et|=4,Vv.current=null,x2(t,n),JC(n,t),t2(Ey),cf=!!wy,Ey=wy=null,t.current=n,P2(n),oD(),et=a,st=o,kr.transition=s}else t.current=n;if(ch&&(ch=!1,bs=t,Cf=i),s=t.pendingLanes,s===0&&(Ms=null),uD(n.stateNode),rr(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rf)throw Rf=!1,t=$y,$y=null,t;return Cf&1&&t.tag!==0&&al(),s=t.pendingLanes,s&1?t===By?tc++:(tc=0,By=t):tc=0,ro(),null}function al(){if(bs!==null){var t=VR(Cf),e=kr.transition,n=st;try{if(kr.transition=null,st=16>t?16:t,bs===null)var r=!1;else{if(t=bs,bs=null,Cf=0,et&6)throw Error(ee(331));var i=et;for(et|=4,me=t.current;me!==null;){var s=me,o=s.child;if(me.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(me=u;me!==null;){var d=me;switch(d.tag){case 0:case 11:case 15:Zu(8,d,s)}var h=d.child;if(h!==null)h.return=d,me=h;else for(;me!==null;){d=me;var f=d.sibling,p=d.return;if(QC(d),d===u){me=null;break}if(f!==null){f.return=p,me=f;break}me=p}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,me=o;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zu(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,me=T;break e}me=s.return}}var _=t.current;for(me=_;me!==null;){o=me;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,me=E;else e:for(o=_;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ap(9,a)}}catch(O){Lt(a,a.return,O)}if(a===o){me=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,me=b;break e}me=a.return}}if(et=i,ro(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(wp,t)}catch{}r=!0}return r}finally{st=n,kr.transition=e}}return!1}function kT(t,e,n){e=wl(n,e),e=VC(t,e,1),t=Ls(t,e,1),e=Hn(),t!==null&&(ed(t,1,e),rr(t,e))}function Lt(t,e,n){if(t.tag===3)kT(t,t,n);else for(;e!==null;){if(e.tag===3){kT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ms===null||!Ms.has(r))){t=wl(n,t),t=UC(e,t,1),e=Ls(e,t,1),t=Hn(),e!==null&&(ed(e,1,t),rr(e,t));break}}e=e.return}}function M2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hn(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(hn&n)===n&&(Jt===4||Jt===3&&(hn&130023424)===hn&&500>Ut()-jv?Uo(t,0):Uv|=n),rr(t,e)}function sb(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=Hn();t=Gi(t,e),t!==null&&(ed(t,e,n),rr(t,n))}function F2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sb(t,n)}function V2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),sb(t,n)}var ob;ob=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tr.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,R2(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,bt&&e.flags&1048576&&cC(e,yf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fh(t,e),t=e.pendingProps;var i=gl(e,Nn.current);ol(e,n),i=Ov(null,e,r,t,i,n);var s=Dv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(r)?(s=!0,mf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Av(e),i.updater=bp,e.stateNode=i,i._reactInternals=e,Py(e,r,t,n),e=Oy(null,e,r,!0,s,n)):(e.tag=0,bt&&s&&Ev(e),jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=j2(r),t=Br(r,t),i){case 0:e=Ny(null,e,r,t,n);break e;case 1:e=ET(null,e,r,t,n);break e;case 11:e=vT(null,e,r,t,n);break e;case 14:e=wT(null,e,r,Br(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),Ny(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),ET(t,e,r,i,n);case 3:e:{if(zC(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gC(t,e),wf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wl(Error(ee(423)),e),e=TT(t,e,r,n,i);break e}else if(r!==i){i=wl(Error(ee(424)),e),e=TT(t,e,r,n,i);break e}else for(cr=Ds(e.stateNode.containerInfo.firstChild),pr=e,bt=!0,Wr=null,n=pC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yl(),r===i){e=Qi(t,e,n);break e}jn(t,e,r,n)}e=e.child}return e;case 5:return yC(e),t===null&&by(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ty(r,i)?o=null:s!==null&&Ty(r,s)&&(e.flags|=32),BC(t,e),jn(t,e,o,n),e.child;case 6:return t===null&&by(e),null;case 13:return HC(t,e,n);case 4:return xv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_l(e,null,r,n):jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),vT(t,e,r,i,n);case 7:return jn(t,e,e.pendingProps,n),e.child;case 8:return jn(t,e,e.pendingProps.children,n),e.child;case 12:return jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pt(_f,r._currentValue),r._currentValue=o,s!==null)if(ti(s.value,o)){if(s.children===i.children&&!tr.current){e=Qi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$i(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ay(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ay(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ol(e,n),i=Or(i),r=r(i),e.flags|=1,jn(t,e,r,n),e.child;case 14:return r=e.type,i=Br(r,e.pendingProps),i=Br(r.type,i),wT(t,e,r,i,n);case 15:return jC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),Fh(t,e),e.tag=1,nr(r)?(t=!0,mf(e)):t=!1,ol(e,n),FC(e,r,i),Py(e,r,i,n),Oy(null,e,r,!0,t,n);case 19:return WC(t,e,n);case 22:return $C(t,e,n)}throw Error(ee(156,e.tag))};function ab(t,e){return DR(t,e)}function U2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(t,e,n,r){return new U2(t,e,n,r)}function Hv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j2(t){if(typeof t=="function")return Hv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uv)return 11;if(t===cv)return 14}return 2}function Vs(t,e){var n=t.alternate;return n===null?(n=xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $a:return jo(n.children,i,s,e);case lv:o=8,i|=8;break;case ey:return t=xr(12,n,e,i|2),t.elementType=ey,t.lanes=s,t;case ty:return t=xr(13,n,e,i),t.elementType=ty,t.lanes=s,t;case ny:return t=xr(19,n,e,i),t.elementType=ny,t.lanes=s,t;case yR:return Pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mR:o=10;break e;case gR:o=9;break e;case uv:o=11;break e;case cv:o=14;break e;case ys:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=xr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jo(t,e,n,r){return t=xr(7,t,r,e),t.lanes=n,t}function Pp(t,e,n,r){return t=xr(22,t,r,e),t.elementType=yR,t.lanes=n,t.stateNode={isHidden:!1},t}function lg(t,e,n){return t=xr(6,t,null,e),t.lanes=n,t}function ug(t,e,n){return e=xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zm(0),this.expirationTimes=zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wv(t,e,n,r,i,s,o,a,l){return t=new $2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(s),t}function B2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lb(t){if(!t)return qs;t=t._reactInternals;e:{if(fa(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(nr(n))return lC(t,n,e)}return e}function ub(t,e,n,r,i,s,o,a,l){return t=Wv(n,r,!0,t,i,s,o,a,l),t.context=lb(null),n=t.current,r=Hn(),i=Fs(n),s=$i(r,i),s.callback=e??null,Ls(n,s,i),t.current.lanes=i,ed(t,i,r),rr(t,r),t}function kp(t,e,n,r){var i=e.current,s=Hn(),o=Fs(i);return n=lb(n),e.context===null?e.context=n:e.pendingContext=n,e=$i(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ls(i,e,o),t!==null&&(Jr(t,i,o,s),Dh(t,i,o)),o}function Af(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function NT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qv(t,e){NT(t,e),(t=t.alternate)&&NT(t,e)}function z2(){return null}var cb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kv(t){this._internalRoot=t}Np.prototype.render=Kv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));kp(t,e,null,null)};Np.prototype.unmount=Kv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yo(function(){kp(null,t,null,null)}),e[Ki]=null}};function Np(t){this._internalRoot=t}Np.prototype.unstable_scheduleHydration=function(t){if(t){var e=$R();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vs.length&&e!==0&&e<vs[n].priority;n++);vs.splice(n,0,t),n===0&&zR(t)}};function Gv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OT(){}function H2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Af(o);s.call(u)}}var o=ub(e,r,t,0,null,!1,!1,"",OT);return t._reactRootContainer=o,t[Ki]=o.current,Ic(t.nodeType===8?t.parentNode:t),Yo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Af(l);a.call(u)}}var l=Wv(t,0,!1,null,null,!1,!1,"",OT);return t._reactRootContainer=l,t[Ki]=l.current,Ic(t.nodeType===8?t.parentNode:t),Yo(function(){kp(e,l,n,r)}),l}function Dp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Af(o);a.call(l)}}kp(e,o,t,i)}else o=H2(n,e,t,i,r);return Af(o)}UR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uu(e.pendingLanes);n!==0&&(fv(e,n|1),rr(e,Ut()),!(et&6)&&(El=Ut()+500,ro()))}break;case 13:Yo(function(){var r=Gi(t,1);if(r!==null){var i=Hn();Jr(r,t,1,i)}}),qv(t,1)}};pv=function(t){if(t.tag===13){var e=Gi(t,134217728);if(e!==null){var n=Hn();Jr(e,t,134217728,n)}qv(t,134217728)}};jR=function(t){if(t.tag===13){var e=Fs(t),n=Gi(t,e);if(n!==null){var r=Hn();Jr(n,t,e,r)}qv(t,e)}};$R=function(){return st};BR=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};hy=function(t,e,n){switch(e){case"input":if(sy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ip(r);if(!i)throw Error(ee(90));vR(r),sy(r,i)}}}break;case"textarea":ER(t,n);break;case"select":e=n.value,e!=null&&nl(t,!!n.multiple,e,!1)}};AR=$v;xR=Yo;var W2={usingClientEntryPoint:!1,Events:[nd,Wa,Ip,CR,bR,$v]},Su={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q2={bundleType:Su.bundleType,version:Su.version,rendererPackageName:Su.rendererPackageName,rendererConfig:Su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NR(t),t===null?null:t.stateNode},findFiberByHostInstance:Su.findFiberByHostInstance||z2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{wp=dh.inject(q2),gi=dh}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W2;Er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gv(e))throw Error(ee(200));return B2(t,e,null,n)};Er.createRoot=function(t,e){if(!Gv(t))throw Error(ee(299));var n=!1,r="",i=cb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wv(t,1,!1,null,null,n,!1,r,i),t[Ki]=e.current,Ic(t.nodeType===8?t.parentNode:t),new Kv(e)};Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=NR(e),t=t===null?null:t.stateNode,t};Er.flushSync=function(t){return Yo(t)};Er.hydrate=function(t,e,n){if(!Op(e))throw Error(ee(200));return Dp(null,t,e,!0,n)};Er.hydrateRoot=function(t,e,n){if(!Gv(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ub(e,null,t,1,n??null,i,!1,s,o),t[Ki]=e.current,Ic(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Np(e)};Er.render=function(t,e,n){if(!Op(e))throw Error(ee(200));return Dp(null,t,e,!1,n)};Er.unmountComponentAtNode=function(t){if(!Op(t))throw Error(ee(40));return t._reactRootContainer?(Yo(function(){Dp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ki]=null})}),!0):!1};Er.unstable_batchedUpdates=$v;Er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Op(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Dp(t,e,n,!1,r)};Er.version="18.3.1-next-f1338f8080-20240426";function db(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(db)}catch(t){console.error(t)}}db(),dR.exports=Er;var mr=dR.exports;const K2=ev(mr),G2=ZI({__proto__:null,default:K2},[mr]);var hb,DT=mr;hb=DT.createRoot,DT.hydrateRoot;var id=t=>t.type==="checkbox",Ja=t=>t instanceof Date,$n=t=>t==null;const fb=t=>typeof t=="object";var Kt=t=>!$n(t)&&!Array.isArray(t)&&fb(t)&&!Ja(t),Q2=t=>Kt(t)&&t.target?id(t.target)?t.target.checked:t.target.value:t,Y2=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,X2=(t,e)=>t.has(Y2(e)),J2=t=>{const e=t.constructor&&t.constructor.prototype;return Kt(e)&&e.hasOwnProperty("isPrototypeOf")},Qv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Rr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Qv&&(t instanceof Blob||t instanceof FileList))&&(n||Kt(t)))if(e=n?[]:{},!n&&!J2(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Rr(t[r]));else return t;return e}var Lp=t=>Array.isArray(t)?t.filter(Boolean):[],Ft=t=>t===void 0,_e=(t,e,n)=>{if(!e||!Kt(t))return n;const r=Lp(e.split(/[,[\].]+?/)).reduce((i,s)=>$n(i)?i:i[s],t);return Ft(r)||r===t?Ft(t[e])?n:t[e]:r},ci=t=>typeof t=="boolean",Yv=t=>/^\w*$/.test(t),pb=t=>Lp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),vt=(t,e,n)=>{let r=-1;const i=Yv(e)?[e]:pb(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const u=t[a];l=Kt(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const LT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ve.createContext(null);var Z2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==qr.all&&(e._proxyFormState[o]=!r||qr.all),t[o]}});return i},Qn=t=>Kt(t)&&!Object.keys(t).length,eL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Qn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===qr.all)},$h=t=>Array.isArray(t)?t:[t];function tL(t){const e=ve.useRef(t);e.current=t,ve.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var hi=t=>typeof t=="string",nL=(t,e,n,r,i)=>hi(t)?(r&&e.watch.add(t),_e(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),_e(n,s))):(r&&(e.watchAll=!0),n),rL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},MT=t=>({isOnSubmit:!t||t===qr.onSubmit,isOnBlur:t===qr.onBlur,isOnChange:t===qr.onChange,isOnAll:t===qr.all,isOnTouch:t===qr.onTouched}),FT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const nc=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=_e(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(nc(a,e))break}else if(Kt(a)&&nc(a,e))break}}};var iL=(t,e,n)=>{const r=$h(_e(t,n));return vt(r,"root",e[n]),vt(t,n,r),t},Xv=t=>t.type==="file",Mi=t=>typeof t=="function",xf=t=>{if(!Qv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Bh=t=>hi(t),Jv=t=>t.type==="radio",Pf=t=>t instanceof RegExp;const VT={value:!1,isValid:!1},UT={value:!0,isValid:!0};var mb=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ft(t[0].attributes.value)?Ft(t[0].value)||t[0].value===""?UT:{value:t[0].value,isValid:!0}:UT:VT}return VT};const jT={isValid:!1,value:null};var gb=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,jT):jT;function $T(t,e,n="validate"){if(Bh(t)||Array.isArray(t)&&t.every(Bh)||ci(t)&&!t)return{type:n,message:Bh(t)?t:"",ref:e}}var Pa=t=>Kt(t)&&!Pf(t)?t:{value:t,message:""},BT=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:d,max:h,pattern:f,validate:p,name:y,valueAsNumber:w,mount:S,disabled:T}=t._f,_=_e(e,y);if(!S||T)return{};const E=o?o[0]:s,b=N=>{r&&E.reportValidity&&(E.setCustomValidity(ci(N)?"":N||""),E.reportValidity())},O={},F=Jv(s),C=id(s),g=F||C,R=(w||Xv(s))&&Ft(s.value)&&Ft(_)||xf(s)&&s.value===""||_===""||Array.isArray(_)&&!_.length,A=rL.bind(null,y,n,O),k=(N,P,re,be=xi.maxLength,Re=xi.minLength)=>{const te=N?P:re;O[y]={type:N?be:Re,message:te,ref:s,...A(N?be:Re,te)}};if(i?!Array.isArray(_)||!_.length:a&&(!g&&(R||$n(_))||ci(_)&&!_||C&&!mb(o).isValid||F&&!gb(o).isValid)){const{value:N,message:P}=Bh(a)?{value:!!a,message:a}:Pa(a);if(N&&(O[y]={type:xi.required,message:P,ref:E,...A(xi.required,P)},!n))return b(P),O}if(!R&&(!$n(d)||!$n(h))){let N,P;const re=Pa(h),be=Pa(d);if(!$n(_)&&!isNaN(_)){const Re=s.valueAsNumber||_&&+_;$n(re.value)||(N=Re>re.value),$n(be.value)||(P=Re<be.value)}else{const Re=s.valueAsDate||new Date(_),te=ie=>new Date(new Date().toDateString()+" "+ie),W=s.type=="time",Q=s.type=="week";hi(re.value)&&_&&(N=W?te(_)>te(re.value):Q?_>re.value:Re>new Date(re.value)),hi(be.value)&&_&&(P=W?te(_)<te(be.value):Q?_<be.value:Re<new Date(be.value))}if((N||P)&&(k(!!N,re.message,be.message,xi.max,xi.min),!n))return b(O[y].message),O}if((l||u)&&!R&&(hi(_)||i&&Array.isArray(_))){const N=Pa(l),P=Pa(u),re=!$n(N.value)&&_.length>+N.value,be=!$n(P.value)&&_.length<+P.value;if((re||be)&&(k(re,N.message,P.message),!n))return b(O[y].message),O}if(f&&!R&&hi(_)){const{value:N,message:P}=Pa(f);if(Pf(N)&&!_.match(N)&&(O[y]={type:xi.pattern,message:P,ref:s,...A(xi.pattern,P)},!n))return b(P),O}if(p){if(Mi(p)){const N=await p(_,e),P=$T(N,E);if(P&&(O[y]={...P,...A(xi.validate,P.message)},!n))return b(P.message),O}else if(Kt(p)){let N={};for(const P in p){if(!Qn(N)&&!n)break;const re=$T(await p[P](_,e),E,P);re&&(N={...re,...A(P,re.message)},b(re.message),n&&(O[y]=N))}if(!Qn(N)&&(O[y]={ref:E,...N},!n))return O}}return b(!0),O};function sL(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ft(t)?r++:t[e[r++]];return t}function oL(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ft(t[e]))return!1;return!0}function Yt(t,e){const n=Array.isArray(e)?e:Yv(e)?[e]:pb(e),r=n.length===1?t:sL(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Kt(r)&&Qn(r)||Array.isArray(r)&&oL(r))&&Yt(t,n.slice(0,-1)),t}var cg=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},kf=t=>$n(t)||!fb(t);function Es(t,e){if(kf(t)||kf(e))return t===e;if(Ja(t)&&Ja(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Ja(s)&&Ja(o)||Kt(s)&&Kt(o)||Array.isArray(s)&&Array.isArray(o)?!Es(s,o):s!==o)return!1}}return!0}var yb=t=>t.type==="select-multiple",aL=t=>Jv(t)||id(t),dg=t=>xf(t)&&t.isConnected,_b=t=>{for(const e in t)if(Mi(t[e]))return!0;return!1};function Nf(t,e={}){const n=Array.isArray(t);if(Kt(t)||n)for(const r in t)Array.isArray(t[r])||Kt(t[r])&&!_b(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Nf(t[r],e[r])):$n(t[r])||(e[r]=!0);return e}function vb(t,e,n){const r=Array.isArray(t);if(Kt(t)||r)for(const i in t)Array.isArray(t[i])||Kt(t[i])&&!_b(t[i])?Ft(e)||kf(n[i])?n[i]=Array.isArray(t[i])?Nf(t[i],[]):{...Nf(t[i])}:vb(t[i],$n(e)?{}:e[i],n[i]):n[i]=!Es(t[i],e[i]);return n}var hh=(t,e)=>vb(t,e,Nf(e)),wb=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ft(t)?t:e?t===""?NaN:t&&+t:n&&hi(t)?new Date(t):r?r(t):t;function hg(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Xv(e)?e.files:Jv(e)?gb(t.refs).value:yb(e)?[...e.selectedOptions].map(({value:n})=>n):id(e)?mb(t.refs).value:wb(Ft(e.value)?t.ref.value:e.value,t)}var lL=(t,e,n,r)=>{const i={};for(const s of t){const o=_e(e,s);o&&vt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Iu=t=>Ft(t)?t:Pf(t)?t.source:Kt(t)?Pf(t.value)?t.value.source:t.value:t;const zT="AsyncFunction";var uL=t=>(!t||!t.validate)&&!!(Mi(t.validate)&&t.validate.constructor.name===zT||Kt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===zT)),cL=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function HT(t,e,n){const r=_e(t,n);if(r||Yv(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=_e(e,s),a=_e(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var dL=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,hL=(t,e)=>!Lp(_e(t,e)).length&&Yt(t,e);const fL={mode:qr.onSubmit,reValidateMode:qr.onChange,shouldFocusError:!0};function pL(t={}){let e={...fL,...t},n={submitCount:0,isDirty:!1,isLoading:Mi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Kt(e.defaultValues)||Kt(e.values)?Rr(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Rr(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:cg(),array:cg(),state:cg()},f=MT(e.mode),p=MT(e.reValidateMode),y=e.criteriaMode===qr.all,w=L=>$=>{clearTimeout(u),u=setTimeout(L,$)},S=async L=>{if(d.isValid||L){const $=e.resolver?Qn((await g()).errors):await A(r,!0);$!==n.isValid&&h.state.next({isValid:$})}},T=(L,$)=>{(d.isValidating||d.validatingFields)&&((L||Array.from(a.mount)).forEach(K=>{K&&($?vt(n.validatingFields,K,$):Yt(n.validatingFields,K))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Qn(n.validatingFields)}))},_=(L,$=[],K,ue,oe=!0,ne=!0)=>{if(ue&&K){if(o.action=!0,ne&&Array.isArray(_e(r,L))){const Se=K(_e(r,L),ue.argA,ue.argB);oe&&vt(r,L,Se)}if(ne&&Array.isArray(_e(n.errors,L))){const Se=K(_e(n.errors,L),ue.argA,ue.argB);oe&&vt(n.errors,L,Se),hL(n.errors,L)}if(d.touchedFields&&ne&&Array.isArray(_e(n.touchedFields,L))){const Se=K(_e(n.touchedFields,L),ue.argA,ue.argB);oe&&vt(n.touchedFields,L,Se)}d.dirtyFields&&(n.dirtyFields=hh(i,s)),h.state.next({name:L,isDirty:N(L,$),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else vt(s,L,$)},E=(L,$)=>{vt(n.errors,L,$),h.state.next({errors:n.errors})},b=L=>{n.errors=L,h.state.next({errors:n.errors,isValid:!1})},O=(L,$,K,ue)=>{const oe=_e(r,L);if(oe){const ne=_e(s,L,Ft(K)?_e(i,L):K);Ft(ne)||ue&&ue.defaultChecked||$?vt(s,L,$?ne:hg(oe._f)):be(L,ne),o.mount&&S()}},F=(L,$,K,ue,oe)=>{let ne=!1,Se=!1;const Ke={name:L},Ue=!!(_e(r,L)&&_e(r,L)._f&&_e(r,L)._f.disabled);if(!K||ue){d.isDirty&&(Se=n.isDirty,n.isDirty=Ke.isDirty=N(),ne=Se!==Ke.isDirty);const $e=Ue||Es(_e(i,L),$);Se=!!(!Ue&&_e(n.dirtyFields,L)),$e||Ue?Yt(n.dirtyFields,L):vt(n.dirtyFields,L,!0),Ke.dirtyFields=n.dirtyFields,ne=ne||d.dirtyFields&&Se!==!$e}if(K){const $e=_e(n.touchedFields,L);$e||(vt(n.touchedFields,L,K),Ke.touchedFields=n.touchedFields,ne=ne||d.touchedFields&&$e!==K)}return ne&&oe&&h.state.next(Ke),ne?Ke:{}},C=(L,$,K,ue)=>{const oe=_e(n.errors,L),ne=d.isValid&&ci($)&&n.isValid!==$;if(t.delayError&&K?(l=w(()=>E(L,K)),l(t.delayError)):(clearTimeout(u),l=null,K?vt(n.errors,L,K):Yt(n.errors,L)),(K?!Es(oe,K):oe)||!Qn(ue)||ne){const Se={...ue,...ne&&ci($)?{isValid:$}:{},errors:n.errors,name:L};n={...n,...Se},h.state.next(Se)}},g=async L=>{T(L,!0);const $=await e.resolver(s,e.context,lL(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(L),$},R=async L=>{const{errors:$}=await g(L);if(L)for(const K of L){const ue=_e($,K);ue?vt(n.errors,K,ue):Yt(n.errors,K)}else n.errors=$;return $},A=async(L,$,K={valid:!0})=>{for(const ue in L){const oe=L[ue];if(oe){const{_f:ne,...Se}=oe;if(ne){const Ke=a.array.has(ne.name),Ue=oe._f&&uL(oe._f);Ue&&d.validatingFields&&T([ue],!0);const $e=await BT(oe,s,y,e.shouldUseNativeValidation&&!$,Ke);if(Ue&&d.validatingFields&&T([ue]),$e[ne.name]&&(K.valid=!1,$))break;!$&&(_e($e,ne.name)?Ke?iL(n.errors,$e,ne.name):vt(n.errors,ne.name,$e[ne.name]):Yt(n.errors,ne.name))}!Qn(Se)&&await A(Se,$,K)}}return K.valid},k=()=>{for(const L of a.unMount){const $=_e(r,L);$&&($._f.refs?$._f.refs.every(K=>!dg(K)):!dg($._f.ref))&&pe(L)}a.unMount=new Set},N=(L,$)=>(L&&$&&vt(s,L,$),!Es(Pe(),i)),P=(L,$,K)=>nL(L,a,{...o.mount?s:Ft($)?i:hi(L)?{[L]:$}:$},K,$),re=L=>Lp(_e(o.mount?s:i,L,t.shouldUnregister?_e(i,L,[]):[])),be=(L,$,K={})=>{const ue=_e(r,L);let oe=$;if(ue){const ne=ue._f;ne&&(!ne.disabled&&vt(s,L,wb($,ne)),oe=xf(ne.ref)&&$n($)?"":$,yb(ne.ref)?[...ne.ref.options].forEach(Se=>Se.selected=oe.includes(Se.value)):ne.refs?id(ne.ref)?ne.refs.length>1?ne.refs.forEach(Se=>(!Se.defaultChecked||!Se.disabled)&&(Se.checked=Array.isArray(oe)?!!oe.find(Ke=>Ke===Se.value):oe===Se.value)):ne.refs[0]&&(ne.refs[0].checked=!!oe):ne.refs.forEach(Se=>Se.checked=Se.value===oe):Xv(ne.ref)?ne.ref.value="":(ne.ref.value=oe,ne.ref.type||h.values.next({name:L,values:{...s}})))}(K.shouldDirty||K.shouldTouch)&&F(L,oe,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&ie(L)},Re=(L,$,K)=>{for(const ue in $){const oe=$[ue],ne=`${L}.${ue}`,Se=_e(r,ne);(a.array.has(L)||!kf(oe)||Se&&!Se._f)&&!Ja(oe)?Re(ne,oe,K):be(ne,oe,K)}},te=(L,$,K={})=>{const ue=_e(r,L),oe=a.array.has(L),ne=Rr($);vt(s,L,ne),oe?(h.array.next({name:L,values:{...s}}),(d.isDirty||d.dirtyFields)&&K.shouldDirty&&h.state.next({name:L,dirtyFields:hh(i,s),isDirty:N(L,ne)})):ue&&!ue._f&&!$n(ne)?Re(L,ne,K):be(L,ne,K),FT(L,a)&&h.state.next({...n}),h.values.next({name:o.mount?L:void 0,values:{...s}})},W=async L=>{o.mount=!0;const $=L.target;let K=$.name,ue=!0;const oe=_e(r,K),ne=()=>$.type?hg(oe._f):Q2(L),Se=Ke=>{ue=Number.isNaN(Ke)||Es(Ke,_e(s,K,Ke))};if(oe){let Ke,Ue;const $e=ne(),Dn=L.type===LT.BLUR||L.type===LT.FOCUS_OUT,as=!cL(oe._f)&&!e.resolver&&!_e(n.errors,K)&&!oe._f.deps||dL(Dn,_e(n.touchedFields,K),n.isSubmitted,p,f),Ln=FT(K,a,Dn);vt(s,K,$e),Dn?(oe._f.onBlur&&oe._f.onBlur(L),l&&l(0)):oe._f.onChange&&oe._f.onChange(L);const Mn=F(K,$e,Dn,!1),si=!Qn(Mn)||Ln;if(!Dn&&h.values.next({name:K,type:L.type,values:{...s}}),as)return d.isValid&&(t.mode==="onBlur"?Dn&&S():S()),si&&h.state.next({name:K,...Ln?{}:Mn});if(!Dn&&Ln&&h.state.next({...n}),e.resolver){const{errors:oi}=await g([K]);if(Se($e),ue){const Ea=HT(n.errors,r,K),Fn=HT(oi,r,Ea.name||K);Ke=Fn.error,K=Fn.name,Ue=Qn(oi)}}else T([K],!0),Ke=(await BT(oe,s,y,e.shouldUseNativeValidation))[K],T([K]),Se($e),ue&&(Ke?Ue=!1:d.isValid&&(Ue=await A(r,!0)));ue&&(oe._f.deps&&ie(oe._f.deps),C(K,Ue,Ke,Mn))}},Q=(L,$)=>{if(_e(n.errors,$)&&L.focus)return L.focus(),1},ie=async(L,$={})=>{let K,ue;const oe=$h(L);if(e.resolver){const ne=await R(Ft(L)?L:oe);K=Qn(ne),ue=L?!oe.some(Se=>_e(ne,Se)):K}else L?(ue=(await Promise.all(oe.map(async ne=>{const Se=_e(r,ne);return await A(Se&&Se._f?{[ne]:Se}:Se)}))).every(Boolean),!(!ue&&!n.isValid)&&S()):ue=K=await A(r);return h.state.next({...!hi(L)||d.isValid&&K!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:K}:{},errors:n.errors}),$.shouldFocus&&!ue&&nc(r,Q,L?oe:a.mount),ue},Pe=L=>{const $={...o.mount?s:i};return Ft(L)?$:hi(L)?_e($,L):L.map(K=>_e($,K))},q=(L,$)=>({invalid:!!_e(($||n).errors,L),isDirty:!!_e(($||n).dirtyFields,L),error:_e(($||n).errors,L),isValidating:!!_e(n.validatingFields,L),isTouched:!!_e(($||n).touchedFields,L)}),J=L=>{L&&$h(L).forEach($=>Yt(n.errors,$)),h.state.next({errors:L?n.errors:{}})},ye=(L,$,K)=>{const ue=(_e(r,L,{_f:{}})._f||{}).ref,oe=_e(n.errors,L)||{},{ref:ne,message:Se,type:Ke,...Ue}=oe;vt(n.errors,L,{...Ue,...$,ref:ue}),h.state.next({name:L,errors:n.errors,isValid:!1}),K&&K.shouldFocus&&ue&&ue.focus&&ue.focus()},Te=(L,$)=>Mi(L)?h.values.subscribe({next:K=>L(P(void 0,$),K)}):P(L,$,!0),pe=(L,$={})=>{for(const K of L?$h(L):a.mount)a.mount.delete(K),a.array.delete(K),$.keepValue||(Yt(r,K),Yt(s,K)),!$.keepError&&Yt(n.errors,K),!$.keepDirty&&Yt(n.dirtyFields,K),!$.keepTouched&&Yt(n.touchedFields,K),!$.keepIsValidating&&Yt(n.validatingFields,K),!e.shouldUnregister&&!$.keepDefaultValue&&Yt(i,K);h.values.next({values:{...s}}),h.state.next({...n,...$.keepDirty?{isDirty:N()}:{}}),!$.keepIsValid&&S()},U=({disabled:L,name:$,field:K,fields:ue,value:oe})=>{if(ci(L)&&o.mount||L){const ne=L?void 0:Ft(oe)?hg(K?K._f:_e(ue,$)._f):oe;vt(s,$,ne),F($,ne,!1,!1,!0)}},G=(L,$={})=>{let K=_e(r,L);const ue=ci($.disabled)||ci(t.disabled);return vt(r,L,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:L}},name:L,mount:!0,...$}}),a.mount.add(L),K?U({field:K,disabled:ci($.disabled)?$.disabled:t.disabled,name:L,value:$.value}):O(L,!0,$.value),{...ue?{disabled:$.disabled||t.disabled}:{},...e.progressive?{required:!!$.required,min:Iu($.min),max:Iu($.max),minLength:Iu($.minLength),maxLength:Iu($.maxLength),pattern:Iu($.pattern)}:{},name:L,onChange:W,onBlur:W,ref:oe=>{if(oe){G(L,$),K=_e(r,L);const ne=Ft(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,Se=aL(ne),Ke=K._f.refs||[];if(Se?Ke.find(Ue=>Ue===ne):ne===K._f.ref)return;vt(r,L,{_f:{...K._f,...Se?{refs:[...Ke.filter(dg),ne,...Array.isArray(_e(i,L))?[{}]:[]],ref:{type:ne.type,name:L}}:{ref:ne}}}),O(L,!1,void 0,ne)}else K=_e(r,L,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(X2(a.array,L)&&o.action)&&a.unMount.add(L)}}},he=()=>e.shouldFocusError&&nc(r,Q,a.mount),se=L=>{ci(L)&&(h.state.next({disabled:L}),nc(r,($,K)=>{const ue=_e(r,K);ue&&($.disabled=ue._f.disabled||L,Array.isArray(ue._f.refs)&&ue._f.refs.forEach(oe=>{oe.disabled=ue._f.disabled||L}))},0,!1))},fe=(L,$)=>async K=>{let ue;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let oe=Rr(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:Se}=await g();n.errors=ne,oe=Se}else await A(r);if(Yt(n.errors,"root"),Qn(n.errors)){h.state.next({errors:{}});try{await L(oe,K)}catch(ne){ue=ne}}else $&&await $({...n.errors},K),he(),setTimeout(he);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qn(n.errors)&&!ue,submitCount:n.submitCount+1,errors:n.errors}),ue)throw ue},Ve=(L,$={})=>{_e(r,L)&&(Ft($.defaultValue)?te(L,Rr(_e(i,L))):(te(L,$.defaultValue),vt(i,L,Rr($.defaultValue))),$.keepTouched||Yt(n.touchedFields,L),$.keepDirty||(Yt(n.dirtyFields,L),n.isDirty=$.defaultValue?N(L,Rr(_e(i,L))):N()),$.keepError||(Yt(n.errors,L),d.isValid&&S()),h.state.next({...n}))},ct=(L,$={})=>{const K=L?Rr(L):i,ue=Rr(K),oe=Qn(L),ne=oe?i:ue;if($.keepDefaultValues||(i=K),!$.keepValues){if($.keepDirtyValues)for(const Se of a.mount)_e(n.dirtyFields,Se)?vt(ne,Se,_e(s,Se)):te(Se,_e(ne,Se));else{if(Qv&&Ft(L))for(const Se of a.mount){const Ke=_e(r,Se);if(Ke&&Ke._f){const Ue=Array.isArray(Ke._f.refs)?Ke._f.refs[0]:Ke._f.ref;if(xf(Ue)){const $e=Ue.closest("form");if($e){$e.reset();break}}}}r={}}s=t.shouldUnregister?$.keepDefaultValues?Rr(i):{}:Rr(ne),h.array.next({values:{...ne}}),h.values.next({values:{...ne}})}a={mount:$.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!$.keepIsValid||!!$.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:$.keepSubmitCount?n.submitCount:0,isDirty:oe?!1:$.keepDirty?n.isDirty:!!($.keepDefaultValues&&!Es(L,i)),isSubmitted:$.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:oe?{}:$.keepDirtyValues?$.keepDefaultValues&&s?hh(i,s):n.dirtyFields:$.keepDefaultValues&&L?hh(i,L):$.keepDirty?n.dirtyFields:{},touchedFields:$.keepTouched?n.touchedFields:{},errors:$.keepErrors?n.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Oe=(L,$)=>ct(Mi(L)?L(s):L,$);return{control:{register:G,unregister:pe,getFieldState:q,handleSubmit:fe,setError:ye,_executeSchema:g,_getWatch:P,_getDirty:N,_updateValid:S,_removeUnmounted:k,_updateFieldArray:_,_updateDisabledField:U,_getFieldArray:re,_reset:ct,_resetDefaultValues:()=>Mi(e.defaultValues)&&e.defaultValues().then(L=>{Oe(L,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:L=>{n={...n,...L}},_disableForm:se,_subjects:h,_proxyFormState:d,_setErrors:b,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(L){o=L},get _defaultValues(){return i},get _names(){return a},set _names(L){a=L},get _formState(){return n},set _formState(L){n=L},get _options(){return e},set _options(L){e={...e,...L}}},trigger:ie,register:G,handleSubmit:fe,watch:Te,setValue:te,getValues:Pe,reset:Oe,resetField:Ve,clearErrors:J,unregister:pe,setError:ye,setFocus:(L,$={})=>{const K=_e(r,L),ue=K&&K._f;if(ue){const oe=ue.refs?ue.refs[0]:ue.ref;oe.focus&&(oe.focus(),$.shouldSelect&&oe.select())}},getFieldState:q}}function Zv(t={}){const e=ve.useRef(),n=ve.useRef(),[r,i]=ve.useState({isDirty:!1,isValidating:!1,isLoading:Mi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Mi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...pL(t),formState:r});const s=e.current.control;return s._options=t,tL({subject:s._subjects.state,next:o=>{eL(o,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),ve.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),ve.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),ve.useEffect(()=>{t.values&&!Es(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),ve.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),ve.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),ve.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=Z2(r,s),e.current}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},At.apply(this,arguments)}var zt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zt||(zt={}));const WT="popstate";function mL(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Oc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xo(i)}return yL(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gL(){return Math.random().toString(36).substr(2,8)}function qT(t,e){return{usr:t.state,key:t.key,idx:e}}function Oc(t,e,n,r){return n===void 0&&(n=null),At({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?io(e):e,{state:n,key:e&&e.key||r||gL()})}function Xo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=zt.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(At({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=zt.Pop;let S=d(),T=S==null?null:S-u;u=S,l&&l({action:a,location:w.location,delta:T})}function f(S,T){a=zt.Push;let _=Oc(w.location,S,T);u=d()+1;let E=qT(_,u),b=w.createHref(_);try{o.pushState(E,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(b)}s&&l&&l({action:a,location:w.location,delta:1})}function p(S,T){a=zt.Replace;let _=Oc(w.location,S,T);u=d();let E=qT(_,u),b=w.createHref(_);o.replaceState(E,"",b),s&&l&&l({action:a,location:w.location,delta:0})}function y(S){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof S=="string"?S:Xo(S);return _=_.replace(/ $/,"%20"),Be(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let w={get action(){return a},get location(){return t(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(WT,h),l=S,()=>{i.removeEventListener(WT,h),l=null}},createHref(S){return e(i,S)},createURL:y,encodeLocation(S){let T=y(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:p,go(S){return o.go(S)}};return w}var lt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lt||(lt={}));const _L=new Set(["lazy","caseSensitive","path","id","index","children"]);function vL(t){return t.index===!0}function Dc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Be(i.index!==!0||!i.children,"Cannot specify children on an index route"),Be(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),vL(i)){let l=At({},i,e(i),{id:a});return r[a]=l,l}else{let l=At({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Dc(i.children,e,o,r)),l}})}function Ao(t,e,n){return n===void 0&&(n="/"),zh(t,e,n,!1)}function zh(t,e,n,r){let i=typeof e=="string"?io(e):e,s=Yi(i.pathname||"/",n);if(s==null)return null;let o=Eb(t);EL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=NL(s);a=PL(o[l],u,r)}return a}function wL(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Eb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Be(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Bi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Be(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Eb(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:AL(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Tb(s.path))i(s,o,l)}),e}function Tb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Tb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function EL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TL=/^:[\w-]+$/,SL=3,IL=2,RL=1,CL=10,bL=-2,KT=t=>t==="*";function AL(t,e){let n=t.split("/"),r=n.length;return n.some(KT)&&(r+=bL),e&&(r+=IL),n.filter(i=>!KT(i)).reduce((i,s)=>i+(TL.test(s)?SL:s===""?RL:CL),r)}function xL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function PL(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Of({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Of({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Bi([s,h.pathname]),pathnameBase:LL(Bi([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Bi([s,h.pathnameBase]))}return o}function Of(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let w=a[h]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[h];return p&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function kL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Tl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function OL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?io(t):t;return{pathname:n?n.startsWith("/")?n:DL(n,e):e,search:ML(r),hash:FL(i)}}function DL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e0(t,e){let n=Sb(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=io(t):(i=At({},t),Be(!i.pathname||!i.pathname.includes("?"),fg("?","pathname","search",i)),Be(!i.pathname||!i.pathname.includes("#"),fg("#","pathname","hash",i)),Be(!i.search||!i.search.includes("#"),fg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=OL(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Bi=t=>t.join("/").replace(/\/\/+/g,"/"),LL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ML=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Df{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Mp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ib=["post","put","patch","delete"],VL=new Set(Ib),UL=["get",...Ib],jL=new Set(UL),$L=new Set([301,302,303,307,308]),BL=new Set([307,308]),pg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zL={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ru={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},n0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HL=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Rb="remix-router-transitions";function WL(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Be(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let M=t.detectErrorBoundary;i=V=>({hasErrorBoundary:M(V)})}else i=HL;let s={},o=Dc(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.unstable_dataStrategy||XL,d=t.unstable_patchRoutesOnNavigation,h=At({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,y=1e3,w=new Set,S=null,T=null,_=null,E=t.hydrationData!=null,b=Ao(o,t.history.location,l),O=null;if(b==null&&!d){let M=Un(404,{pathname:t.history.location.pathname}),{matches:V,route:B}=nS(o);b=V,O={[B.id]:M}}b&&!t.hydrationData&&jt(b,o,t.history.location.pathname).active&&(b=null);let F;if(b)if(b.some(M=>M.route.lazy))F=!1;else if(!b.some(M=>M.route.loader))F=!0;else if(h.v7_partialHydration){let M=t.hydrationData?t.hydrationData.loaderData:null,V=t.hydrationData?t.hydrationData.errors:null,B=X=>X.route.loader?typeof X.route.loader=="function"&&X.route.loader.hydrate===!0?!1:M&&M[X.route.id]!==void 0||V&&V[X.route.id]!==void 0:!0;if(V){let X=b.findIndex(de=>V[de.route.id]!==void 0);F=b.slice(0,X+1).every(B)}else F=b.every(B)}else F=t.hydrationData!=null;else if(F=!1,b=[],h.v7_partialHydration){let M=jt(null,o,t.history.location.pathname);M.active&&M.matches&&(b=M.matches)}let C,g={historyAction:t.history.action,location:t.history.location,matches:b,initialized:F,navigation:pg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},R=zt.Pop,A=!1,k,N=!1,P=new Map,re=null,be=!1,Re=!1,te=[],W=new Set,Q=new Map,ie=0,Pe=-1,q=new Map,J=new Set,ye=new Map,Te=new Map,pe=new Set,U=new Map,G=new Map,he=new Map,se;function fe(){if(f=t.history.listen(M=>{let{action:V,location:B,delta:X}=M;if(se){se(),se=void 0;return}Tl(G.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=Sa({currentLocation:g.location,nextLocation:B,historyAction:V});if(de&&X!=null){let Ae=new Promise(ke=>{se=ke});t.history.go(X*-1),ai(de,{state:"blocked",location:B,proceed(){ai(de,{state:"proceeding",proceed:void 0,reset:void 0,location:B}),Ae.then(()=>t.history.go(X))},reset(){let ke=new Map(g.blockers);ke.set(de,Ru),Oe({blockers:ke})}});return}return L(V,B)}),n){hM(e,P);let M=()=>fM(e,P);e.addEventListener("pagehide",M),re=()=>e.removeEventListener("pagehide",M)}return g.initialized||L(zt.Pop,g.location,{initialHydration:!0}),C}function Ve(){f&&f(),re&&re(),p.clear(),k&&k.abort(),g.fetchers.forEach((M,V)=>oi(V)),g.blockers.forEach((M,V)=>ou(V))}function ct(M){return p.add(M),()=>p.delete(M)}function Oe(M,V){V===void 0&&(V={}),g=At({},g,M);let B=[],X=[];h.v7_fetcherPersist&&g.fetchers.forEach((de,Ae)=>{de.state==="idle"&&(pe.has(Ae)?X.push(Ae):B.push(Ae))}),[...p].forEach(de=>de(g,{deletedFetchers:X,unstable_viewTransitionOpts:V.viewTransitionOpts,unstable_flushSync:V.flushSync===!0})),h.v7_fetcherPersist&&(B.forEach(de=>g.fetchers.delete(de)),X.forEach(de=>oi(de)))}function Mt(M,V,B){var X,de;let{flushSync:Ae}=B===void 0?{}:B,ke=g.actionData!=null&&g.navigation.formMethod!=null&&Hr(g.navigation.formMethod)&&g.navigation.state==="loading"&&((X=M.state)==null?void 0:X._isRedirect)!==!0,ae;V.actionData?Object.keys(V.actionData).length>0?ae=V.actionData:ae=null:ke?ae=g.actionData:ae=null;let Ce=V.loaderData?eS(g.loaderData,V.loaderData,V.matches||[],V.errors):g.loaderData,we=g.blockers;we.size>0&&(we=new Map(we),we.forEach((Ze,at)=>we.set(at,Ru)));let Ie=A===!0||g.navigation.formMethod!=null&&Hr(g.navigation.formMethod)&&((de=M.state)==null?void 0:de._isRedirect)!==!0;a&&(o=a,a=void 0),be||R===zt.Pop||(R===zt.Push?t.history.push(M,M.state):R===zt.Replace&&t.history.replace(M,M.state));let Ge;if(R===zt.Pop){let Ze=P.get(g.location.pathname);Ze&&Ze.has(M.pathname)?Ge={currentLocation:g.location,nextLocation:M}:P.has(M.pathname)&&(Ge={currentLocation:M,nextLocation:g.location})}else if(N){let Ze=P.get(g.location.pathname);Ze?Ze.add(M.pathname):(Ze=new Set([M.pathname]),P.set(g.location.pathname,Ze)),Ge={currentLocation:g.location,nextLocation:M}}Oe(At({},V,{actionData:ae,loaderData:Ce,historyAction:R,location:M,initialized:!0,navigation:pg,revalidation:"idle",restoreScrollPosition:lu(M,V.matches||g.matches),preventScrollReset:Ie,blockers:we}),{viewTransitionOpts:Ge,flushSync:Ae===!0}),R=zt.Pop,A=!1,N=!1,be=!1,Re=!1,te=[]}async function gn(M,V){if(typeof M=="number"){t.history.go(M);return}let B=Wy(g.location,g.matches,l,h.v7_prependBasename,M,h.v7_relativeSplatPath,V==null?void 0:V.fromRouteId,V==null?void 0:V.relative),{path:X,submission:de,error:Ae}=GT(h.v7_normalizeFormMethod,!1,B,V),ke=g.location,ae=Oc(g.location,X,V&&V.state);ae=At({},ae,t.history.encodeLocation(ae));let Ce=V&&V.replace!=null?V.replace:void 0,we=zt.Push;Ce===!0?we=zt.Replace:Ce===!1||de!=null&&Hr(de.formMethod)&&de.formAction===g.location.pathname+g.location.search&&(we=zt.Replace);let Ie=V&&"preventScrollReset"in V?V.preventScrollReset===!0:void 0,Ge=(V&&V.unstable_flushSync)===!0,Ze=Sa({currentLocation:ke,nextLocation:ae,historyAction:we});if(Ze){ai(Ze,{state:"blocked",location:ae,proceed(){ai(Ze,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),gn(M,V)},reset(){let at=new Map(g.blockers);at.set(Ze,Ru),Oe({blockers:at})}});return}return await L(we,ae,{submission:de,pendingError:Ae,preventScrollReset:Ie,replace:V&&V.replace,enableViewTransition:V&&V.unstable_viewTransition,flushSync:Ge})}function Nd(){if(as(),Oe({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){L(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}L(R||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation,enableViewTransition:N===!0})}}async function L(M,V,B){k&&k.abort(),k=null,R=M,be=(B&&B.startUninterruptedRevalidation)===!0,mo(g.location,g.matches),A=(B&&B.preventScrollReset)===!0,N=(B&&B.enableViewTransition)===!0;let X=a||o,de=B&&B.overrideNavigation,Ae=Ao(X,V,l),ke=(B&&B.flushSync)===!0,ae=jt(Ae,X,V.pathname);if(ae.active&&ae.matches&&(Ae=ae.matches),!Ae){let{error:He,notFoundMatches:$t,route:mt}=po(V.pathname);Mt(V,{matches:$t,loaderData:{},errors:{[mt.id]:He}},{flushSync:ke});return}if(g.initialized&&!Re&&rM(g.location,V)&&!(B&&B.submission&&Hr(B.submission.formMethod))){Mt(V,{matches:Ae},{flushSync:ke});return}k=new AbortController;let Ce=ka(t.history,V,k.signal,B&&B.submission),we;if(B&&B.pendingError)we=[Za(Ae).route.id,{type:lt.error,error:B.pendingError}];else if(B&&B.submission&&Hr(B.submission.formMethod)){let He=await $(Ce,V,B.submission,Ae,ae.active,{replace:B.replace,flushSync:ke});if(He.shortCircuited)return;if(He.pendingActionResult){let[$t,mt]=He.pendingActionResult;if(ur(mt)&&Mp(mt.error)&&mt.error.status===404){k=null,Mt(V,{matches:He.matches,loaderData:{},errors:{[$t]:mt.error}});return}}Ae=He.matches||Ae,we=He.pendingActionResult,de=mg(V,B.submission),ke=!1,ae.active=!1,Ce=ka(t.history,Ce.url,Ce.signal)}let{shortCircuited:Ie,matches:Ge,loaderData:Ze,errors:at}=await K(Ce,V,Ae,ae.active,de,B&&B.submission,B&&B.fetcherSubmission,B&&B.replace,B&&B.initialHydration===!0,ke,we);Ie||(k=null,Mt(V,At({matches:Ge||Ae},tS(we),{loaderData:Ze,errors:at})))}async function $(M,V,B,X,de,Ae){Ae===void 0&&(Ae={}),as();let ke=cM(V,B);if(Oe({navigation:ke},{flushSync:Ae.flushSync===!0}),de){let we=await go(X,V.pathname,M.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){let{boundaryId:Ie,error:Ge}=Sr(V.pathname,we);return{matches:we.partialMatches,pendingActionResult:[Ie,{type:lt.error,error:Ge}]}}else if(we.matches)X=we.matches;else{let{notFoundMatches:Ie,error:Ge,route:Ze}=po(V.pathname);return{matches:Ie,pendingActionResult:[Ze.id,{type:lt.error,error:Ge}]}}}let ae,Ce=$u(X,V);if(!Ce.route.action&&!Ce.route.lazy)ae={type:lt.error,error:Un(405,{method:M.method,pathname:V.pathname,routeId:Ce.route.id})};else if(ae=(await $e("action",g,M,[Ce],X,null))[Ce.route.id],M.signal.aborted)return{shortCircuited:!0};if(No(ae)){let we;return Ae&&Ae.replace!=null?we=Ae.replace:we=XT(ae.response.headers.get("Location"),new URL(M.url),l)===g.location.pathname+g.location.search,await Ue(M,ae,!0,{submission:B,replace:we}),{shortCircuited:!0}}if(As(ae))throw Un(400,{type:"defer-action"});if(ur(ae)){let we=Za(X,Ce.route.id);return(Ae&&Ae.replace)!==!0&&(R=zt.Push),{matches:X,pendingActionResult:[we.route.id,ae]}}return{matches:X,pendingActionResult:[Ce.route.id,ae]}}async function K(M,V,B,X,de,Ae,ke,ae,Ce,we,Ie){let Ge=de||mg(V,Ae),Ze=Ae||ke||iS(Ge),at=!be&&(!h.v7_partialHydration||!Ce);if(X){if(at){let ht=ue(Ie);Oe(At({navigation:Ge},ht!==void 0?{actionData:ht}:{}),{flushSync:we})}let Le=await go(B,V.pathname,M.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let{boundaryId:ht,error:_n}=Sr(V.pathname,Le);return{matches:Le.partialMatches,loaderData:{},errors:{[ht]:_n}}}else if(Le.matches)B=Le.matches;else{let{error:ht,notFoundMatches:_n,route:gt}=po(V.pathname);return{matches:_n,loaderData:{},errors:{[gt.id]:ht}}}}let He=a||o,[$t,mt]=QT(t.history,g,B,Ze,V,h.v7_partialHydration&&Ce===!0,h.v7_skipActionErrorRevalidation,Re,te,W,pe,ye,J,He,l,Ie);if(Ia(Le=>!(B&&B.some(ht=>ht.route.id===Le))||$t&&$t.some(ht=>ht.route.id===Le)),Pe=++ie,$t.length===0&&mt.length===0){let Le=Dd();return Mt(V,At({matches:B,loaderData:{},errors:Ie&&ur(Ie[1])?{[Ie[0]]:Ie[1].error}:null},tS(Ie),Le?{fetchers:new Map(g.fetchers)}:{}),{flushSync:we}),{shortCircuited:!0}}if(at){let Le={};if(!X){Le.navigation=Ge;let ht=ue(Ie);ht!==void 0&&(Le.actionData=ht)}mt.length>0&&(Le.fetchers=oe(mt)),Oe(Le,{flushSync:we})}mt.forEach(Le=>{Q.has(Le.key)&&Fn(Le.key),Le.controller&&Q.set(Le.key,Le.controller)});let us=()=>mt.forEach(Le=>Fn(Le.key));k&&k.signal.addEventListener("abort",us);let{loaderResults:or,fetcherResults:Ir}=await Dn(g,B,$t,mt,M);if(M.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",us),mt.forEach(Le=>Q.delete(Le.key));let yn=fh(or);if(yn)return await Ue(M,yn.result,!0,{replace:ae}),{shortCircuited:!0};if(yn=fh(Ir),yn)return J.add(yn.key),await Ue(M,yn.result,!0,{replace:ae}),{shortCircuited:!0};let{loaderData:cs,errors:Vr}=ZT(g,B,$t,or,Ie,mt,Ir,U);U.forEach((Le,ht)=>{Le.subscribe(_n=>{(_n||Le.done)&&U.delete(ht)})}),h.v7_partialHydration&&Ce&&g.errors&&Object.entries(g.errors).filter(Le=>{let[ht]=Le;return!$t.some(_n=>_n.route.id===ht)}).forEach(Le=>{let[ht,_n]=Le;Vr=Object.assign(Vr||{},{[ht]:_n})});let _o=Dd(),vo=Ta(Pe),wo=_o||vo||mt.length>0;return At({matches:B,loaderData:cs,errors:Vr},wo?{fetchers:new Map(g.fetchers)}:{})}function ue(M){if(M&&!ur(M[1]))return{[M[0]]:M[1].data};if(g.actionData)return Object.keys(g.actionData).length===0?null:g.actionData}function oe(M){return M.forEach(V=>{let B=g.fetchers.get(V.key),X=Cu(void 0,B?B.data:void 0);g.fetchers.set(V.key,X)}),new Map(g.fetchers)}function ne(M,V,B,X){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Q.has(M)&&Fn(M);let de=(X&&X.unstable_flushSync)===!0,Ae=a||o,ke=Wy(g.location,g.matches,l,h.v7_prependBasename,B,h.v7_relativeSplatPath,V,X==null?void 0:X.relative),ae=Ao(Ae,ke,l),Ce=jt(ae,Ae,ke);if(Ce.active&&Ce.matches&&(ae=Ce.matches),!ae){Mn(M,V,Un(404,{pathname:ke}),{flushSync:de});return}let{path:we,submission:Ie,error:Ge}=GT(h.v7_normalizeFormMethod,!0,ke,X);if(Ge){Mn(M,V,Ge,{flushSync:de});return}let Ze=$u(ae,we);if(A=(X&&X.preventScrollReset)===!0,Ie&&Hr(Ie.formMethod)){Se(M,V,we,Ze,ae,Ce.active,de,Ie);return}ye.set(M,{routeId:V,path:we}),Ke(M,V,we,Ze,ae,Ce.active,de,Ie)}async function Se(M,V,B,X,de,Ae,ke,ae){as(),ye.delete(M);function Ce(gt){if(!gt.route.action&&!gt.route.lazy){let Ur=Un(405,{method:ae.formMethod,pathname:B,routeId:V});return Mn(M,V,Ur,{flushSync:ke}),!0}return!1}if(!Ae&&Ce(X))return;let we=g.fetchers.get(M);Ln(M,dM(ae,we),{flushSync:ke});let Ie=new AbortController,Ge=ka(t.history,B,Ie.signal,ae);if(Ae){let gt=await go(de,B,Ge.signal);if(gt.type==="aborted")return;if(gt.type==="error"){let{error:Ur}=Sr(B,gt);Mn(M,V,Ur,{flushSync:ke});return}else if(gt.matches){if(de=gt.matches,X=$u(de,B),Ce(X))return}else{Mn(M,V,Un(404,{pathname:B}),{flushSync:ke});return}}Q.set(M,Ie);let Ze=ie,He=(await $e("action",g,Ge,[X],de,M))[X.route.id];if(Ge.signal.aborted){Q.get(M)===Ie&&Q.delete(M);return}if(h.v7_fetcherPersist&&pe.has(M)){if(No(He)||ur(He)){Ln(M,gs(void 0));return}}else{if(No(He))if(Q.delete(M),Pe>Ze){Ln(M,gs(void 0));return}else return J.add(M),Ln(M,Cu(ae)),Ue(Ge,He,!1,{fetcherSubmission:ae});if(ur(He)){Mn(M,V,He.error);return}}if(As(He))throw Un(400,{type:"defer-action"});let $t=g.navigation.location||g.location,mt=ka(t.history,$t,Ie.signal),us=a||o,or=g.navigation.state!=="idle"?Ao(us,g.navigation.location,l):g.matches;Be(or,"Didn't find any matches after fetcher action");let Ir=++ie;q.set(M,Ir);let yn=Cu(ae,He.data);g.fetchers.set(M,yn);let[cs,Vr]=QT(t.history,g,or,ae,$t,!1,h.v7_skipActionErrorRevalidation,Re,te,W,pe,ye,J,us,l,[X.route.id,He]);Vr.filter(gt=>gt.key!==M).forEach(gt=>{let Ur=gt.key,Md=g.fetchers.get(Ur),Fd=Cu(void 0,Md?Md.data:void 0);g.fetchers.set(Ur,Fd),Q.has(Ur)&&Fn(Ur),gt.controller&&Q.set(Ur,gt.controller)}),Oe({fetchers:new Map(g.fetchers)});let _o=()=>Vr.forEach(gt=>Fn(gt.key));Ie.signal.addEventListener("abort",_o);let{loaderResults:vo,fetcherResults:wo}=await Dn(g,or,cs,Vr,mt);if(Ie.signal.aborted)return;Ie.signal.removeEventListener("abort",_o),q.delete(M),Q.delete(M),Vr.forEach(gt=>Q.delete(gt.key));let Le=fh(vo);if(Le)return Ue(mt,Le.result,!1);if(Le=fh(wo),Le)return J.add(Le.key),Ue(mt,Le.result,!1);let{loaderData:ht,errors:_n}=ZT(g,or,cs,vo,void 0,Vr,wo,U);if(g.fetchers.has(M)){let gt=gs(He.data);g.fetchers.set(M,gt)}Ta(Ir),g.navigation.state==="loading"&&Ir>Pe?(Be(R,"Expected pending action"),k&&k.abort(),Mt(g.navigation.location,{matches:or,loaderData:ht,errors:_n,fetchers:new Map(g.fetchers)})):(Oe({errors:_n,loaderData:eS(g.loaderData,ht,or,_n),fetchers:new Map(g.fetchers)}),Re=!1)}async function Ke(M,V,B,X,de,Ae,ke,ae){let Ce=g.fetchers.get(M);Ln(M,Cu(ae,Ce?Ce.data:void 0),{flushSync:ke});let we=new AbortController,Ie=ka(t.history,B,we.signal);if(Ae){let He=await go(de,B,Ie.signal);if(He.type==="aborted")return;if(He.type==="error"){let{error:$t}=Sr(B,He);Mn(M,V,$t,{flushSync:ke});return}else if(He.matches)de=He.matches,X=$u(de,B);else{Mn(M,V,Un(404,{pathname:B}),{flushSync:ke});return}}Q.set(M,we);let Ge=ie,at=(await $e("loader",g,Ie,[X],de,M))[X.route.id];if(As(at)&&(at=await r0(at,Ie.signal,!0)||at),Q.get(M)===we&&Q.delete(M),!Ie.signal.aborted){if(pe.has(M)){Ln(M,gs(void 0));return}if(No(at))if(Pe>Ge){Ln(M,gs(void 0));return}else{J.add(M),await Ue(Ie,at,!1);return}if(ur(at)){Mn(M,V,at.error);return}Be(!As(at),"Unhandled fetcher deferred data"),Ln(M,gs(at.data))}}async function Ue(M,V,B,X){let{submission:de,fetcherSubmission:Ae,replace:ke}=X===void 0?{}:X;V.response.headers.has("X-Remix-Revalidate")&&(Re=!0);let ae=V.response.headers.get("Location");Be(ae,"Expected a Location header on the redirect Response"),ae=XT(ae,new URL(M.url),l);let Ce=Oc(g.location,ae,{_isRedirect:!0});if(n){let He=!1;if(V.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(n0.test(ae)){const $t=t.history.createURL(ae);He=$t.origin!==e.location.origin||Yi($t.pathname,l)==null}if(He){ke?e.location.replace(ae):e.location.assign(ae);return}}k=null;let we=ke===!0||V.response.headers.has("X-Remix-Replace")?zt.Replace:zt.Push,{formMethod:Ie,formAction:Ge,formEncType:Ze}=g.navigation;!de&&!Ae&&Ie&&Ge&&Ze&&(de=iS(g.navigation));let at=de||Ae;if(BL.has(V.response.status)&&at&&Hr(at.formMethod))await L(we,Ce,{submission:At({},at,{formAction:ae}),preventScrollReset:A,enableViewTransition:B?N:void 0});else{let He=mg(Ce,de);await L(we,Ce,{overrideNavigation:He,fetcherSubmission:Ae,preventScrollReset:A,enableViewTransition:B?N:void 0})}}async function $e(M,V,B,X,de,Ae){let ke,ae={};try{ke=await JL(u,M,V,B,X,de,Ae,s,i)}catch(Ce){return X.forEach(we=>{ae[we.route.id]={type:lt.error,error:Ce}}),ae}for(let[Ce,we]of Object.entries(ke))if(sM(we)){let Ie=we.result;ae[Ce]={type:lt.redirect,response:tM(Ie,B,Ce,de,l,h.v7_relativeSplatPath)}}else ae[Ce]=await eM(we);return ae}async function Dn(M,V,B,X,de){let Ae=M.matches,ke=$e("loader",M,de,B,V,null),ae=Promise.all(X.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.controller){let Ze=(await $e("loader",M,ka(t.history,Ie.path,Ie.controller.signal),[Ie.match],Ie.matches,Ie.key))[Ie.match.route.id];return{[Ie.key]:Ze}}else return Promise.resolve({[Ie.key]:{type:lt.error,error:Un(404,{pathname:Ie.path})}})})),Ce=await ke,we=(await ae).reduce((Ie,Ge)=>Object.assign(Ie,Ge),{});return await Promise.all([lM(V,Ce,de.signal,Ae,M.loaderData),uM(V,we,X)]),{loaderResults:Ce,fetcherResults:we}}function as(){Re=!0,te.push(...Ia()),ye.forEach((M,V)=>{Q.has(V)&&(W.add(V),Fn(V))})}function Ln(M,V,B){B===void 0&&(B={}),g.fetchers.set(M,V),Oe({fetchers:new Map(g.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function Mn(M,V,B,X){X===void 0&&(X={});let de=Za(g.matches,V);oi(M),Oe({errors:{[de.route.id]:B},fetchers:new Map(g.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function si(M){return h.v7_fetcherPersist&&(Te.set(M,(Te.get(M)||0)+1),pe.has(M)&&pe.delete(M)),g.fetchers.get(M)||zL}function oi(M){let V=g.fetchers.get(M);Q.has(M)&&!(V&&V.state==="loading"&&q.has(M))&&Fn(M),ye.delete(M),q.delete(M),J.delete(M),pe.delete(M),W.delete(M),g.fetchers.delete(M)}function Ea(M){if(h.v7_fetcherPersist){let V=(Te.get(M)||0)-1;V<=0?(Te.delete(M),pe.add(M)):Te.set(M,V)}else oi(M);Oe({fetchers:new Map(g.fetchers)})}function Fn(M){let V=Q.get(M);Be(V,"Expected fetch controller: "+M),V.abort(),Q.delete(M)}function Od(M){for(let V of M){let B=si(V),X=gs(B.data);g.fetchers.set(V,X)}}function Dd(){let M=[],V=!1;for(let B of J){let X=g.fetchers.get(B);Be(X,"Expected fetcher: "+B),X.state==="loading"&&(J.delete(B),M.push(B),V=!0)}return Od(M),V}function Ta(M){let V=[];for(let[B,X]of q)if(X<M){let de=g.fetchers.get(B);Be(de,"Expected fetcher: "+B),de.state==="loading"&&(Fn(B),q.delete(B),V.push(B))}return Od(V),V.length>0}function Ld(M,V){let B=g.blockers.get(M)||Ru;return G.get(M)!==V&&G.set(M,V),B}function ou(M){g.blockers.delete(M),G.delete(M)}function ai(M,V){let B=g.blockers.get(M)||Ru;Be(B.state==="unblocked"&&V.state==="blocked"||B.state==="blocked"&&V.state==="blocked"||B.state==="blocked"&&V.state==="proceeding"||B.state==="blocked"&&V.state==="unblocked"||B.state==="proceeding"&&V.state==="unblocked","Invalid blocker state transition: "+B.state+" -> "+V.state);let X=new Map(g.blockers);X.set(M,V),Oe({blockers:X})}function Sa(M){let{currentLocation:V,nextLocation:B,historyAction:X}=M;if(G.size===0)return;G.size>1&&Tl(!1,"A router only supports one blocker at a time");let de=Array.from(G.entries()),[Ae,ke]=de[de.length-1],ae=g.blockers.get(Ae);if(!(ae&&ae.state==="proceeding")&&ke({currentLocation:V,nextLocation:B,historyAction:X}))return Ae}function po(M){let V=Un(404,{pathname:M}),B=a||o,{matches:X,route:de}=nS(B);return Ia(),{notFoundMatches:X,route:de,error:V}}function Sr(M,V){return{boundaryId:Za(V.partialMatches).route.id,error:Un(400,{type:"route-discovery",pathname:M,message:V.error!=null&&"message"in V.error?V.error:String(V.error)})}}function Ia(M){let V=[];return U.forEach((B,X)=>{(!M||M(X))&&(B.cancel(),V.push(X),U.delete(X))}),V}function Ra(M,V,B){if(S=M,_=V,T=B||null,!E&&g.navigation===pg){E=!0;let X=lu(g.location,g.matches);X!=null&&Oe({restoreScrollPosition:X})}return()=>{S=null,_=null,T=null}}function au(M,V){return T&&T(M,V.map(X=>wL(X,g.loaderData)))||M.key}function mo(M,V){if(S&&_){let B=au(M,V);S[B]=_()}}function lu(M,V){if(S){let B=au(M,V),X=S[B];if(typeof X=="number")return X}return null}function jt(M,V,B){if(d){if(w.has(B))return{active:!1,matches:M};if(M){if(Object.keys(M[0].params).length>0)return{active:!0,matches:zh(V,B,l,!0)}}else return{active:!0,matches:zh(V,B,l,!0)||[]}}return{active:!1,matches:null}}async function go(M,V,B){let X=M;for(;;){let de=a==null,Ae=a||o;try{await QL(d,V,X,Ae,s,i,he,B)}catch(Ce){return{type:"error",error:Ce,partialMatches:X}}finally{de&&(o=[...o])}if(B.aborted)return{type:"aborted"};let ke=Ao(Ae,V,l);if(ke)return ls(V,w),{type:"success",matches:ke};let ae=zh(Ae,V,l,!0);if(!ae||X.length===ae.length&&X.every((Ce,we)=>Ce.route.id===ae[we].route.id))return ls(V,w),{type:"success",matches:null};X=ae}}function ls(M,V){if(V.size>=y){let B=V.values().next().value;V.delete(B)}V.add(M)}function yo(M){s={},a=Dc(M,i,void 0,s)}function Nm(M,V){let B=a==null;bb(M,V,a||o,s,i),B&&(o=[...o],Oe({}))}return C={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:fe,subscribe:ct,enableScrollRestoration:Ra,navigate:gn,fetch:ne,revalidate:Nd,createHref:M=>t.history.createHref(M),encodeLocation:M=>t.history.encodeLocation(M),getFetcher:si,deleteFetcher:Ea,dispose:Ve,getBlocker:Ld,deleteBlocker:ou,patchRoutes:Nm,_internalFetchControllers:Q,_internalActiveDeferreds:U,_internalSetRoutes:yo},C}function qL(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Wy(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){u=h;break}}else l=e,u=e[e.length-1];let d=t0(i||".",e0(l,s),Yi(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&u&&u.route.index&&!i0(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Bi([n,d.pathname])),Xo(d)}function GT(t,e,n,r){if(!r||!qL(r))return{path:n};if(r.formMethod&&!aM(r.formMethod))return{path:n,error:Un(405,{method:r.formMethod})};let i=()=>({path:n,error:Un(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=Ab(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Hr(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,y)=>{let[w,S]=y;return""+p+w+"="+S+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Hr(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Be(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=qy(r.formData),u=r.formData;else if(r.body instanceof FormData)l=qy(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=JT(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=JT(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Hr(d.formMethod))return{path:n,submission:d};let h=io(n);return e&&h.search&&i0(h.search)&&l.append("index",""),h.search="?"+l,{path:Xo(h),submission:d}}function KL(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function QT(t,e,n,r,i,s,o,a,l,u,d,h,f,p,y,w){let S=w?ur(w[1])?w[1].error:w[1].data:void 0,T=t.createURL(e.location),_=t.createURL(i),E=w&&ur(w[1])?w[0]:void 0,b=E?KL(n,E):n,O=w?w[1].statusCode:void 0,F=o&&O&&O>=400,C=b.filter((R,A)=>{let{route:k}=R;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(GL(e.loaderData,e.matches[A],R)||l.some(re=>re===R.route.id))return!0;let N=e.matches[A],P=R;return YT(R,At({currentUrl:T,currentParams:N.params,nextUrl:_,nextParams:P.params},r,{actionResult:S,actionStatus:O,defaultShouldRevalidate:F?!1:a||T.pathname+T.search===_.pathname+_.search||T.search!==_.search||Cb(N,P)}))}),g=[];return h.forEach((R,A)=>{if(s||!n.some(be=>be.route.id===R.routeId)||d.has(A))return;let k=Ao(p,R.path,y);if(!k){g.push({key:A,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(A),P=$u(k,R.path),re=!1;f.has(A)?re=!1:u.has(A)?(u.delete(A),re=!0):N&&N.state!=="idle"&&N.data===void 0?re=a:re=YT(P,At({currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:S,actionStatus:O,defaultShouldRevalidate:F?!1:a})),re&&g.push({key:A,routeId:R.routeId,path:R.path,matches:k,match:P,controller:new AbortController})}),[C,g]}function GL(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Cb(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function YT(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function QL(t,e,n,r,i,s,o,a){let l=[e,...n.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=t({path:e,matches:n,patch:(d,h)=>{a.aborted||bb(d,h,r,i,s)}}),o.set(l,u)),u&&iM(u)&&await u}finally{o.delete(l)}}function bb(t,e,n,r,i){if(t){var s;let o=r[t];Be(o,"No route found to patch children into: routeId = "+t);let a=Dc(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Dc(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function YL(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Be(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Tl(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!_L.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,At({},e(i),{lazy:void 0}))}async function XL(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function JL(t,e,n,r,i,s,o,a,l,u){let d=s.map(p=>p.route.lazy?YL(p.route,l,a):void 0),h=s.map((p,y)=>{let w=d[y],S=i.some(_=>_.route.id===p.route.id);return At({},p,{shouldLoad:S,resolve:async _=>(_&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(S=!0),S?ZL(e,r,p,w,_,u):Promise.resolve({type:lt.data,result:void 0}))})}),f=await t({matches:h,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(d)}catch{}return f}async function ZL(t,e,n,r,i,s){let o,a,l=u=>{let d,h=new Promise((y,w)=>d=w);a=()=>d(),e.signal.addEventListener("abort",a);let f=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(w=>f(w)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,h])};try{let u=n.route[t];if(r)if(u){let d,[h]=await Promise.all([l(u).catch(f=>{d=f}),r]);if(d!==void 0)throw d;o=h}else if(await r,u=n.route[t],u)o=await l(u);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw Un(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:lt.data,result:void 0};else if(u)o=await l(u);else{let d=new URL(e.url),h=d.pathname+d.search;throw Un(404,{pathname:h})}Be(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:lt.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function eM(t){let{result:e,type:n}=t;if(xb(e)){let u;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(d){return{type:lt.error,error:d}}return n===lt.error?{type:lt.error,error:new Df(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:lt.data,data:u,statusCode:e.status,headers:e.headers}}if(n===lt.error){if(rS(e)){var r;if(e.data instanceof Error){var i;return{type:lt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new Df(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:lt.error,error:e,statusCode:Mp(e)?e.status:void 0}}if(oM(e)){var s,o;return{type:lt.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(rS(e)){var a,l;return{type:lt.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:lt.data,data:e}}function tM(t,e,n,r,i,s){let o=t.headers.get("Location");if(Be(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!n0.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Wy(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function XT(t,e,n){if(n0.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Yi(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ka(t,e,n,r){let i=t.createURL(Ab(e)).toString(),s={signal:n};if(r&&Hr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=qy(r.formData):s.body=r.formData}return new Request(i,s)}function qy(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function JT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function nM(t,e,n,r,i){let s={},o=null,a,l=!1,u={},d=n&&ur(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let f=h.route.id,p=e[f];if(Be(!No(p),"Cannot handle redirect results in processLoaderData"),ur(p)){let y=p.error;d!==void 0&&(y=d,d=void 0),o=o||{};{let w=Za(t,f);o[w.route.id]==null&&(o[w.route.id]=y)}s[f]=void 0,l||(l=!0,a=Mp(p.error)?p.error.status:500),p.headers&&(u[f]=p.headers)}else As(p)?(r.set(f,p.deferredData),s[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(u[f]=p.headers)):(s[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(u[f]=p.headers))}),d!==void 0&&n&&(o={[n[0]]:d},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function ZT(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=nM(e,r,i,a);return s.forEach(d=>{let{key:h,match:f,controller:p}=d,y=o[h];if(Be(y,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(ur(y)){let w=Za(t.matches,f==null?void 0:f.route.id);u&&u[w.route.id]||(u=At({},u,{[w.route.id]:y.error})),t.fetchers.delete(h)}else if(No(y))Be(!1,"Unhandled fetcher revalidation redirect");else if(As(y))Be(!1,"Unhandled fetcher deferred data");else{let w=gs(y.data);t.fetchers.set(h,w)}}),{loaderData:l,errors:u}}function eS(t,e,n,r){let i=At({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function tS(t){return t?ur(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Za(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function nS(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Un(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Df(t||500,a,new Error(l),!0)}function fh(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(No(i))return{key:r,result:i}}}function Ab(t){let e=typeof t=="string"?io(t):t;return Xo(At({},e,{hash:""}))}function rM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function iM(t){return typeof t=="object"&&t!=null&&"then"in t}function sM(t){return xb(t.result)&&$L.has(t.result.status)}function As(t){return t.type===lt.deferred}function ur(t){return t.type===lt.error}function No(t){return(t&&t.type)===lt.redirect}function rS(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function oM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function xb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function aM(t){return jL.has(t.toLowerCase())}function Hr(t){return VL.has(t.toLowerCase())}async function lM(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],u=t.find(f=>(f==null?void 0:f.route.id)===a);if(!u)continue;let d=r.find(f=>f.route.id===u.route.id),h=d!=null&&!Cb(d,u)&&(i&&i[u.route.id])!==void 0;As(l)&&h&&await r0(l,n,!1).then(f=>{f&&(e[a]=f)})}}async function uM(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&As(a)&&(Be(o,"Expected an AbortController for revalidating fetcher deferred result"),await r0(a,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function r0(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:lt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:lt.error,error:i}}return{type:lt.data,data:t.deferredData.data}}}function i0(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function $u(t,e){let n=typeof e=="string"?io(e).search:e.search;if(t[t.length-1].route.index&&i0(n||""))return t[t.length-1];let r=Sb(t);return r[r.length-1]}function iS(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function mg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function cM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Cu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function dM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function gs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function hM(t,e){try{let n=t.sessionStorage.getItem(Rb);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function fM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Rb,JSON.stringify(n))}catch(r){Tl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(this,arguments)}const sd=I.createContext(null),s0=I.createContext(null),so=I.createContext(null),o0=I.createContext(null),oo=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Pb=I.createContext(null);function pM(t,e){let{relative:n}=e===void 0?{}:e;od()||Be(!1);let{basename:r,navigator:i}=I.useContext(so),{hash:s,pathname:o,search:a}=Fp(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Bi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function od(){return I.useContext(o0)!=null}function Bl(){return od()||Be(!1),I.useContext(o0).location}function kb(t){I.useContext(so).static||I.useLayoutEffect(t)}function pa(){let{isDataRoute:t}=I.useContext(oo);return t?bM():mM()}function mM(){od()||Be(!1);let t=I.useContext(sd),{basename:e,future:n,navigator:r}=I.useContext(so),{matches:i}=I.useContext(oo),{pathname:s}=Bl(),o=JSON.stringify(e0(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return kb(()=>{a.current=!0}),I.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=t0(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function gM(){let{matches:t}=I.useContext(oo),e=t[t.length-1];return e?e.params:{}}function Fp(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(so),{matches:i}=I.useContext(oo),{pathname:s}=Bl(),o=JSON.stringify(e0(i,r.v7_relativeSplatPath));return I.useMemo(()=>t0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function yM(t,e,n,r){od()||Be(!1);let{navigator:i}=I.useContext(so),{matches:s}=I.useContext(oo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Bl(),d;d=u;let h=d.pathname||"/",f=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=Ao(t,{pathname:f});return TM(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Bi([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Bi([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r)}function _M(){let t=CM(),e=Mp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const vM=I.createElement(_M,null);class wM extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(oo.Provider,{value:this.props.routeContext},I.createElement(Pb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EM(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(sd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(oo.Provider,{value:e},r)}function TM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Be(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,y=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,y=!1,w=null,S=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||vM,l&&(u<0&&f===0?(AM("route-fallback"),y=!0,S=null):u===f&&(y=!0,S=h.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),_=()=>{let E;return p?E=w:y?E=S:h.route.Component?E=I.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,I.createElement(EM,{match:h,routeContext:{outlet:d,matches:T,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?I.createElement(wM,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var Nb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Nb||{}),Mf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mf||{});function SM(t){let e=I.useContext(sd);return e||Be(!1),e}function IM(t){let e=I.useContext(s0);return e||Be(!1),e}function RM(t){let e=I.useContext(oo);return e||Be(!1),e}function Ob(t){let e=RM(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function CM(){var t;let e=I.useContext(Pb),n=IM(Mf.UseRouteError),r=Ob(Mf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function bM(){let{router:t}=SM(Nb.UseNavigateStable),e=Ob(Mf.UseNavigateStable),n=I.useRef(!1);return kb(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lf({fromRouteId:e},s)))},[t,e])}const sS={};function AM(t,e,n){sS[t]||(sS[t]=!0)}function xM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=zt.Pop,navigator:s,static:o=!1,future:a}=t;od()&&Be(!1);let l=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:Lf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=io(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=r,w=I.useMemo(()=>{let S=Yi(d,l);return S==null?null:{location:{pathname:S,search:h,hash:f,state:p,key:y},navigationType:i}},[l,d,h,f,p,y,i]);return w==null?null:I.createElement(so.Provider,{value:u},I.createElement(o0.Provider,{children:n,value:w}))}new Promise(()=>{});function PM(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:I.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:I.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:I.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}function Db(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NM(t,e){return t.button===0&&(!e||e==="_self")&&!kM(t)}const OM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],DM=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],LM="6";try{window.__reactRouterVersion=LM}catch{}function MM(t,e){return WL({basename:void 0,future:Sl({},void 0,{v7_prependBasename:!0}),history:mL({window:void 0}),hydrationData:FM(),routes:t,mapRouteProperties:PM,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function FM(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Sl({},e,{errors:VM(e.errors)})),e}function VM(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Df(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const Lb=I.createContext({isTransitioning:!1}),UM=I.createContext(new Map),jM="startTransition",oS=rf[jM],$M="flushSync",aS=G2[$M];function BM(t){oS?oS(t):t()}function bu(t){aS?aS(t):t()}let zM=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function HM(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=I.useState(n.state),[o,a]=I.useState(),[l,u]=I.useState({isTransitioning:!1}),[d,h]=I.useState(),[f,p]=I.useState(),[y,w]=I.useState(),S=I.useRef(new Map),{v7_startTransition:T}=r||{},_=I.useCallback(g=>{T?BM(g):g()},[T]),E=I.useCallback((g,R)=>{let{deletedFetchers:A,unstable_flushSync:k,unstable_viewTransitionOpts:N}=R;A.forEach(re=>S.current.delete(re)),g.fetchers.forEach((re,be)=>{re.data!==void 0&&S.current.set(be,re.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||P){k?bu(()=>s(g)):_(()=>s(g));return}if(k){bu(()=>{f&&(d&&d.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let re=n.window.document.startViewTransition(()=>{bu(()=>s(g))});re.finished.finally(()=>{bu(()=>{h(void 0),p(void 0),a(void 0),u({isTransitioning:!1})})}),bu(()=>p(re));return}f?(d&&d.resolve(),f.skipTransition(),w({state:g,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(a(g),u({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,f,d,S,_]);I.useLayoutEffect(()=>n.subscribe(E),[n,E]),I.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new zM)},[l]),I.useEffect(()=>{if(d&&o&&n.window){let g=o,R=d.promise,A=n.window.document.startViewTransition(async()=>{_(()=>s(g)),await R});A.finished.finally(()=>{h(void 0),p(void 0),a(void 0),u({isTransitioning:!1})}),p(A)}},[_,o,d,n.window]),I.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,f,i.location,o]),I.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),u({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),w(void 0))},[l.isTransitioning,y]),I.useEffect(()=>{},[]);let b=I.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,R,A)=>n.navigate(g,{state:R,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(g,R,A)=>n.navigate(g,{replace:!0,state:R,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[n]),O=n.basename||"/",F=I.useMemo(()=>({router:n,navigator:b,static:!1,basename:O}),[n,b,O]),C=I.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return I.createElement(I.Fragment,null,I.createElement(sd.Provider,{value:F},I.createElement(s0.Provider,{value:i},I.createElement(UM.Provider,{value:S.current},I.createElement(Lb.Provider,{value:l},I.createElement(xM,{basename:O,location:i.location,navigationType:i.historyAction,navigator:b,future:C},i.initialized||n.future.v7_partialHydration?I.createElement(WM,{routes:n.routes,future:n.future,state:i}):e))))),null)}const WM=I.memo(qM);function qM(t){let{routes:e,future:n,state:r}=t;return yM(e,void 0,r,n)}const KM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QM=I.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,f=Db(e,OM),{basename:p}=I.useContext(so),y,w=!1;if(typeof u=="string"&&GM.test(u)&&(y=u,KM))try{let E=new URL(window.location.href),b=u.startsWith("//")?new URL(E.protocol+u):new URL(u),O=Yi(b.pathname,p);b.origin===E.origin&&O!=null?u=O+b.search+b.hash:w=!0}catch{}let S=pM(u,{relative:i}),T=XM(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:h});function _(E){r&&r(E),E.defaultPrevented||T(E)}return I.createElement("a",Sl({},f,{href:y||S,onClick:w||s?r:_,ref:n,target:l}))}),fi=I.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:d}=e,h=Db(e,DM),f=Fp(l,{relative:h.relative}),p=Bl(),y=I.useContext(s0),{navigator:w,basename:S}=I.useContext(so),T=y!=null&&JM(f)&&u===!0,_=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,E=p.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),b=b?b.toLowerCase():null,_=_.toLowerCase()),b&&S&&(b=Yi(b,S)||b);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let F=E===_||!o&&E.startsWith(_)&&E.charAt(O)==="/",C=b!=null&&(b===_||!o&&b.startsWith(_)&&b.charAt(_.length)==="/"),g={isActive:F,isPending:C,isTransitioning:T},R=F?r:void 0,A;typeof s=="function"?A=s(g):A=[s,F?"active":null,C?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(g):a;return I.createElement(QM,Sl({},h,{"aria-current":R,className:A,ref:n,style:k,to:l,unstable_viewTransition:u}),typeof d=="function"?d(g):d)});var Ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ky||(Ky={}));var lS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lS||(lS={}));function YM(t){let e=I.useContext(sd);return e||Be(!1),e}function XM(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=pa(),u=Bl(),d=Fp(t,{relative:o});return I.useCallback(h=>{if(NM(h,n)){h.preventDefault();let f=r!==void 0?r:Xo(u)===Xo(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function JM(t,e){e===void 0&&(e={});let n=I.useContext(Lb);n==null&&Be(!1);let{basename:r}=YM(Ky.useViewTransitionState),i=Fp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Of(i.pathname,o)!=null||Of(i.pathname,s)!=null}var uS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(t,e){if(!t)throw zl(e)},zl=function(t){return new Error("Firebase Database ("+Mb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},a0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new eF;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vb=function(t){const e=Fb(t);return a0.encodeByteArray(e,!0)},Ff=function(t){return Vb(t).replace(/\./g,"")},Vf=function(t){try{return a0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){return Ub(void 0,t)}function Ub(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!nF(n)||(t[n]=Ub(t[n],e[n]));return t}function nF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=()=>rF().__FIREBASE_DEFAULTS__,sF=()=>{if(typeof process>"u"||typeof uS>"u")return;const t=uS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vf(t[1]);return e&&JSON.parse(e)},Vp=()=>{try{return iF()||sF()||oF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jb=t=>{var e,n;return(n=(e=Vp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$b=t=>{const e=jb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bb=()=>{var t;return(t=Vp())===null||t===void 0?void 0:t.config},zb=t=>{var e;return(e=Vp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ff(JSON.stringify(n)),Ff(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function aF(){var t;const e=(t=Vp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cF(){const t=On();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qb(){return Mb.NODE_ADMIN===!0}function dF(){return!aF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hF(){try{return typeof indexedDB=="object"}catch{return!1}}function fF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="FirebaseError";class Ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pF,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ii(i,a,r)}}function mF(t,e){return t.replace(gF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){return JSON.parse(t)}function cn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Lc(Vf(s[0])||""),n=Lc(Vf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},yF=function(t){const e=Kb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},_F=function(t){const e=Kb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Il(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Gy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(cS(s)&&cS(o)){if(!Mc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function cS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),d=1518500249):(u=s^o^a,d=1859775393):h<60?(u=s&o|a&(s|o),d=2400959708):(u=s^o^a,d=3395469782);const f=(i<<5|i>>>27)+u+l+d+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function wF(t,e){const n=new EF(t,e);return n.subscribe.bind(n)}class EF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gg),i.error===void 0&&(i.error=gg),i.complete===void 0&&(i.complete=gg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gg(){}function SF(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ce(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Up=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new l0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bF(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CF(t){return t===Co?void 0:t}function bF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const xF={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},PF=We.INFO,kF={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},NF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jp{constructor(e){this.name=e,this._logLevel=PF,this._logHandler=NF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const OF=(t,e)=>e.some(n=>t instanceof n);let dS,hS;function DF(){return dS||(dS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LF(){return hS||(hS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gb=new WeakMap,Qy=new WeakMap,Qb=new WeakMap,yg=new WeakMap,c0=new WeakMap;function MF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),c0.set(e,t),e}function FF(t){if(Qy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qy.set(t,e)}let Yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VF(t){Yy=t(Yy)}function UF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_g(this),e,...n);return Qb.set(r,e.sort?e.sort():[e]),Us(r)}:LF().includes(t)?function(...e){return t.apply(_g(this),e),Us(Gb.get(this))}:function(...e){return Us(t.apply(_g(this),e))}}function jF(t){return typeof t=="function"?UF(t):(t instanceof IDBTransaction&&FF(t),OF(t,DF())?new Proxy(t,Yy):t)}function Us(t){if(t instanceof IDBRequest)return MF(t);if(yg.has(t))return yg.get(t);const e=jF(t);return e!==t&&(yg.set(t,e),c0.set(e,t)),e}const _g=t=>c0.get(t);function $F(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Us(o.result),l.oldVersion,l.newVersion,Us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const BF=["get","getKey","getAll","getAllKeys","count"],zF=["put","add","delete","clear"],vg=new Map;function fS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=zF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BF.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return vg.set(e,s),s}VF(t=>({...t,get:(e,n,r)=>fS(e,n)||t.get(e,n,r),has:(e,n)=>!!fS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xy="@firebase/app",pS="0.10.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new jp("@firebase/app"),qF="@firebase/app-compat",KF="@firebase/analytics-compat",GF="@firebase/analytics",QF="@firebase/app-check-compat",YF="@firebase/app-check",XF="@firebase/auth",JF="@firebase/auth-compat",ZF="@firebase/database",eV="@firebase/data-connect",tV="@firebase/database-compat",nV="@firebase/functions",rV="@firebase/functions-compat",iV="@firebase/installations",sV="@firebase/installations-compat",oV="@firebase/messaging",aV="@firebase/messaging-compat",lV="@firebase/performance",uV="@firebase/performance-compat",cV="@firebase/remote-config",dV="@firebase/remote-config-compat",hV="@firebase/storage",fV="@firebase/storage-compat",pV="@firebase/firestore",mV="@firebase/vertexai-preview",gV="@firebase/firestore-compat",yV="firebase",_V="10.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="[DEFAULT]",vV={[Xy]:"fire-core",[qF]:"fire-core-compat",[GF]:"fire-analytics",[KF]:"fire-analytics-compat",[YF]:"fire-app-check",[QF]:"fire-app-check-compat",[XF]:"fire-auth",[JF]:"fire-auth-compat",[ZF]:"fire-rtdb",[eV]:"fire-data-connect",[tV]:"fire-rtdb-compat",[nV]:"fire-fn",[rV]:"fire-fn-compat",[iV]:"fire-iid",[sV]:"fire-iid-compat",[oV]:"fire-fcm",[aV]:"fire-fcm-compat",[lV]:"fire-perf",[uV]:"fire-perf-compat",[cV]:"fire-rc",[dV]:"fire-rc-compat",[hV]:"fire-gcs",[fV]:"fire-gcs-compat",[pV]:"fire-fst",[gV]:"fire-fst-compat",[mV]:"fire-vertex","fire-js":"fire-js",[yV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,wV=new Map,Zy=new Map;function mS(t,e){try{t.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(Zy.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of jf.values())mS(n,t);for(const n of wV.values())mS(n,t);return!0}function $p(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new ad("app","Firebase",EV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=_V;function Yb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw js.create("bad-app-name",{appName:String(i)});if(n||(n=Bb()),!n)throw js.create("no-options");const s=jf.get(i);if(s){if(Mc(n,s.options)&&Mc(r,s.config))return s;throw js.create("duplicate-app",{appName:i})}const o=new AF(i);for(const l of Zy.values())o.addComponent(l);const a=new TV(n,r,o);return jf.set(i,a),a}function d0(t=Jy){const e=jf.get(t);if(!e&&t===Jy&&Bb())return Yb();if(!e)throw js.create("no-app",{appName:t});return e}function Nr(t,e,n){var r;let i=(r=vV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(a.join(" "));return}Ks(new Xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firebase-heartbeat-database",IV=1,Fc="firebase-heartbeat-store";let wg=null;function Xb(){return wg||(wg=$F(SV,IV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw js.create("idb-open",{originalErrorMessage:t.message})})),wg}async function RV(t){try{const n=(await Xb()).transaction(Fc),r=await n.objectStore(Fc).get(Jb(t));return await n.done,r}catch(e){if(e instanceof Ii)Ji.warn(e.message);else{const n=js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(n.message)}}}async function gS(t,e){try{const r=(await Xb()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,Jb(t)),await r.done}catch(n){if(n instanceof Ii)Ji.warn(n.message);else{const r=js.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ji.warn(r.message)}}}function Jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=1024,bV=30*24*60*60*1e3;class AV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=bV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yS(),{heartbeatsToSend:r,unsentEntries:i}=xV(this._heartbeatsCache.heartbeats),s=Ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ji.warn(n),""}}}function yS(){return new Date().toISOString().substring(0,10)}function xV(t,e=CV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_S(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_S(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hF()?fF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _S(t){return Ff(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){Ks(new Xi("platform-logger",e=>new HF(e),"PRIVATE")),Ks(new Xi("heartbeat",e=>new AV(e),"PRIVATE")),Nr(Xy,pS,t),Nr(Xy,pS,"esm2017"),Nr("fire-js","")}kV("");function h0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NV=Zb,eA=new ad("auth","Firebase",Zb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new jp("@firebase/auth");function OV(t,...e){$f.logLevel<=We.WARN&&$f.warn(`Auth (${ao}): ${t}`,...e)}function Hh(t,...e){$f.logLevel<=We.ERROR&&$f.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,...e){throw p0(t,...e)}function Zr(t,...e){return p0(t,...e)}function f0(t,e,n){const r=Object.assign(Object.assign({},NV()),{[e]:n});return new ad("auth","Firebase",r).create(e,{appName:t.name})}function zi(t){return f0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(t,"argument-error"),f0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function p0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eA.create(t,...e)}function Ne(t,e,...n){if(!t)throw p0(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function Zi(t,e){t||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LV(){return vS()==="http:"||vS()==="https:"}function vS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LV()||uF()||"connection"in navigator)?navigator.onLine:!0}function FV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=u0()||Wb()}get(){return MV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=new ld(3e4,6e4);function lo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function os(t,e,n,r,i={}){return nA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return lF()||(u.referrerPolicy="no-referrer"),tA.fetch()(rA(t,t.config.apiHost,n,a),u)})}async function nA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},VV),e);try{const i=new $V(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ph(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ph(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw f0(t,d,u);Lr(t,d)}}catch(i){if(i instanceof Ii)throw i;Lr(t,"network-request-failed",{message:String(i)})}}async function ud(t,e,n,r,i={}){const s=await os(t,e,n,r,i);return"mfaPendingCredential"in s&&Lr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function rA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?m0(t.config,i):`${t.config.apiScheme}://${i}`}function jV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),UV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function wS(t){return t!==void 0&&t.enterprise!==void 0}class BV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zV(t,e){return os(t,"GET","/v2/recaptchaConfig",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){return os(t,"POST","/v1/accounts:delete",e)}async function iA(t,e){return os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WV(t,e=!1){const n=It(t),r=await n.getIdToken(e),i=g0(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rc(Eg(i.auth_time)),issuedAtTime:rc(Eg(i.iat)),expirationTime:rc(Eg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Eg(t){return Number(t)*1e3}function g0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vf(n);return i?JSON.parse(i):(Hh("Failed to decode base64 JWT payload"),null)}catch(i){return Hh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ES(t){const e=g0(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ii&&qV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Rl(t,iA(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?sA(s.providerUserInfo):[],a=QV(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new t_(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function GV(t){const e=It(t);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sA(t){return t.map(e=>{var{providerId:n}=e,r=h0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e){const n=await nA(t,{},async()=>{const r=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=rA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XV(t,e){return os(t,"POST","/v2/accounts:revokeToken",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ES(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=ES(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await YV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ll;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=h0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new t_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WV(this,e)}reload(){return GV(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await Rl(this,HV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:b,isAnonymous:O,providerData:F,stsTokenManager:C}=n;Ne(E&&C,e,"internal-error");const g=ll.fromJSON(this.name,C);Ne(typeof E=="string",e,"internal-error"),ps(h,e.name),ps(f,e.name),Ne(typeof b=="boolean",e,"internal-error"),Ne(typeof O=="boolean",e,"internal-error"),ps(p,e.name),ps(y,e.name),ps(w,e.name),ps(S,e.name),ps(T,e.name),ps(_,e.name);const R=new Vi({uid:E,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:O,photoURL:y,phoneNumber:p,tenantId:w,stsTokenManager:g,createdAt:T,lastLoginAt:_});return F&&Array.isArray(F)&&(R.providerData=F.map(A=>Object.assign({},A))),S&&(R._redirectEventId=S),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new ll;i.updateFromServerResponse(n);const s=new Vi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ll;a.updateFromIdToken(r);const l=new Vi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new t_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Map;function Ui(t){Zi(t instanceof Function,"Expected a class definition");let e=TS.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oA.type="NONE";const SS=oA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class ul{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ul(Ui(SS),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ui(SS);const o=Wh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Vi._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ul(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ul(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hA(e))return"Blackberry";if(fA(e))return"Webos";if(lA(e))return"Safari";if((e.includes("chrome/")||uA(e))&&!e.includes("edge/"))return"Chrome";if(dA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aA(t=On()){return/firefox\//i.test(t)}function lA(t=On()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uA(t=On()){return/crios\//i.test(t)}function cA(t=On()){return/iemobile/i.test(t)}function dA(t=On()){return/android/i.test(t)}function hA(t=On()){return/blackberry/i.test(t)}function fA(t=On()){return/webos/i.test(t)}function y0(t=On()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JV(t=On()){var e;return y0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZV(){return cF()&&document.documentMode===10}function pA(t=On()){return y0(t)||dA(t)||fA(t)||hA(t)||/windows phone/i.test(t)||cA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e=[]){let n;switch(t){case"Browser":n=IS(On());break;case"Worker":n=`${IS(On())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e={}){return os(t,"GET","/v2/passwordPolicy",lo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=6;class r4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:n4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RS(this),this.idTokenSubscription=new RS(this),this.beforeStateQueue=new e4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iA(this,{idToken:e}),r=await Vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(zi(this));const n=e?It(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qr(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t4(this),n=new r4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function uo(t){return It(t)}class RS{constructor(e){this.auth=e,this.observer=null,this.addObserver=wF(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s4(t){Bp=t}function gA(t){return Bp.loadJS(t)}function o4(){return Bp.recaptchaEnterpriseScript}function a4(){return Bp.gapiScript}function l4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const u4="recaptcha-enterprise",c4="NO_RECAPTCHA";class d4{constructor(e){this.type=u4,this.auth=uo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{zV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new BV(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;wS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(c4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&wS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=o4();l.length!==0&&(l+=a),gA(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function CS(t,e,n,r=!1){const i=new d4(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function n_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await CS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e){const n=$p(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Mc(s,e??{}))return i;Lr(i,"already-initialized")}return n.initialize({options:e})}function f4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p4(t,e,n){const r=uo(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=yA(e),{host:o,port:a}=m4(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),g4()}function yA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m4(t){const e=yA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bS(o)}}}function bS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function g4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}async function y4(t,e){return os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){return ud(t,"POST","/v1/accounts:signInWithPassword",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t,e){return ud(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}async function w4(t,e){return ud(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends _0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(e,n,"signInWithPassword",_4);case"emailLink":return v4(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(e,r,"signUpPassword",y4);case"emailLink":return w4(e,{idToken:n,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t,e){return ud(t,"POST","/v1/accounts:signInWithIdp",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="http://localhost";class Jo extends _0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=h0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Jo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cl(e,n)}buildRequest(){const e={requestUri:E4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S4(t){const e=Bu(zu(t)).link,n=e?Bu(zu(e)).deep_link_id:null,r=Bu(zu(t)).deep_link_id;return(r?Bu(zu(r)).link:null)||r||n||e||t}class v0{constructor(e){var n,r,i,s,o,a;const l=Bu(zu(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=T4((i=l.mode)!==null&&i!==void 0?i:null);Ne(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=S4(e);try{return new v0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.providerId=Wl.PROVIDER_ID}static credential(e,n){return Vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=v0.parseLink(n);return Ne(r,"argument-error"),Vc._fromEmailAndCode(e,r.code,r.tenantId)}}Wl.PROVIDER_ID="password";Wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends w0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends cd{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends cd{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends cd{constructor(){super("twitter.com")}static credential(e,n){return Jo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){return ud(t,"POST","/v1/accounts:signUp",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vi._fromIdTokenResponse(e,r,i),o=AS(r);return new Zo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=AS(r);return new Zo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function AS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Ii{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zf(e,n,r,i)}}function _A(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(t,s,e,r):s})}async function R4(t,e,n=!1){const r=await Rl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e,n=!1){const{auth:r}=t;if(Qr(r.app))return Promise.reject(zi(r));const i="reauthenticate";try{const s=await Rl(t,_A(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const o=g0(s.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),Zo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e,n=!1){if(Qr(t.app))return Promise.reject(zi(t));const r="signIn",i=await _A(t,r,e),s=await Zo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function b4(t,e){return vA(uo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t){const e=uo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function A4(t,e,n){if(Qr(t.app))return Promise.reject(zi(t));const r=uo(t),o=await n_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I4).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wA(t),l}),a=await Zo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function x4(t,e,n){return Qr(t.app)?Promise.reject(zi(t)):b4(It(t),Wl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e){return os(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=It(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Rl(r,P4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e){return It(t).setPersistence(e)}function O4(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function D4(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function L4(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function M4(t){return It(t).signOut()}const Hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hf,"1"),this.storage.removeItem(Hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1e3,V4=10;class TA extends EA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,V4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},F4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TA.type="LOCAL";const SA=TA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends EA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IA.type="SESSION";const RA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await U4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=E0("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function $4(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function B4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function H4(){return CA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",W4=1,Wf="firebaseLocalStorage",AA="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hp(t,e){return t.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function q4(){const t=indexedDB.deleteDatabase(bA);return new dd(t).toPromise()}function r_(){const t=indexedDB.open(bA,W4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wf,{keyPath:AA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wf)?e(r):(r.close(),await q4(),e(await r_()))})})}async function xS(t,e,n){const r=Hp(t,!0).put({[AA]:e,value:n});return new dd(r).toPromise()}async function K4(t,e){const n=Hp(t,!1).get(e),r=await new dd(n).toPromise();return r===void 0?null:r.value}function PS(t,e){const n=Hp(t,!0).delete(e);return new dd(n).toPromise()}const G4=800,Q4=3;class xA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await r_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Q4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zp._getInstance(H4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await B4(),!this.activeServiceWorker)return;this.sender=new j4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await r_();return await xS(e,Hf,"1"),await PS(e,Hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>K4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Hp(i,!1).getAll();return new dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xA.type="LOCAL";const Y4=xA;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){return e?Ui(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends _0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function X4(t){return vA(t.auth,new T0(t),t.bypassAuthState)}function J4(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),C4(n,new T0(t),t.bypassAuthState)}async function Z4(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),R4(n,new T0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X4;case"linkViaPopup":case"linkViaRedirect":return Z4;case"reauthViaPopup":case"reauthViaRedirect":return J4;default:Lr(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new ld(2e3,1e4);async function tU(t,e,n){if(Qr(t.app))return Promise.reject(Zr(t,"operation-not-supported-in-this-environment"));const r=uo(t);DV(t,e,w0);const i=PA(r,n);return new Oo(r,"signInViaPopup",e,i).executeNotNull()}class Oo extends kA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=E0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eU.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="pendingRedirect",qh=new Map;class rU extends kA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const r=await iU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iU(t,e){const n=aU(e),r=oU(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function sU(t,e){qh.set(t._key(),e)}function oU(t){return Ui(t._redirectPersistence)}function aU(t){return Wh(nU,t.config.apiKey,t.name)}async function lU(t,e,n=!1){if(Qr(t.app))return Promise.reject(zi(t));const r=uo(t),i=PA(r,e),o=await new rU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=10*60*1e3;class cU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uU&&this.cachedEventUids.clear(),this.cachedEventUids.has(kS(e))}saveEventToCache(e){this.cachedEventUids.add(kS(e)),this.lastProcessedEventTime=Date.now()}}function kS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e={}){return os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pU=/^https?/;async function mU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hU(t);for(const n of e)try{if(gU(n))return}catch{}Lr(t,"unauthorized-domain")}function gU(t){const e=e_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pU.test(n))return!1;if(fU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new ld(3e4,6e4);function NS(){const t=_i().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _U(t){return new Promise((e,n)=>{var r,i,s;function o(){NS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NS(),n(Zr(t,"network-request-failed"))},timeout:yU.get()})}if(!((i=(r=_i().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_i().gapi)===null||s===void 0)&&s.load)o();else{const a=l4("iframefcb");return _i()[a]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},gA(`${a4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function vU(t){return Kh=Kh||_U(t),Kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=new ld(5e3,15e3),EU="__/auth/iframe",TU="emulator/auth/iframe",SU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RU(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?m0(e,TU):`https://${t.config.authDomain}/${EU}`,r={apiKey:e.apiKey,appName:t.name,v:ao},i=IU.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Hl(r).slice(1)}`}async function CU(t){const e=await vU(t),n=_i().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:RU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zr(t,"network-request-failed"),a=_i().setTimeout(()=>{s(o)},wU.get());function l(){_i().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AU=500,xU=600,PU="_blank",kU="http://localhost";class OS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NU(t,e,n,r=AU,i=xU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bU),{width:r.toString(),height:i.toString(),top:s,left:o}),u=On().toLowerCase();n&&(a=uA(u)?PU:n),aA(u)&&(e=e||kU,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(JV(u)&&a!=="_self")return OU(e||"",a),new OS(null);const h=window.open(e||"",a,d);Ne(h,t,"popup-blocked");try{h.focus()}catch{}return new OS(h)}function OU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="__/auth/handler",LU="emulator/auth/handler",MU=encodeURIComponent("fac");async function DS(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ao,eventId:i};if(e instanceof w0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Gy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof cd){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${MU}=${encodeURIComponent(l)}`:"";return`${FU(t)}?${Hl(a).slice(1)}${u}`}function FU({config:t}){return t.emulator?m0(t,LU):`https://${t.authDomain}/${DU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class VU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=lU,this._overrideRedirectResult=sU}async _openPopup(e,n,r,i){var s;Zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await DS(e,n,r,e_(),i);return NU(e,o,E0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await DS(e,n,r,e_(),i);return $4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CU(e),r=new cU(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tg,{type:Tg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Tg];o!==void 0&&n(!!o),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pA()||lA()||y0()}}const UU=VU;var LS="@firebase/auth",MS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BU(t){Ks(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mA(t)},u=new i4(r,i,s,l);return f4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new Xi("auth-internal",e=>{const n=uo(e.getProvider("auth").getImmediate());return(r=>new jU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(LS,MS,$U(t)),Nr(LS,MS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=5*60,HU=zb("authIdTokenMaxAge")||zU;let FS=null;const WU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HU)return;const i=n==null?void 0:n.token;FS!==i&&(FS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qU(t=d0()){const e=$p(t,"auth");if(e.isInitialized())return e.getImmediate();const n=h4(t,{popupRedirectResolver:UU,persistence:[Y4,SA,RA]}),r=zb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=WU(s.toString());D4(n,o,()=>o(n.currentUser)),O4(n,a=>o(a))}}const i=jb("auth");return i&&p4(n,`http://${i}`),n}function KU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}s4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BU("Browser");function OA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=OA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xs(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=OA(t))&&(r&&(r+=" "),r+=e);return r}const Uc=t=>typeof t=="number"&&!isNaN(t),$o=t=>typeof t=="string",dr=t=>typeof t=="function",Gh=t=>$o(t)||dr(t)?t:null,i_=t=>I.isValidElement(t)||$o(t)||dr(t)||Uc(t);function GU(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Wp(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:u,done:d,nodeRef:h,isIn:f,playToast:p}=o;const y=r?`${e}--${l}`:e,w=r?`${n}--${l}`:n,S=I.useRef(0);return I.useLayoutEffect(()=>{const T=h.current,_=y.split(" "),E=b=>{b.target===h.current&&(p(),T.removeEventListener("animationend",E),T.removeEventListener("animationcancel",E),S.current===0&&b.type!=="animationcancel"&&T.classList.remove(..._))};T.classList.add(..._),T.addEventListener("animationend",E),T.addEventListener("animationcancel",E)},[]),I.useEffect(()=>{const T=h.current,_=()=>{T.removeEventListener("animationend",_),i?GU(T,d,s):d()};f||(u?_():(S.current=1,T.className+=` ${w}`,T.addEventListener("animationend",_)))},[f]),ve.createElement(ve.Fragment,null,a)}}function VS(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Bn=new Map;let jc=[];const s_=new Set,QU=t=>s_.forEach(e=>e(t)),DA=()=>Bn.size>0;function LA(t,e){var n;if(e)return!((n=Bn.get(e))==null||!n.isToastActive(t));let r=!1;return Bn.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function MA(t,e){i_(t)&&(DA()||jc.push({content:t,options:e}),Bn.forEach(n=>{n.buildToast(t,e)}))}function US(t,e){Bn.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function YU(t){const{subscribe:e,getSnapshot:n,setProps:r}=I.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(d,h,f){let p=1,y=0,w=[],S=[],T=[],_=h;const E=new Map,b=new Set,O=()=>{T=Array.from(E.values()),b.forEach(g=>g())},F=g=>{S=g==null?[]:S.filter(R=>R!==g),O()},C=g=>{const{toastId:R,onOpen:A,updateId:k,children:N}=g.props,P=k==null;g.staleId&&E.delete(g.staleId),E.set(R,g),S=[...S,g.props.toastId].filter(re=>re!==g.staleId),O(),f(VS(g,P?"added":"updated")),P&&dr(A)&&A(I.isValidElement(N)&&N.props)};return{id:d,props:_,observe:g=>(b.add(g),()=>b.delete(g)),toggle:(g,R)=>{E.forEach(A=>{R!=null&&R!==A.props.toastId||dr(A.toggle)&&A.toggle(g)})},removeToast:F,toasts:E,clearQueue:()=>{y-=w.length,w=[]},buildToast:(g,R)=>{if((q=>{let{containerId:J,toastId:ye,updateId:Te}=q;const pe=J?J!==d:d!==1,U=E.has(ye)&&Te==null;return pe||U})(R))return;const{toastId:A,updateId:k,data:N,staleId:P,delay:re}=R,be=()=>{F(A)},Re=k==null;Re&&y++;const te={..._,style:_.toastStyle,key:p++,...Object.fromEntries(Object.entries(R).filter(q=>{let[J,ye]=q;return ye!=null})),toastId:A,updateId:k,data:N,closeToast:be,isIn:!1,className:Gh(R.className||_.toastClassName),bodyClassName:Gh(R.bodyClassName||_.bodyClassName),progressClassName:Gh(R.progressClassName||_.progressClassName),autoClose:!R.isLoading&&(W=R.autoClose,Q=_.autoClose,W===!1||Uc(W)&&W>0?W:Q),deleteToast(){const q=E.get(A),{onClose:J,children:ye}=q.props;dr(J)&&J(I.isValidElement(ye)&&ye.props),f(VS(q,"removed")),E.delete(A),y--,y<0&&(y=0),w.length>0?C(w.shift()):O()}};var W,Q;te.closeButton=_.closeButton,R.closeButton===!1||i_(R.closeButton)?te.closeButton=R.closeButton:R.closeButton===!0&&(te.closeButton=!i_(_.closeButton)||_.closeButton);let ie=g;I.isValidElement(g)&&!$o(g.type)?ie=I.cloneElement(g,{closeToast:be,toastProps:te,data:N}):dr(g)&&(ie=g({closeToast:be,toastProps:te,data:N}));const Pe={content:ie,props:te,staleId:P};_.limit&&_.limit>0&&y>_.limit&&Re?w.push(Pe):Uc(re)?setTimeout(()=>{C(Pe)},re):C(Pe)},setProps(g){_=g},setToggle:(g,R)=>{E.get(g).toggle=R},isToastActive:g=>S.some(R=>R===g),getSnapshot:()=>_.newestOnTop?T.reverse():T}}(o,s,QU);Bn.set(o,l);const u=l.observe(a);return jc.forEach(d=>MA(d.content,d.options)),jc=[],()=>{u(),Bn.delete(o)}},setProps(a){var l;(l=Bn.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Bn.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=I.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:LA,count:i==null?void 0:i.length}}function XU(t){const[e,n]=I.useState(!1),[r,i]=I.useState(!1),s=I.useRef(null),o=I.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:u,onClick:d,closeOnClick:h}=t;var f,p;function y(){n(!0)}function w(){n(!1)}function S(E){const b=s.current;o.canDrag&&b&&(o.didMove=!0,e&&w(),o.delta=t.draggableDirection==="x"?E.clientX-o.start:E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1),b.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,b.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function T(){document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",T);const E=s.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}(p=Bn.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(f.id,f.fn),I.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||w(),window.addEventListener("focus",y),window.addEventListener("blur",w),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",w)}},[t.pauseOnFocusLoss]);const _={onPointerDown:function(E){if(t.draggable===!0||t.draggable===E.pointerType){o.didMove=!1,document.addEventListener("pointermove",S),document.addEventListener("pointerup",T);const b=s.current;o.canCloseOnClick=!0,o.canDrag=!0,b.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=b.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=b.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(E){const{top:b,bottom:O,left:F,right:C}=s.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=F&&E.clientX<=C&&E.clientY>=b&&E.clientY<=O?w():y()}};return a&&l&&(_.onMouseEnter=w,t.stacked||(_.onMouseLeave=y)),h&&(_.onClick=E=>{d&&d(E),o.canCloseOnClick&&u()}),{playToast:y,pauseToast:w,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:_}}function JU(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:u,rtl:d,isIn:h,theme:f}=t;const p=s||l&&u===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${u})`);const w=xs("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":d}),S=dr(o)?o({rtl:d,type:i,defaultClassName:w}):xs(w,o),T={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&r()}};return ve.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ve.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),ve.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:S,style:y,...T}))}let ZU=1;const FA=()=>""+ZU++;function ej(t){return t&&($o(t.toastId)||Uc(t.toastId))?t.toastId:FA()}function ic(t,e){return MA(t,e),e.toastId}function qf(t,e){return{...e,type:e&&e.type||t,toastId:ej(e)}}function mh(t){return(e,n)=>ic(e,qf(t,n))}function ft(t,e){return ic(t,qf("default",e))}ft.loading=(t,e)=>ic(t,qf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ft.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=$o(i)?ft.loading(i,n):ft.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,h,f)=>{if(h==null)return void ft.dismiss(r);const p={type:d,...a,...n,data:f},y=$o(h)?{render:h}:h;return r?ft.update(r,{...p,...y}):ft(y.render,{...p,...y}),f},u=dr(t)?t():t;return u.then(d=>l("success",o,d)).catch(d=>l("error",s,d)),u},ft.success=mh("success"),ft.info=mh("info"),ft.error=mh("error"),ft.warning=mh("warning"),ft.warn=ft.warning,ft.dark=(t,e)=>ic(t,qf("default",{theme:"dark",...e})),ft.dismiss=function(t){(function(e){var n;if(DA()){if(e==null||$o(n=e)||Uc(n))Bn.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Bn.get(e.containerId);r?r.removeToast(e.id):Bn.forEach(i=>{i.removeToast(e.id)})}}else jc=jc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},ft.clearWaitingQueue=function(t){t===void 0&&(t={}),Bn.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},ft.isActive=LA,ft.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Bn.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:FA()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,ic(o,s)}},ft.done=t=>{ft.update(t,{progress:1})},ft.onChange=function(t){return s_.add(t),()=>{s_.delete(t)}},ft.play=t=>US(!0,t),ft.pause=t=>US(!1,t);const tj=typeof window<"u"?I.useLayoutEffect:I.useEffect,gh=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return ve.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},Sg={info:function(t){return ve.createElement(gh,{...t},ve.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ve.createElement(gh,{...t},ve.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ve.createElement(gh,{...t},ve.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ve.createElement(gh,{...t},ve.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ve.createElement("div",{className:"Toastify__spinner"})}},nj=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=XU(t),{closeButton:o,children:a,autoClose:l,onClick:u,type:d,hideProgressBar:h,closeToast:f,transition:p,position:y,className:w,style:S,bodyClassName:T,bodyStyle:_,progressClassName:E,progressStyle:b,updateId:O,role:F,progress:C,rtl:g,toastId:R,deleteToast:A,isIn:k,isLoading:N,closeOnClick:P,theme:re}=t,be=xs("Toastify__toast",`Toastify__toast-theme--${re}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":g},{"Toastify__toast--close-on-click":P}),Re=dr(w)?w({rtl:g,position:y,type:d,defaultClassName:be}):xs(be,w),te=function(Pe){let{theme:q,type:J,isLoading:ye,icon:Te}=Pe,pe=null;const U={theme:q,type:J};return Te===!1||(dr(Te)?pe=Te({...U,isLoading:ye}):I.isValidElement(Te)?pe=I.cloneElement(Te,U):ye?pe=Sg.spinner():(G=>G in Sg)(J)&&(pe=Sg[J](U))),pe}(t),W=!!C||!l,Q={closeToast:f,type:d,theme:re};let ie=null;return o===!1||(ie=dr(o)?o(Q):I.isValidElement(o)?I.cloneElement(o,Q):function(Pe){let{closeToast:q,theme:J,ariaLabel:ye="close"}=Pe;return ve.createElement("button",{className:`Toastify__close-button Toastify__close-button--${J}`,type:"button",onClick:Te=>{Te.stopPropagation(),q(Te)},"aria-label":ye},ve.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ve.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Q)),ve.createElement(p,{isIn:k,done:A,position:y,preventExitTransition:n,nodeRef:r,playToast:s},ve.createElement("div",{id:R,onClick:u,"data-in":k,className:Re,...i,style:S,ref:r},ve.createElement("div",{...k&&{role:F},className:dr(T)?T({type:d}):xs("Toastify__toast-body",T),style:_},te!=null&&ve.createElement("div",{className:xs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},te),ve.createElement("div",null,a)),ie,ve.createElement(JU,{...O&&!W?{key:`pb-${O}`}:{},rtl:g,theme:re,delay:l,isRunning:e,isIn:k,closeToast:f,hide:h,type:d,style:b,className:E,controlledProgress:W,progress:C||0})))},qp=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},rj=Wp(qp("bounce",!0)),ij=Wp(qp("slide",!0));Wp(qp("zoom"));Wp(qp("flip"));const sj={position:"top-right",transition:rj,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function oj(t){let e={...sj,...t};const n=t.stacked,[r,i]=I.useState(!0),s=I.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=YU(e),{className:u,style:d,rtl:h,containerId:f}=e;function p(w){const S=xs("Toastify__toast-container",`Toastify__toast-container--${w}`,{"Toastify__toast-container--rtl":h});return dr(u)?u({position:w,rtl:h,defaultClassName:S}):xs(S,Gh(u))}function y(){n&&(i(!0),ft.play())}return tj(()=>{if(n){var w;const S=s.current.querySelectorAll('[data-in="true"]'),T=12,_=(w=e.position)==null?void 0:w.includes("top");let E=0,b=0;Array.from(S).reverse().forEach((O,F)=>{const C=O;C.classList.add("Toastify__toast--stacked"),F>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=_?"top":"bot");const g=E*(r?.2:1)+(r?0:T*F);C.style.setProperty("--y",`${_?g:-1*g}px`),C.style.setProperty("--g",`${T}`),C.style.setProperty("--s",""+(1-(r?b:0))),E+=C.offsetHeight,b+=.025})}},[r,l,n]),ve.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),ft.pause())},onMouseLeave:y},o((w,S)=>{const T=S.length?{...d}:{...d,pointerEvents:"none"};return ve.createElement("div",{className:p(w),style:T,key:`container-${w}`},S.map(_=>{let{content:E,props:b}=_;return ve.createElement(nj,{...b,stacked:n,collapseAll:y,isIn:a(b.toastId,b.containerId),style:b.style,key:`toast-${b.key}`},E)}))}))}var aj="firebase",lj="10.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(aj,lj,"app");var jS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,VA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,g){function R(){}R.prototype=g.prototype,C.D=g.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(A,k,N){for(var P=Array(arguments.length-2),re=2;re<arguments.length;re++)P[re-2]=arguments[re];return g.prototype[k].apply(A,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,g,R){R||(R=0);var A=Array(16);if(typeof g=="string")for(var k=0;16>k;++k)A[k]=g.charCodeAt(R++)|g.charCodeAt(R++)<<8|g.charCodeAt(R++)<<16|g.charCodeAt(R++)<<24;else for(k=0;16>k;++k)A[k]=g[R++]|g[R++]<<8|g[R++]<<16|g[R++]<<24;g=C.g[0],R=C.g[1],k=C.g[2];var N=C.g[3],P=g+(N^R&(k^N))+A[0]+3614090360&4294967295;g=R+(P<<7&4294967295|P>>>25),P=N+(k^g&(R^k))+A[1]+3905402710&4294967295,N=g+(P<<12&4294967295|P>>>20),P=k+(R^N&(g^R))+A[2]+606105819&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(g^k&(N^g))+A[3]+3250441966&4294967295,R=k+(P<<22&4294967295|P>>>10),P=g+(N^R&(k^N))+A[4]+4118548399&4294967295,g=R+(P<<7&4294967295|P>>>25),P=N+(k^g&(R^k))+A[5]+1200080426&4294967295,N=g+(P<<12&4294967295|P>>>20),P=k+(R^N&(g^R))+A[6]+2821735955&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(g^k&(N^g))+A[7]+4249261313&4294967295,R=k+(P<<22&4294967295|P>>>10),P=g+(N^R&(k^N))+A[8]+1770035416&4294967295,g=R+(P<<7&4294967295|P>>>25),P=N+(k^g&(R^k))+A[9]+2336552879&4294967295,N=g+(P<<12&4294967295|P>>>20),P=k+(R^N&(g^R))+A[10]+4294925233&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(g^k&(N^g))+A[11]+2304563134&4294967295,R=k+(P<<22&4294967295|P>>>10),P=g+(N^R&(k^N))+A[12]+1804603682&4294967295,g=R+(P<<7&4294967295|P>>>25),P=N+(k^g&(R^k))+A[13]+4254626195&4294967295,N=g+(P<<12&4294967295|P>>>20),P=k+(R^N&(g^R))+A[14]+2792965006&4294967295,k=N+(P<<17&4294967295|P>>>15),P=R+(g^k&(N^g))+A[15]+1236535329&4294967295,R=k+(P<<22&4294967295|P>>>10),P=g+(k^N&(R^k))+A[1]+4129170786&4294967295,g=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(g^R))+A[6]+3225465664&4294967295,N=g+(P<<9&4294967295|P>>>23),P=k+(g^R&(N^g))+A[11]+643717713&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^g&(k^N))+A[0]+3921069994&4294967295,R=k+(P<<20&4294967295|P>>>12),P=g+(k^N&(R^k))+A[5]+3593408605&4294967295,g=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(g^R))+A[10]+38016083&4294967295,N=g+(P<<9&4294967295|P>>>23),P=k+(g^R&(N^g))+A[15]+3634488961&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^g&(k^N))+A[4]+3889429448&4294967295,R=k+(P<<20&4294967295|P>>>12),P=g+(k^N&(R^k))+A[9]+568446438&4294967295,g=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(g^R))+A[14]+3275163606&4294967295,N=g+(P<<9&4294967295|P>>>23),P=k+(g^R&(N^g))+A[3]+4107603335&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^g&(k^N))+A[8]+1163531501&4294967295,R=k+(P<<20&4294967295|P>>>12),P=g+(k^N&(R^k))+A[13]+2850285829&4294967295,g=R+(P<<5&4294967295|P>>>27),P=N+(R^k&(g^R))+A[2]+4243563512&4294967295,N=g+(P<<9&4294967295|P>>>23),P=k+(g^R&(N^g))+A[7]+1735328473&4294967295,k=N+(P<<14&4294967295|P>>>18),P=R+(N^g&(k^N))+A[12]+2368359562&4294967295,R=k+(P<<20&4294967295|P>>>12),P=g+(R^k^N)+A[5]+4294588738&4294967295,g=R+(P<<4&4294967295|P>>>28),P=N+(g^R^k)+A[8]+2272392833&4294967295,N=g+(P<<11&4294967295|P>>>21),P=k+(N^g^R)+A[11]+1839030562&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^g)+A[14]+4259657740&4294967295,R=k+(P<<23&4294967295|P>>>9),P=g+(R^k^N)+A[1]+2763975236&4294967295,g=R+(P<<4&4294967295|P>>>28),P=N+(g^R^k)+A[4]+1272893353&4294967295,N=g+(P<<11&4294967295|P>>>21),P=k+(N^g^R)+A[7]+4139469664&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^g)+A[10]+3200236656&4294967295,R=k+(P<<23&4294967295|P>>>9),P=g+(R^k^N)+A[13]+681279174&4294967295,g=R+(P<<4&4294967295|P>>>28),P=N+(g^R^k)+A[0]+3936430074&4294967295,N=g+(P<<11&4294967295|P>>>21),P=k+(N^g^R)+A[3]+3572445317&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^g)+A[6]+76029189&4294967295,R=k+(P<<23&4294967295|P>>>9),P=g+(R^k^N)+A[9]+3654602809&4294967295,g=R+(P<<4&4294967295|P>>>28),P=N+(g^R^k)+A[12]+3873151461&4294967295,N=g+(P<<11&4294967295|P>>>21),P=k+(N^g^R)+A[15]+530742520&4294967295,k=N+(P<<16&4294967295|P>>>16),P=R+(k^N^g)+A[2]+3299628645&4294967295,R=k+(P<<23&4294967295|P>>>9),P=g+(k^(R|~N))+A[0]+4096336452&4294967295,g=R+(P<<6&4294967295|P>>>26),P=N+(R^(g|~k))+A[7]+1126891415&4294967295,N=g+(P<<10&4294967295|P>>>22),P=k+(g^(N|~R))+A[14]+2878612391&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~g))+A[5]+4237533241&4294967295,R=k+(P<<21&4294967295|P>>>11),P=g+(k^(R|~N))+A[12]+1700485571&4294967295,g=R+(P<<6&4294967295|P>>>26),P=N+(R^(g|~k))+A[3]+2399980690&4294967295,N=g+(P<<10&4294967295|P>>>22),P=k+(g^(N|~R))+A[10]+4293915773&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~g))+A[1]+2240044497&4294967295,R=k+(P<<21&4294967295|P>>>11),P=g+(k^(R|~N))+A[8]+1873313359&4294967295,g=R+(P<<6&4294967295|P>>>26),P=N+(R^(g|~k))+A[15]+4264355552&4294967295,N=g+(P<<10&4294967295|P>>>22),P=k+(g^(N|~R))+A[6]+2734768916&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~g))+A[13]+1309151649&4294967295,R=k+(P<<21&4294967295|P>>>11),P=g+(k^(R|~N))+A[4]+4149444226&4294967295,g=R+(P<<6&4294967295|P>>>26),P=N+(R^(g|~k))+A[11]+3174756917&4294967295,N=g+(P<<10&4294967295|P>>>22),P=k+(g^(N|~R))+A[2]+718787259&4294967295,k=N+(P<<15&4294967295|P>>>17),P=R+(N^(k|~g))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+g&4294967295,C.g[1]=C.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,g){g===void 0&&(g=C.length);for(var R=g-this.blockSize,A=this.B,k=this.h,N=0;N<g;){if(k==0)for(;N<=R;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<g;)if(A[k++]=C.charCodeAt(N++),k==this.blockSize){i(this,A),k=0;break}}else for(;N<g;)if(A[k++]=C[N++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=g},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var g=1;g<C.length-8;++g)C[g]=0;var R=8*this.o;for(g=C.length-8;g<C.length;++g)C[g]=R&255,R/=256;for(this.u(C),C=Array(16),g=R=0;4>g;++g)for(var A=0;32>A;A+=8)C[R++]=this.g[g]>>>A&255;return C};function s(C,g){var R=a;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=g(C)}function o(C,g){this.h=g;for(var R=[],A=!0,k=C.length-1;0<=k;k--){var N=C[k]|0;A&&N==g||(R[k]=N,A=!1)}this.g=R}var a={};function l(C){return-128<=C&&128>C?s(C,function(g){return new o([g|0],0>g?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return S(u(-C));for(var g=[],R=1,A=0;C>=R;A++)g[A]=C/R|0,R*=4294967296;return new o(g,0)}function d(C,g){if(C.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(C.charAt(0)=="-")return S(d(C.substring(1),g));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(g,8)),A=h,k=0;k<C.length;k+=8){var N=Math.min(8,C.length-k),P=parseInt(C.substring(k,k+N),g);8>N?(N=u(Math.pow(g,N)),A=A.j(N).add(u(P))):(A=A.j(R),A=A.add(u(P)))}return A}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-S(this).m();for(var C=0,g=1,R=0;R<this.g.length;R++){var A=this.i(R);C+=(0<=A?A:4294967296+A)*g,g*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(w(this))return"-"+S(this).toString(C);for(var g=u(Math.pow(C,6)),R=this,A="";;){var k=b(R,g).g;R=T(R,k.j(g));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=k,y(R))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var g=0;g<C.g.length;g++)if(C.g[g]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=T(this,C),w(C)?-1:y(C)?0:1};function S(C){for(var g=C.g.length,R=[],A=0;A<g;A++)R[A]=~C.g[A];return new o(R,~C.h).add(f)}t.abs=function(){return w(this)?S(this):this},t.add=function(C){for(var g=Math.max(this.g.length,C.g.length),R=[],A=0,k=0;k<=g;k++){var N=A+(this.i(k)&65535)+(C.i(k)&65535),P=(N>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);A=P>>>16,N&=65535,P&=65535,R[k]=P<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function T(C,g){return C.add(S(g))}t.j=function(C){if(y(this)||y(C))return h;if(w(this))return w(C)?S(this).j(S(C)):S(S(this).j(C));if(w(C))return S(this.j(S(C)));if(0>this.l(p)&&0>C.l(p))return u(this.m()*C.m());for(var g=this.g.length+C.g.length,R=[],A=0;A<2*g;A++)R[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<C.g.length;k++){var N=this.i(A)>>>16,P=this.i(A)&65535,re=C.i(k)>>>16,be=C.i(k)&65535;R[2*A+2*k]+=P*be,_(R,2*A+2*k),R[2*A+2*k+1]+=N*be,_(R,2*A+2*k+1),R[2*A+2*k+1]+=P*re,_(R,2*A+2*k+1),R[2*A+2*k+2]+=N*re,_(R,2*A+2*k+2)}for(A=0;A<g;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=g;A<2*g;A++)R[A]=0;return new o(R,0)};function _(C,g){for(;(C[g]&65535)!=C[g];)C[g+1]+=C[g]>>>16,C[g]&=65535,g++}function E(C,g){this.g=C,this.h=g}function b(C,g){if(y(g))throw Error("division by zero");if(y(C))return new E(h,h);if(w(C))return g=b(S(C),g),new E(S(g.g),S(g.h));if(w(g))return g=b(C,S(g)),new E(S(g.g),g.h);if(30<C.g.length){if(w(C)||w(g))throw Error("slowDivide_ only works with positive integers.");for(var R=f,A=g;0>=A.l(C);)R=O(R),A=O(A);var k=F(R,1),N=F(A,1);for(A=F(A,2),R=F(R,2);!y(A);){var P=N.add(A);0>=P.l(C)&&(k=k.add(R),N=P),A=F(A,1),R=F(R,1)}return g=T(C,k.j(g)),new E(k,g)}for(k=h;0<=C.l(g);){for(R=Math.max(1,Math.floor(C.m()/g.m())),A=Math.ceil(Math.log(R)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=u(R),P=N.j(g);w(P)||0<P.l(C);)R-=A,N=u(R),P=N.j(g);y(N)&&(N=f),k=k.add(N),C=T(C,P)}return new E(k,C)}t.A=function(C){return b(this,C).h},t.and=function(C){for(var g=Math.max(this.g.length,C.g.length),R=[],A=0;A<g;A++)R[A]=this.i(A)&C.i(A);return new o(R,this.h&C.h)},t.or=function(C){for(var g=Math.max(this.g.length,C.g.length),R=[],A=0;A<g;A++)R[A]=this.i(A)|C.i(A);return new o(R,this.h|C.h)},t.xor=function(C){for(var g=Math.max(this.g.length,C.g.length),R=[],A=0;A<g;A++)R[A]=this.i(A)^C.i(A);return new o(R,this.h^C.h)};function O(C){for(var g=C.g.length+1,R=[],A=0;A<g;A++)R[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(R,C.h)}function F(C,g){var R=g>>5;g%=32;for(var A=C.g.length-R,k=[],N=0;N<A;N++)k[N]=0<g?C.i(N+R)>>>g|C.i(N+R+1)<<32-g:C.i(N+R);return new o(k,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Bo=o}).apply(typeof jS<"u"?jS:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UA,Hu,jA,Qh,o_,$A,BA,zA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var v=r;c=c.split(".");for(var x=0;x<c.length-1;x++){var j=c[x];if(!(j in v))break e;v=v[j]}c=c[c.length-1],x=v[c],m=m(x),m!=x&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var v=0,x=!1,j={next:function(){if(!x&&v<c.length){var z=v++;return{value:m(z,c[z]),done:!1}}return x=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function d(c,m,v){return c.call.apply(c.bind,arguments)}function h(c,m,v){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,x),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function f(c,m,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function y(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(x,j,z){for(var le=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)le[dt-2]=arguments[dt];return m.prototype[j].apply(x,le)}}function w(c){const m=c.length;if(0<m){const v=Array(m);for(let x=0;x<m;x++)v[x]=c[x];return v}return[]}function S(c,m){for(let v=1;v<arguments.length;v++){const x=arguments[v];if(l(x)){const j=c.length||0,z=x.length||0;c.length=j+z;for(let le=0;le<z;le++)c[j+le]=x[le]}else c.push(x)}}class T{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function _(c){return/^[\s\xa0]*$/.test(c)}function E(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function b(c){return b[" "](c),c}b[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(c,m,v){for(const x in c)m.call(v,c[x],x,c)}function C(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function g(c){const m={};for(const v in c)m[v]=c[v];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,m){let v,x;for(let j=1;j<arguments.length;j++){x=arguments[j];for(v in x)c[v]=x[v];for(let z=0;z<R.length;z++)v=R[z],Object.prototype.hasOwnProperty.call(x,v)&&(c[v]=x[v])}}function k(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function N(c){a.setTimeout(()=>{throw c},0)}function P(){var c=Q;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,v){const x=be.get();x.set(m,v),this.h?this.h.next=x:this.g=x,this.h=x}}var be=new T(()=>new Re,c=>c.reset());class Re{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let te,W=!1,Q=new re,ie=()=>{const c=a.Promise.resolve(void 0);te=()=>{c.then(Pe)}};var Pe=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(v){N(v)}var m=be;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}W=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};a.addEventListener("test",v,m),a.removeEventListener("test",v,m)}catch{}return c}();function Te(c,m){if(J.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(O){e:{try{b(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Te.aa.h.call(this)}}y(Te,J);var pe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),G=0;function he(c,m,v,x,j){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!x,this.ha=j,this.key=++G,this.da=this.fa=!1}function se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,m,v,x,j){var z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);var le=ct(c,m,x,j);return-1<le?(m=c[le],v||(m.fa=!1)):(m=new he(m,this.src,z,!!x,j),m.fa=v,c.push(m)),m};function Ve(c,m){var v=m.type;if(v in c.g){var x=c.g[v],j=Array.prototype.indexOf.call(x,m,void 0),z;(z=0<=j)&&Array.prototype.splice.call(x,j,1),z&&(se(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ct(c,m,v,x){for(var j=0;j<c.length;++j){var z=c[j];if(!z.da&&z.listener==m&&z.capture==!!v&&z.ha==x)return j}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),Mt={};function gn(c,m,v,x,j){if(Array.isArray(m)){for(var z=0;z<m.length;z++)gn(c,m[z],v,x,j);return null}return v=Ke(v),c&&c[U]?c.K(m,v,u(x)?!!x.capture:!!x,j):Nd(c,m,v,!1,x,j)}function Nd(c,m,v,x,j,z){if(!m)throw Error("Invalid event type");var le=u(j)?!!j.capture:!!j,dt=ne(c);if(dt||(c[Oe]=dt=new fe(c)),v=dt.add(m,v,x,le,z),v.proxy)return v;if(x=L(),v.proxy=x,x.src=c,x.listener=v,c.addEventListener)ye||(j=le),j===void 0&&(j=!1),c.addEventListener(m.toString(),x,j);else if(c.attachEvent)c.attachEvent(ue(m.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function L(){function c(v){return m.call(c.src,c.listener,v)}const m=oe;return c}function $(c,m,v,x,j){if(Array.isArray(m))for(var z=0;z<m.length;z++)$(c,m[z],v,x,j);else x=u(x)?!!x.capture:!!x,v=Ke(v),c&&c[U]?(c=c.i,m=String(m).toString(),m in c.g&&(z=c.g[m],v=ct(z,v,x,j),-1<v&&(se(z[v]),Array.prototype.splice.call(z,v,1),z.length==0&&(delete c.g[m],c.h--)))):c&&(c=ne(c))&&(m=c.g[m.toString()],c=-1,m&&(c=ct(m,v,x,j)),(v=-1<c?m[c]:null)&&K(v))}function K(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[U])Ve(m.i,c);else{var v=c.type,x=c.proxy;m.removeEventListener?m.removeEventListener(v,x,c.capture):m.detachEvent?m.detachEvent(ue(v),x):m.addListener&&m.removeListener&&m.removeListener(x),(v=ne(m))?(Ve(v,c),v.h==0&&(v.src=null,m[Oe]=null)):se(c)}}}function ue(c){return c in Mt?Mt[c]:Mt[c]="on"+c}function oe(c,m){if(c.da)c=!0;else{m=new Te(m,this);var v=c.listener,x=c.ha||c.src;c.fa&&K(c),c=v.call(x,m)}return c}function ne(c){return c=c[Oe],c instanceof fe?c:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ke(c){return typeof c=="function"?c:(c[Se]||(c[Se]=function(m){return c.handleEvent(m)}),c[Se])}function Ue(){q.call(this),this.i=new fe(this),this.M=this,this.F=null}y(Ue,q),Ue.prototype[U]=!0,Ue.prototype.removeEventListener=function(c,m,v,x){$(this,c,m,v,x)};function $e(c,m){var v,x=c.F;if(x)for(v=[];x;x=x.F)v.push(x);if(c=c.M,x=m.type||m,typeof m=="string")m=new J(m,c);else if(m instanceof J)m.target=m.target||c;else{var j=m;m=new J(x,c),A(m,j)}if(j=!0,v)for(var z=v.length-1;0<=z;z--){var le=m.g=v[z];j=Dn(le,x,!0,m)&&j}if(le=m.g=c,j=Dn(le,x,!0,m)&&j,j=Dn(le,x,!1,m)&&j,v)for(z=0;z<v.length;z++)le=m.g=v[z],j=Dn(le,x,!1,m)&&j}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],x=0;x<v.length;x++)se(v[x]);delete c.g[m],c.h--}}this.F=null},Ue.prototype.K=function(c,m,v,x){return this.i.add(String(c),m,!1,v,x)},Ue.prototype.L=function(c,m,v,x){return this.i.add(String(c),m,!0,v,x)};function Dn(c,m,v,x){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,z=0;z<m.length;++z){var le=m[z];if(le&&!le.da&&le.capture==v){var dt=le.listener,an=le.ha||le.src;le.fa&&Ve(c.i,le),j=dt.call(an,x)!==!1&&j}}return j&&!x.defaultPrevented}function as(c,m,v){if(typeof c=="function")v&&(c=f(c,v));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Ln(c){c.g=as(()=>{c.g=null,c.i&&(c.i=!1,Ln(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Mn extends q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ln(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(c){q.call(this),this.h=c,this.g={}}y(si,q);var oi=[];function Ea(c){F(c.g,function(m,v){this.g.hasOwnProperty(v)&&K(m)},c),c.g={}}si.prototype.N=function(){si.aa.N.call(this),Ea(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=a.JSON.stringify,Od=a.JSON.parse,Dd=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ta(){}Ta.prototype.h=null;function Ld(c){return c.h||(c.h=c.i())}function ou(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sa(){J.call(this,"d")}y(Sa,J);function po(){J.call(this,"c")}y(po,J);var Sr={},Ia=null;function Ra(){return Ia=Ia||new Ue}Sr.La="serverreachability";function au(c){J.call(this,Sr.La,c)}y(au,J);function mo(c){const m=Ra();$e(m,new au(m))}Sr.STAT_EVENT="statevent";function lu(c,m){J.call(this,Sr.STAT_EVENT,c),this.stat=m}y(lu,J);function jt(c){const m=Ra();$e(m,new lu(m,c))}Sr.Ma="timingevent";function go(c,m){J.call(this,Sr.Ma,c),this.size=m}y(go,J);function ls(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function yo(){this.g=!0}yo.prototype.xa=function(){this.g=!1};function Nm(c,m,v,x,j,z){c.info(function(){if(c.g)if(z)for(var le="",dt=z.split("&"),an=0;an<dt.length;an++){var tt=dt[an].split("=");if(1<tt.length){var vn=tt[0];tt=tt[1];var wn=vn.split("_");le=2<=wn.length&&wn[1]=="type"?le+(vn+"="+tt+"&"):le+(vn+"=redacted&")}}else le=null;else le=z;return"XMLHTTP REQ ("+x+") [attempt "+j+"]: "+m+`
`+v+`
`+le})}function M(c,m,v,x,j,z,le){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+j+"]: "+m+`
`+v+`
`+z+" "+le})}function V(c,m,v,x){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+X(c,v)+(x?" "+x:"")})}function B(c,m){c.info(function(){return"TIMEOUT: "+m})}yo.prototype.info=function(){};function X(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var x=v[c];if(!(2>x.length)){var j=x[1];if(Array.isArray(j)&&!(1>j.length)){var z=j[0];if(z!="noop"&&z!="stop"&&z!="close")for(var le=1;le<j.length;le++)j[le]=""}}}}return Fn(v)}catch{return m}}var de={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function ae(){}y(ae,Ta),ae.prototype.g=function(){return new XMLHttpRequest},ae.prototype.i=function(){return{}},ke=new ae;function Ce(c,m,v,x){this.j=c,this.i=m,this.l=v,this.R=x||1,this.U=new si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ie={},Ge={};function Ze(c,m,v){c.L=1,c.v=jd(bi(m)),c.m=v,c.P=!0,at(c,null)}function at(c,m){c.F=Date.now(),mt(c),c.A=bi(c.v);var v=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),iE(v.i,"t",x),c.C=0,v=c.j.J,c.h=new we,c.g=TE(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Mn(f(c.Y,c,c.g),c.O)),m=c.U,v=c.g,x=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(oi[0]=j.toString()),j=oi);for(var z=0;z<j.length;z++){var le=gn(v,j[z],x||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),mo(),Nm(c.i,c.u,c.A,c.l,c.R,c.m)}Ce.prototype.ca=function(c){c=c.target;const m=this.M;m&&Ai(c)==3?m.j():this.Y(c)},Ce.prototype.Y=function(c){try{if(c==this.g)e:{const wn=Ai(this.g);var m=this.g.Ba();const Aa=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||dE(this.g)))){this.J||wn!=4||m==7||(m==8||0>=Aa?mo(3):mo(2)),or(this);var v=this.g.Z();this.X=v;t:if(He(this)){var x=dE(this.g);c="";var j=x.length,z=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Ir(this);var le="";break t}this.h.i=new a.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(x[m],{stream:!(z&&m==j-1)});x.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,M(this.i,this.u,this.A,this.l,this.R,wn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,an=this.g;if((dt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(dt)){var tt=dt;break t}}tt=null}if(v=tt)V(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,v);else{this.o=!1,this.s=3,jt(12),yn(this),Ir(this);break e}}if(this.P){v=!0;let jr;for(;!this.J&&this.C<le.length;)if(jr=$t(this,le),jr==Ge){wn==4&&(this.s=4,jt(14),v=!1),V(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==Ie){this.s=4,jt(15),V(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else V(this.i,this.l,jr,null),cs(this,jr);if(He(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||le.length!=0||this.h.h||(this.s=1,jt(16),v=!1),this.o=this.o&&v,!v)V(this.i,this.l,le,"[Invalid Chunked Response]"),yn(this),Ir(this);else if(0<le.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Mm(vn),vn.M=!0,jt(11))}}else V(this.i,this.l,le,null),cs(this,le);wn==4&&yn(this),this.o&&!this.J&&(wn==4?_E(this.j,this):(this.o=!1,mt(this)))}else vO(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),yn(this),Ir(this)}}}catch{}finally{}};function He(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $t(c,m){var v=c.C,x=m.indexOf(`
`,v);return x==-1?Ge:(v=Number(m.substring(v,x)),isNaN(v)?Ie:(x+=1,x+v>m.length?Ge:(m=m.slice(x,x+v),c.C=x+v,m)))}Ce.prototype.cancel=function(){this.J=!0,yn(this)};function mt(c){c.S=Date.now()+c.I,us(c,c.I)}function us(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ls(f(c.ba,c),m)}function or(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ce.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(B(this.i,this.A),this.L!=2&&(mo(),jt(17)),yn(this),this.s=2,Ir(this)):us(this,this.S-c)};function Ir(c){c.j.G==0||c.J||_E(c.j,c)}function yn(c){or(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Ea(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function cs(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||Le(v.h,c))){if(!c.K&&Le(v.h,c)&&v.G==3){try{var x=v.Da.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var j=x;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)qd(v),Hd(v);else break e;Lm(v),jt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=ls(f(v.Za,v),6e3));if(1>=wo(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else To(v,11)}else if((c.K||v.g==c)&&qd(v),!_(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let tt=j[m];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];const vn=tt[3];vn!=null&&(v.la=vn,v.j.info("VER="+v.la));const wn=tt[4];wn!=null&&(v.Aa=wn,v.j.info("SVER="+v.Aa));const Aa=tt[5];Aa!=null&&typeof Aa=="number"&&0<Aa&&(x=1.5*Aa,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const jr=c.g;if(jr){const Gd=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gd){var z=x.h;z.g||Gd.indexOf("spdy")==-1&&Gd.indexOf("quic")==-1&&Gd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ht(z,z.h),z.h=null))}if(x.D){const Fm=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Fm&&(x.ya=Fm,yt(x.I,x.D,Fm))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var le=c;if(x.qa=EE(x,x.J?x.ia:null,x.W),le.K){_n(x.h,le);var dt=le,an=x.L;an&&(dt.I=an),dt.B&&(or(dt),mt(dt)),x.g=le}else gE(x);0<v.i.length&&Wd(v)}else tt[0]!="stop"&&tt[0]!="close"||To(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?To(v,7):Dm(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}mo(4)}catch{}}var Vr=class{constructor(c,m){this.g=c,this.map=m}};function _o(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wo(c){return c.h?1:c.g?c.g.size:0}function Le(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function ht(c,m){c.g?c.g.add(m):c.h=m}function _n(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}_o.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gt(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return w(c.i)}function Ur(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],v=c.length,x=0;x<v;x++)m.push(c[x]);return m}m=[],v=0;for(x in c)m[v++]=c[x];return m}function Md(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const x in c)m[v++]=x;return m}}}function Fd(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=Md(c),x=Ur(c),j=x.length,z=0;z<j;z++)m.call(void 0,x[z],v&&v[z],c)}var Zw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oO(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var x=c[v].indexOf("="),j=null;if(0<=x){var z=c[v].substring(0,x);j=c[v].substring(x+1)}else z=c[v];m(z,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Eo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Eo){this.h=c.h,Vd(this,c.j),this.o=c.o,this.g=c.g,Ud(this,c.s),this.l=c.l;var m=c.i,v=new du;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),eE(this,v),this.m=c.m}else c&&(m=String(c).match(Zw))?(this.h=!1,Vd(this,m[1]||"",!0),this.o=uu(m[2]||""),this.g=uu(m[3]||"",!0),Ud(this,m[4]),this.l=uu(m[5]||"",!0),eE(this,m[6]||"",!0),this.m=uu(m[7]||"")):(this.h=!1,this.i=new du(null,this.h))}Eo.prototype.toString=function(){var c=[],m=this.j;m&&c.push(cu(m,tE,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(cu(m,tE,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(cu(v,v.charAt(0)=="/"?uO:lO,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",cu(v,dO)),c.join("")};function bi(c){return new Eo(c)}function Vd(c,m,v){c.j=v?uu(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Ud(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function eE(c,m,v){m instanceof du?(c.i=m,hO(c.i,c.h)):(v||(m=cu(m,cO)),c.i=new du(m,c.h))}function yt(c,m,v){c.i.set(m,v)}function jd(c){return yt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function uu(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function cu(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,aO),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tE=/[#\/\?@]/g,lO=/[#\?:]/g,uO=/[#\?]/g,cO=/[#\?@]/g,dO=/#/g;function du(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function ds(c){c.g||(c.g=new Map,c.h=0,c.i&&oO(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=du.prototype,t.add=function(c,m){ds(this),this.i=null,c=Ca(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function nE(c,m){ds(c),m=Ca(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function rE(c,m){return ds(c),m=Ca(c,m),c.g.has(m)}t.forEach=function(c,m){ds(this),this.g.forEach(function(v,x){v.forEach(function(j){c.call(m,j,x,this)},this)},this)},t.na=function(){ds(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let x=0;x<m.length;x++){const j=c[x];for(let z=0;z<j.length;z++)v.push(m[x])}return v},t.V=function(c){ds(this);let m=[];if(typeof c=="string")rE(this,c)&&(m=m.concat(this.g.get(Ca(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},t.set=function(c,m){return ds(this),this.i=null,c=Ca(this,c),rE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function iE(c,m,v){nE(c,m),0<v.length&&(c.i=null,c.g.set(Ca(c,m),w(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var x=m[v];const z=encodeURIComponent(String(x)),le=this.V(x);for(x=0;x<le.length;x++){var j=z;le[x]!==""&&(j+="="+encodeURIComponent(String(le[x]))),c.push(j)}}return this.i=c.join("&")};function Ca(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function hO(c,m){m&&!c.j&&(ds(c),c.i=null,c.g.forEach(function(v,x){var j=x.toLowerCase();x!=j&&(nE(this,x),iE(this,j,v))},c)),c.j=m}function fO(c,m){const v=new yo;if(a.Image){const x=new Image;x.onload=p(hs,v,"TestLoadImage: loaded",!0,m,x),x.onerror=p(hs,v,"TestLoadImage: error",!1,m,x),x.onabort=p(hs,v,"TestLoadImage: abort",!1,m,x),x.ontimeout=p(hs,v,"TestLoadImage: timeout",!1,m,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else m(!1)}function pO(c,m){const v=new yo,x=new AbortController,j=setTimeout(()=>{x.abort(),hs(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:x.signal}).then(z=>{clearTimeout(j),z.ok?hs(v,"TestPingServer: ok",!0,m):hs(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),hs(v,"TestPingServer: error",!1,m)})}function hs(c,m,v,x,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),x(v)}catch{}}function mO(){this.g=new Dd}function gO(c,m,v){const x=v||"";try{Fd(c,function(j,z){let le=j;u(j)&&(le=Fn(j)),m.push(x+z+"="+encodeURIComponent(le))})}catch(j){throw m.push(x+"type="+encodeURIComponent("_badmap")),j}}function $d(c){this.l=c.Ub||null,this.j=c.eb||!1}y($d,Ta),$d.prototype.g=function(){return new Bd(this.l,this.j)},$d.prototype.i=function(c){return function(){return c}}({});function Bd(c,m){Ue.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Bd,Ue),t=Bd.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,fu(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hu(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fu(this)),this.g&&(this.readyState=3,fu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function sE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?hu(this):fu(this),this.readyState==3&&sE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,hu(this))},t.Qa=function(c){this.g&&(this.response=c,hu(this))},t.ga=function(){this.g&&hu(this)};function hu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,fu(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function fu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function oE(c){let m="";return F(c,function(v,x){m+=x,m+=":",m+=v,m+=`\r
`}),m}function Om(c,m,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=oE(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):yt(c,m,v))}function Ot(c){Ue.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ot,Ue);var yO=/^https?$/i,_O=["POST","PUT"];t=Ot.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?Ld(this.o):Ld(ke),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(z){aE(this,z);return}if(c=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var j in x)v.set(j,x[j]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const z of x.keys())v.set(z,x.get(z));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(z=>z.toLowerCase()=="content-type"),j=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_O,m,void 0))||x||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,le]of v)this.g.setRequestHeader(z,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cE(this),this.u=!0,this.g.send(c),this.u=!1}catch(z){aE(this,z)}};function aE(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,lE(c),zd(c)}function lE(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),zd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zd(this,!0)),Ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uE(this):this.bb())},t.bb=function(){uE(this)};function uE(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ai(c)!=4||c.Z()!=2)){if(c.u&&Ai(c)==4)as(c.Ea,0,c);else if($e(c,"readystatechange"),Ai(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var x;if(x=le===0){var j=String(c.D).match(Zw)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),x=!yO.test(j?j.toLowerCase():"")}v=x}if(v)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var z=2<Ai(c)?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.Z()+"]",lE(c)}}finally{zd(c)}}}}function zd(c,m){if(c.g){cE(c);const v=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||$e(c,"ready");try{v.onreadystatechange=x}catch{}}}function cE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ai(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Od(m)}};function dE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vO(c){const m={};c=(c.g&&2<=Ai(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(_(c[x]))continue;var v=k(c[x]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const z=m[j]||[];m[j]=z,z.push(v)}C(m,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pu(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function hE(c){this.Aa=0,this.i=[],this.j=new yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pu("baseRetryDelayMs",5e3,c),this.cb=pu("retryDelaySeedMs",1e4,c),this.Wa=pu("forwardChannelMaxRetries",2,c),this.wa=pu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _o(c&&c.concurrentRequestLimit),this.Da=new mO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hE.prototype,t.la=8,t.G=1,t.connect=function(c,m,v,x){jt(0),this.W=c,this.H=m||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=EE(this,null,this.W),Wd(this)};function Dm(c){if(fE(c),c.G==3){var m=c.U++,v=bi(c.I);if(yt(v,"SID",c.K),yt(v,"RID",m),yt(v,"TYPE","terminate"),mu(c,v),m=new Ce(c,c.j,m),m.L=2,m.v=jd(bi(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=m.v,v=!0),v||(m.g=TE(m.j,null),m.g.ea(m.v)),m.F=Date.now(),mt(m)}wE(c)}function Hd(c){c.g&&(Mm(c),c.g.cancel(),c.g=null)}function fE(c){Hd(c),c.u&&(a.clearTimeout(c.u),c.u=null),qd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wd(c){if(!vo(c.h)&&!c.s){c.s=!0;var m=c.Ga;te||ie(),W||(te(),W=!0),Q.add(m,c),c.B=0}}function wO(c,m){return wo(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ls(f(c.Ga,c,m),vE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Ce(this,this.j,c);let z=this.o;if(this.S&&(z?(z=g(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(j.H=z,z=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=mE(this,j,m),v=bi(this.I),yt(v,"RID",c),yt(v,"CVER",22),this.D&&yt(v,"X-HTTP-Session-Id",this.D),mu(this,v),z&&(this.O?m="headers="+encodeURIComponent(String(oE(z)))+"&"+m:this.m&&Om(v,this.m,z)),ht(this.h,j),this.Ua&&yt(v,"TYPE","init"),this.P?(yt(v,"$req",m),yt(v,"SID","null"),j.T=!0,Ze(j,v,null)):Ze(j,v,m),this.G=2}}else this.G==3&&(c?pE(this,c):this.i.length==0||vo(this.h)||pE(this))};function pE(c,m){var v;m?v=m.l:v=c.U++;const x=bi(c.I);yt(x,"SID",c.K),yt(x,"RID",v),yt(x,"AID",c.T),mu(c,x),c.m&&c.o&&Om(x,c.m,c.o),v=new Ce(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=mE(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ht(c.h,v),Ze(v,x,m)}function mu(c,m){c.H&&F(c.H,function(v,x){yt(m,x,v)}),c.l&&Fd({},function(v,x){yt(m,x,v)})}function mE(c,m,v){v=Math.min(c.i.length,v);var x=c.l?f(c.l.Na,c.l,c):null;e:{var j=c.i;let z=-1;for(;;){const le=["count="+v];z==-1?0<v?(z=j[0].g,le.push("ofs="+z)):z=0:le.push("ofs="+z);let dt=!0;for(let an=0;an<v;an++){let tt=j[an].g;const vn=j[an].map;if(tt-=z,0>tt)z=Math.max(0,j[an].g-100),dt=!1;else try{gO(vn,le,"req"+tt+"_")}catch{x&&x(vn)}}if(dt){x=le.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,x}function gE(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;te||ie(),W||(te(),W=!0),Q.add(m,c),c.v=0}}function Lm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ls(f(c.Fa,c),vE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,yE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ls(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Hd(this),yE(this))};function Mm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yE(c){c.g=new Ce(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=bi(c.qa);yt(m,"RID","rpc"),yt(m,"SID",c.K),yt(m,"AID",c.T),yt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&yt(m,"TO",c.ja),yt(m,"TYPE","xmlhttp"),mu(c,m),c.m&&c.o&&Om(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=jd(bi(m)),v.m=null,v.P=!0,at(v,c)}t.Za=function(){this.C!=null&&(this.C=null,Hd(this),Lm(this),jt(19))};function qd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function _E(c,m){var v=null;if(c.g==m){qd(c),Mm(c),c.g=null;var x=2}else if(Le(c.h,m))v=m.D,_n(c.h,m),x=1;else return;if(c.G!=0){if(m.o)if(x==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;x=Ra(),$e(x,new go(x,v)),Wd(c)}else gE(c);else if(j=m.s,j==3||j==0&&0<m.X||!(x==1&&wO(c,m)||x==2&&Lm(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),j){case 1:To(c,5);break;case 4:To(c,10);break;case 3:To(c,6);break;default:To(c,2)}}}function vE(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function To(c,m){if(c.j.info("Error code "+m),m==2){var v=f(c.fb,c),x=c.Xa;const j=!x;x=new Eo(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vd(x,"https"),jd(x),j?fO(x.toString(),v):pO(x.toString(),v)}else jt(2);c.G=0,c.l&&c.l.sa(m),wE(c),fE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function wE(c){if(c.G=0,c.ka=[],c.l){const m=gt(c.h);(m.length!=0||c.i.length!=0)&&(S(c.ka,m),S(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function EE(c,m,v){var x=v instanceof Eo?bi(v):new Eo(v);if(x.g!="")m&&(x.g=m+"."+x.g),Ud(x,x.s);else{var j=a.location;x=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var z=new Eo(null);x&&Vd(z,x),m&&(z.g=m),j&&Ud(z,j),v&&(z.l=v),x=z}return v=c.D,m=c.ya,v&&m&&yt(x,v,m),yt(x,"VER",c.la),mu(c,x),x}function TE(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ot(new $d({eb:v})):new Ot(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SE(){}t=SE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kd(){}Kd.prototype.g=function(c,m){return new ar(c,m)};function ar(c,m){Ue.call(this),this.g=new hE(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!_(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!_(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ba(this)}y(ar,Ue),ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){Dm(this.g)},ar.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Fn(c),c=v);m.i.push(new Vr(m.Ya++,c)),m.G==3&&Wd(m)},ar.prototype.N=function(){this.g.l=null,delete this.j,Dm(this.g),delete this.g,ar.aa.N.call(this)};function IE(c){Sa.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}y(IE,Sa);function RE(){po.call(this),this.status=1}y(RE,po);function ba(c){this.g=c}y(ba,SE),ba.prototype.ua=function(){$e(this.g,"a")},ba.prototype.ta=function(c){$e(this.g,new IE(c))},ba.prototype.sa=function(c){$e(this.g,new RE)},ba.prototype.ra=function(){$e(this.g,"b")},Kd.prototype.createWebChannel=Kd.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,zA=function(){return new Kd},BA=function(){return Ra()},$A=Sr,o_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},de.NO_ERROR=0,de.TIMEOUT=8,de.HTTP_ERROR=6,Qh=de,Ae.COMPLETE="complete",jA=Ae,ou.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,Hu=ou,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,UA=Ot}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const $S="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new jp("@firebase/firestore");function Au(){return ea.logLevel}function Ee(t,...e){if(ea.logLevel<=We.DEBUG){const n=e.map(S0);ea.debug(`Firestore (${ql}): ${t}`,...n)}}function es(t,...e){if(ea.logLevel<=We.ERROR){const n=e.map(S0);ea.error(`Firestore (${ql}): ${t}`,...n)}}function Cl(t,...e){if(ea.logLevel<=We.WARN){const n=e.map(S0);ea.warn(`Firestore (${ql}): ${t}`,...n)}}function S0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: `+t;throw es(e),new Error(e)}function ot(t,e){t||De()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class cj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dj{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $s,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $s)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string"),new HA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new In(e)}}class hj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ot(this.o===void 0);const r=s=>{s.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string"),this.R=n.token,new pj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function nt(t,e){return t<e?-1:t>e?1:0}function bl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Zt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Zt(0,0))}static max(){return new Me(new Zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $c.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $c?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Tt extends $c{construct(e,n,r){return new Tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const yj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends $c{construct(e,n,r){return new dn(e,n,r)}static isValidIdentifier(e){return yj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Tt.fromString(e))}static fromName(e){return new xe(Tt.fromString(e).popFirst(5))}static empty(){return new xe(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Tt(e.slice()))}}function _j(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new Zt(n+1,0):new Zt(n,r));return new Gs(i,xe.empty(),e)}function vj(t){return new Gs(t.readTime,t.key,-1)}class Gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gs(Me.min(),xe.empty(),-1)}static max(){return new Gs(Me.max(),xe.empty(),-1)}}function wj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==Ej)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Sj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}I0.oe=-1;function Kp(t){return t==null}function Kf(t){return t===0&&1/t==-1/0}function Ij(t){return typeof t=="number"&&Number.isInteger(t)&&!Kf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gt=class a_{constructor(e,n){this.comparator=e,this.root=n||Bs.EMPTY}insert(e,n){return new a_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bs.BLACK,null,null))}remove(e){return new a_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}},_h=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bs=class Pi{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Pi.RED,this.left=i??Pi.EMPTY,this.right=s??Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Pi(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}};Bs.EMPTY=null,Bs.RED=!0,Bs.BLACK=!1;Bs.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zS(this.data.getIterator())}getIteratorFrom(e){return new zS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new fn(this.comparator);return n.data=e,n}}class zS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new hr([])}unionWith(e){let n=new fn(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KA("Invalid base64 string: "+s):s}}(e);return new mn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const Rj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(t){if(ot(!!t),typeof t=="string"){let e=0;const n=Rj.exec(t);if(ot(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function C0(t){const e=t.mapValue.fields.__previous_value__;return R0(e)?C0(e):e}function Bc(t){const e=Qs(t.mapValue.fields.__local_write_time__.timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class zc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?R0(t)?4:Aj(t)?9007199254740991:bj(t)?10:11:De()}function Ti(t,e){if(t===e)return!0;const n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bc(t).isEqual(Bc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Qs(i.timestampValue),a=Qs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ta(i.bytesValue).isEqual(ta(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Vt(i.geoPointValue.latitude)===Vt(s.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Vt(i.integerValue)===Vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Vt(i.doubleValue),a=Vt(s.doubleValue);return o===a?Kf(o)===Kf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bl(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(BS(o)!==BS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ti(o[l],a[l])))return!1;return!0}(t,e);default:return De()}}function Hc(t,e){return(t.values||[]).find(n=>Ti(n,e))!==void 0}function Al(t,e){if(t===e)return 0;const n=na(t),r=na(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Vt(s.integerValue||s.doubleValue),l=Vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return HS(t.timestampValue,e.timestampValue);case 4:return HS(Bc(t),Bc(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ta(s),l=ta(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=nt(a[u],l[u]);if(d!==0)return d}return nt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=nt(Vt(s.latitude),Vt(o.latitude));return a!==0?a:nt(Vt(s.longitude),Vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return WS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},f=o.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=nt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:WS(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===vh.mapValue&&o===vh.mapValue)return 0;if(s===vh.mapValue)return 1;if(o===vh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=nt(l[h],d[h]);if(f!==0)return f;const p=Al(a[l[h]],u[d[h]]);if(p!==0)return p}return nt(l.length,d.length)}(t.mapValue,e.mapValue);default:throw De()}}function HS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=Qs(t),r=Qs(e),i=nt(n.seconds,r.seconds);return i!==0?i:nt(n.nanos,r.nanos)}function WS(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Al(n[i],r[i]);if(s)return s}return nt(n.length,r.length)}function xl(t){return l_(t)}function l_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ta(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=l_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${l_(n.fields[o])}`;return i+"}"}(t.mapValue):De()}function qS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u_(t){return!!t&&"integerValue"in t}function b0(t){return!!t&&"arrayValue"in t}function KS(t){return!!t&&"nullValue"in t}function GS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yh(t){return!!t&&"mapValue"in t}function bj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Aj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=dn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ma(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jn(sc(this.value))}}function GA(t){const e=[];return ma(t.fields,(n,r)=>{const i=new dn([n]);if(Yh(r)){const s=GA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Cn(e,0,Me.min(),Me.min(),Me.min(),Jn.empty(),0)}static newFoundDocument(e,n,r,i){return new Cn(e,1,n,Me.min(),r,i,0)}static newNoDocument(e,n){return new Cn(e,2,n,Me.min(),Me.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,Me.min(),Me.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.position=e,this.inclusive=n}}function QS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),n.key):r=Al(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{}class Wt extends QA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kj(e,n,r):n==="array-contains"?new Dj(e,r):n==="in"?new Lj(e,r):n==="not-in"?new Mj(e,r):n==="array-contains-any"?new Fj(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nj(e,r):new Oj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Al(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(Al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends QA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ni(e,n)}matches(e){return YA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function YA(t){return t.op==="and"}function XA(t){return Pj(t)&&YA(t)}function Pj(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function c_(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+xl(t.value);if(XA(t))return t.filters.map(e=>c_(e)).join(",");{const e=t.filters.map(n=>c_(n)).join(",");return`${t.op}(${e})`}}function JA(t,e){return t instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.field.isEqual(i.field)&&Ti(r.value,i.value)}(t,e):t instanceof ni?function(r,i){return i instanceof ni&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JA(o,i.filters[a]),!0):!1}(t,e):void De()}function ZA(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${xl(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(ZA).join(" ,")+"}"}(t):"Filter"}class kj extends Wt{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nj extends Wt{constructor(e,n){super(e,"in",n),this.keys=ex("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Oj extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=ex("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ex(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class Dj extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return b0(n)&&Hc(n.arrayValue,this.value)}}class Lj extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hc(this.value.arrayValue,n)}}class Mj extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hc(this.value.arrayValue,n)}}class Fj extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!b0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function XS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vj(t,e,n,r,i,s,o)}function A0(t){const e=Fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>c_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Kp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xl(r)).join(",")),e.ue=n}return e.ue}function x0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YS(t.startAt,e.startAt)&&YS(t.endAt,e.endAt)}function d_(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Uj(t,e,n,r,i,s,o,a){return new Kl(t,e,n,r,i,s,o,a)}function tx(t){return new Kl(t)}function JS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nx(t){return t.collectionGroup!==null}function oc(t){const e=Fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fn(dn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wc(s,r))}),n.has(dn.keyField().canonicalString())||e.ce.push(new Wc(dn.keyField(),r))}return e.ce}function vi(t){const e=Fe(t);return e.le||(e.le=jj(e,oc(t))),e.le}function jj(t,e){if(t.limitType==="F")return XS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wc(i.field,s)});const n=t.endAt?new Gf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gf(t.startAt.position,t.startAt.inclusive):null;return XS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function h_(t,e){const n=t.filters.concat([e]);return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qf(t,e,n){return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gp(t,e){return x0(vi(t),vi(e))&&t.limitType===e.limitType}function rx(t){return`${A0(vi(t))}|lt:${t.limitType}`}function Ma(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZA(i)).join(", ")}]`),Kp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xl(i)).join(",")),`Target(${r})`}(vi(t))}; limitType=${t.limitType})`}function Qp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of oc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=QS(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,oc(r),i)||r.endAt&&!function(o,a,l){const u=QS(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,oc(r),i))}(t,e)}function $j(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ix(t){return(e,n)=>{let r=!1;for(const i of oc(t)){const s=Bj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Bj(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Al(l,u):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=new Gt(xe.comparator);function ts(){return zj}const sx=new Gt(xe.comparator);function Wu(...t){let e=sx;for(const n of t)e=e.insert(n.key,n);return e}function ox(t){let e=sx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Do(){return ac()}function ax(){return ac()}function ac(){return new Gl(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hj=new Gt(xe.comparator),Wj=new fn(xe.comparator);function qe(...t){let e=Wj;for(const n of t)e=e.add(n);return e}const qj=new fn(nt);function Kj(){return qj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kf(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function Gj(t,e){return Ij(e)?lx(e):P0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this._=void 0}}function Qj(t,e,n){return t instanceof Yf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&R0(s)&&(s=C0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Pl?cx(t,e):t instanceof qc?dx(t,e):function(i,s){const o=ux(i,s),a=ZS(o)+ZS(i.Pe);return u_(o)&&u_(i.Pe)?lx(a):P0(i.serializer,a)}(t,e)}function Yj(t,e,n){return t instanceof Pl?cx(t,e):t instanceof qc?dx(t,e):n}function ux(t,e){return t instanceof Xf?function(r){return u_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yf extends Yp{}class Pl extends Yp{constructor(e){super(),this.elements=e}}function cx(t,e){const n=hx(e);for(const r of t.elements)n.some(i=>Ti(i,r))||n.push(r);return{arrayValue:{values:n}}}class qc extends Yp{constructor(e){super(),this.elements=e}}function dx(t,e){let n=hx(e);for(const r of t.elements)n=n.filter(i=>!Ti(i,r));return{arrayValue:{values:n}}}class Xf extends Yp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZS(t){return Vt(t.integerValue||t.doubleValue)}function hx(t){return b0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n){this.field=e,this.transform=n}}function Jj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Pl&&i instanceof Pl||r instanceof qc&&i instanceof qc?bl(r.elements,i.elements,Ti):r instanceof Xf&&i instanceof Xf?Ti(r.Pe,i.Pe):r instanceof Yf&&i instanceof Yf}(t.transform,e.transform)}class Zj{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xp{}function fx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mx(t.key,wi.none()):new pd(t.key,t.data,wi.none());{const n=t.data,r=Jn.empty();let i=new fn(dn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new co(t.key,r,new hr(i.toArray()),wi.none())}}function e$(t,e,n){t instanceof pd?function(i,s,o){const a=i.value.clone(),l=t1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof co?function(i,s,o){if(!Xh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=t1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(px(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof pd?function(s,o,a,l){if(!Xh(s.precondition,o))return a;const u=s.value.clone(),d=n1(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof co?function(s,o,a,l){if(!Xh(s.precondition,o))return a;const u=n1(s.fieldTransforms,l,o),d=o.data;return d.setAll(px(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Xh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function t$(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ux(r.transform,i||null);s!=null&&(n===null&&(n=Jn.empty()),n.set(r.field,s))}return n||null}function e1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bl(r,i,(s,o)=>Jj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pd extends Xp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class co extends Xp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function px(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function t1(t,e,n){const r=new Map;ot(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Yj(o,a,n[i]))}return r}function n1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Qj(s,o,e))}return r}class mx extends Xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n$ extends Xp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&e$(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ax();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=fx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,(n,r)=>e1(n,r))&&bl(this.baseMutations,e.baseMutations,(n,r)=>e1(n,r))}}class k0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ot(e.mutations.length===r.length);let i=function(){return Hj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new k0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ye;function o$(t){switch(t){default:return De();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function gx(t){if(t===void 0)return es("GRPC error has no .code"),Y.UNKNOWN;switch(t){case Bt.OK:return Y.OK;case Bt.CANCELLED:return Y.CANCELLED;case Bt.UNKNOWN:return Y.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Y.INTERNAL;case Bt.UNAVAILABLE:return Y.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Y.NOT_FOUND;case Bt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Bt.ABORTED:return Y.ABORTED;case Bt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Bt.DATA_LOSS:return Y.DATA_LOSS;default:return De()}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=new Bo([4294967295,4294967295],0);function r1(t){const e=a$().encode(t),n=new VA;return n.update(e),new Uint8Array(n.digest())}function i1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bo([n,r],0),new Bo([i,s],0)]}class N0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qu(`Invalid padding: ${n}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Bo.fromNumber(r)));return i.compare(l$)===1&&(i=new Bo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=r1(e),[r,i]=i1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new N0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=r1(e),[r,i]=i1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jp(Me.min(),i,new Gt(nt),ts(),qe())}}class md{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new md(r,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class yx{constructor(e,n){this.targetId=e,this.me=n}}class _x{constructor(e,n,r=mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class s1{constructor(){this.fe=0,this.ge=a1(),this.pe=mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qe(),n=qe(),r=qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:De()}}),new md(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=a1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class u${constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=o1(),this.Qe=new Gt(nt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(d_(s))if(r===0){const o=new xe(s.path);this.Ue(n,o,Cn.newNoDocument(o,Me.min()))}else ot(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ta(r).toUint8Array()}catch(l){if(l instanceof KA)return Cl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new N0(o,i,s)}catch(l){return Cl(l instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&d_(a.target)){const l=new xe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Cn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=qe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Jp(e,n,this.Qe,this.ke,r);return this.ke=ts(),this.qe=o1(),this.Qe=new Gt(nt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new s1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new fn(nt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new s1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function o1(){return new Gt(xe.comparator)}function a1(){return new Gt(xe.comparator)}const c$={asc:"ASCENDING",desc:"DESCENDING"},d$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h$={and:"AND",or:"OR"};class f${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function f_(t,e){return t.useProto3Json||Kp(e)?e:{value:e}}function Jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p$(t,e){return Jf(t,e.toTimestamp())}function Ei(t){return ot(!!t),Me.fromTimestamp(function(n){const r=Qs(n);return new Zt(r.seconds,r.nanos)}(t))}function O0(t,e){return p_(t,e).canonicalString()}function p_(t,e){const n=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wx(t){const e=Tt.fromString(t);return ot(Rx(e)),e}function m_(t,e){return O0(t.databaseId,e.path)}function Ig(t,e){const n=wx(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(Tx(n))}function Ex(t,e){return O0(t.databaseId,e)}function m$(t){const e=wx(t);return e.length===4?Tt.emptyPath():Tx(e)}function g_(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tx(t){return ot(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function l1(t,e,n){return{name:m_(t,e),fields:n.value.mapValue.fields}}function g$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ot(d===void 0||typeof d=="string"),mn.fromBase64String(d||"")):(ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array),mn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?Y.UNKNOWN:gx(u.code);return new ge(d,u.message||"")}(o);n=new _x(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ig(t,r.document.name),s=Ei(r.document.updateTime),o=r.document.createTime?Ei(r.document.createTime):Me.min(),a=new Jn({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Jh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ig(t,r.document),s=r.readTime?Ei(r.readTime):Me.min(),o=Cn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Jh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ig(t,r.document),s=r.removedTargetIds||[];n=new Jh([],s,i,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new s$(i,s),a=r.targetId;n=new yx(a,o)}}return n}function y$(t,e){let n;if(e instanceof pd)n={update:l1(t,e.key,e.value)};else if(e instanceof mx)n={delete:m_(t,e.key)};else if(e instanceof co)n={update:l1(t,e.key,e.data),updateMask:C$(e.fieldMask)};else{if(!(e instanceof n$))return De();n={verify:m_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:De()}(t,e.precondition)),n}function _$(t,e){return t&&t.length>0?(ot(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ei(i.updateTime):Ei(s);return o.isEqual(Me.min())&&(o=Ei(s)),new Zj(o,i.transformResults||[])}(n,e))):[]}function v$(t,e){return{documents:[Ex(t,e.path)]}}function w$(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ex(t,i);const s=function(u){if(u.length!==0)return Ix(ni.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Fa(f.field),direction:S$(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=f_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function E$(t){let e=m$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ot(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=Sx(h);return f instanceof ni&&XA(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(y){return new Wc(Va(y.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Kp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new Gf(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,p=h.values||[];return new Gf(p,f)}(n.endAt)),Uj(e,i,o,s,a,"F",l,u)}function T$(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Va(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Va(n.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Va(n.unaryFilter.field);return Wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Va(n.unaryFilter.field);return Wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(Va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(r=>Sx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function S$(t){return c$[t]}function I$(t){return d$[t]}function R$(t){return h$[t]}function Fa(t){return{fieldPath:t.canonicalString()}}function Va(t){return dn.fromServerFormat(t.fieldPath)}function Ix(t){return t instanceof Wt?function(n){if(n.op==="=="){if(GS(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NAN"}};if(KS(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GS(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NAN"}};if(KS(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(n.field),op:I$(n.op),value:n.value}}}(t):t instanceof ni?function(n){const r=n.getFilters().map(i=>Ix(i));return r.length===1?r[0]:{compositeFilter:{op:R$(n.op),filters:r}}}(t):De()}function C$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Rx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r,i,s=Me.min(),o=Me.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.ct=e}}function A$(t){const e=E$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.un=new P$}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Gs.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class P${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fn(Tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new kl(0)}static kn(){return new kl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(){this.changes=new Gl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lc(r.mutation,i,hr.empty(),Zt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qe()){const i=Do();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Wu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Do();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ts();const o=ac(),a=function(){return ac()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof co)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),lc(d.mutation,u,d.mutation.getFieldMask(),Zt.now())):o.set(u.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new N$(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ac();let i=new Gt((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||hr.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||qe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=ax();d.forEach(f=>{if(!s.has(f)){const p=fx(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return xe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Z.resolve(Do());let a=-1,l=s;return o.next(u=>Z.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?Z.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,qe())).next(d=>({batchId:a,changes:ox(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Wu();return this.indexManager.getCollectionParents(e,s).next(a=>Z.forEach(a,l=>{const u=function(h,f){return new Kl(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Cn.newInvalidDocument(d)))});let a=Wu();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&lc(d.mutation,u,hr.empty(),Zt.now()),Qp(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ei(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:A$(i.bundledQuery),readTime:Ei(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.overlays=new Gt(xe.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Do();return Z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=Do(),s=n.length+1,o=new xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Gt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Do(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Do(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return Z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new i$(n,r));let s=this.Ir.get(n);s===void 0&&(s=qe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.Tr=new fn(tn.Er),this.dr=new fn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new xe(new Tt([])),r=new tn(n,e),i=new tn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new xe(new Tt([])),r=new tn(n,e),i=new tn(n,e+1);let s=qe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return xe.comparator(e.key,n.key)||nt(e.wr,n.wr)}static Ar(e,n){return nt(e.wr,n.wr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fn(tn.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r$(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new tn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fn(nt);return n.forEach(i=>{const s=new tn(i,0),o=new tn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;xe.isDocumentKey(s)||(s=s.child(""));const o=new tn(new xe(s),0);let a=new fn(nt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ot(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Z.forEach(n.mutations,i=>{const s=new tn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tn(n,0),i=this.br.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.Mr=e,this.docs=function(){return new Gt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let r=ts();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cn.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ts();const o=n.path,a=new xe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wj(vj(d),r)<=0||(i.has(d.key)||Qp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){De()}Or(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U$(this)}getSize(e){return Z.resolve(this.size)}}class U$ extends k${constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.persistence=e,this.Nr=new Gl(n=>A0(n),x0),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new D0,this.targetCount=0,this.kr=kl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new kl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(s).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n){this.qr={},this.overlays={},this.Qr=new I0(0),this.Kr=!1,this.Kr=!0,this.$r=new M$,this.referenceDelegate=e(this),this.Ur=new j$(this),this.indexManager=new x$,this.remoteDocumentCache=function(i){return new V$(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new b$(n),this.Gr=new D$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new F$(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new B$(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class B$ extends Tj{constructor(e){super(),this.currentSequenceNumber=e}}class L0{constructor(e){this.persistence=e,this.Jr=new D0,this.Yr=null}static Zr(e){return new L0(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,r=>{const i=xe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=qe(),i=qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new M0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dF()?8:Sj(On())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new z$;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Au()<=We.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Au()<=We.DEBUG&&Ee("QueryEngine","Query:",Ma(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Au()<=We.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):Z.resolve())}Yi(e,n){if(JS(n))return Z.resolve(null);let r=vi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qf(n,null,"F"),r=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=qe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Qf(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return JS(n)||i.isEqual(Me.min())?Z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Z.resolve(null):(Au()<=We.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ma(n)),this.rs(e,o,n,_j(i,-1)).next(a=>a))})}ts(e,n){let r=new fn(ix(e));return n.forEach((i,s)=>{Qp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Au()<=We.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Ma(n)),this.Ji.getDocumentsMatchingQuery(e,n,Gs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Gt(nt),this._s=new Gl(s=>A0(s),x0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O$(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function q$(t,e,n,r){return new W$(t,e,n,r)}async function Cx(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=qe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function K$(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let p=Z.resolve();return f.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(w=>{const S=u.docVersions.get(y);ot(S!==null),w.version.compareTo(S)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=qe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bx(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function G$(t,e){const n=Fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(mn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(w,S,T){return w.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,p,d)&&a.push(n.Ur.updateTargetData(s,p))});let l=ts(),u=qe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Q$(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Me.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function Q$(t,e,n){let r=qe(),i=qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ts();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Y$(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X$(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ps(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function y_(t,e,n){const r=Fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fd(o))throw o;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function u1(t,e,n){const r=Fe(t);let i=Me.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=Fe(l),f=h._s.get(d);return f!==void 0?Z.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(r,o,vi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Me.min(),n?s:qe())).next(a=>(J$(r,$j(e),a),{documents:a,Ts:s})))}function J$(t,e,n){let r=t.us.get(e)||Me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class c1{constructor(){this.activeTargetIds=Kj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z${constructor(){this.so=new c1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new c1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function Rg(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class r3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Rg(),l=this.xo(n,r.toUriEncodedString());Ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(Ee("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Cl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ql}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=t3[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Rg();return new Promise((o,a)=>{const l=new UA;l.setWithCredentials(!0),l.listenOnce(jA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qh.NO_ERROR:const d=l.getResponseJson();Ee(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Qh.TIMEOUT:Ee(Sn,`RPC '${e}' ${s} timed out`),a(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const h=l.getStatus();if(Ee(Sn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(T)>=0?T:Y.UNKNOWN}(p.status);a(new ge(y,p.message))}else a(new ge(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{Ee(Sn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ee(Sn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Rg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zA(),a=BA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Ee(Sn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,p=!1;const y=new n3({Io:S=>{p?Ee(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(Ee(Sn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),Ee(Sn,`RPC '${e}' stream ${i} sending:`,S),h.send(S))},To:()=>h.close()}),w=(S,T,_)=>{S.listen(T,E=>{try{_(E)}catch(b){setTimeout(()=>{throw b},0)}})};return w(h,Hu.EventType.OPEN,()=>{p||(Ee(Sn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),w(h,Hu.EventType.CLOSE,()=>{p||(p=!0,Ee(Sn,`RPC '${e}' stream ${i} transport closed`),y.So())}),w(h,Hu.EventType.ERROR,S=>{p||(p=!0,Cl(Sn,`RPC '${e}' stream ${i} transport errored:`,S),y.So(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),w(h,Hu.EventType.MESSAGE,S=>{var T;if(!p){const _=S.data[0];ot(!!_);const E=_,b=E.error||((T=E[0])===null||T===void 0?void 0:T.error);if(b){Ee(Sn,`RPC '${e}' stream ${i} received error:`,b);const O=b.status;let F=function(R){const A=Bt[R];if(A!==void 0)return gx(A)}(O),C=b.message;F===void 0&&(F=Y.INTERNAL,C="Unknown error status: "+O+" with message "+b.message),p=!0,y.So(new ge(F,C)),h.close()}else Ee(Sn,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),w(a,$A.STAT_EVENT,S=>{S.stat===o_.PROXY?Ee(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===o_.NOPROXY&&Ee(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Cg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return new f$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ax(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ge(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i3 extends xx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=g$(this.serializer,e),r=function(s){if(!("targetChange"in s))return Me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?Ei(o.readTime):Me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=g_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=d_(l)?{documents:v$(s,l)}:{query:w$(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vx(s,o.resumeToken);const u=f_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Jf(s,o.snapshotVersion.toTimestamp());const u=f_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=T$(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=g_(this.serializer),n.removeTarget=e,this.a_(n)}}class s3 extends xx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_$(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=g_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>y$(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,p_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Y.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,p_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Y.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class a3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(es(n),this.D_=!1):Ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ga(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Fe(l);u.L_.add(4),await gd(u),u.q_.set("Unknown"),u.L_.delete(4),await em(u)}(this))})}),this.q_=new a3(r,i)}}async function em(t){if(ga(t))for(const e of t.B_)await e(!0)}async function gd(t){for(const e of t.B_)await e(!1)}function Px(t,e){const n=Fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),j0(n)?U0(n):Ql(n).r_()&&V0(n,e))}function F0(t,e){const n=Fe(t),r=Ql(n);n.N_.delete(e),r.r_()&&kx(n,e),n.N_.size===0&&(r.r_()?r.o_():ga(n)&&n.q_.set("Unknown"))}function V0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(t).A_(e)}function kx(t,e){t.Q_.xe(e),Ql(t).R_(e)}function U0(t){t.Q_=new u$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ql(t).start(),t.q_.v_()}function j0(t){return ga(t)&&!Ql(t).n_()&&t.N_.size>0}function ga(t){return Fe(t).L_.size===0}function Nx(t){t.Q_=void 0}async function u3(t){t.q_.set("Online")}async function c3(t){t.N_.forEach((e,n)=>{V0(t,e)})}async function d3(t,e){Nx(t),j0(t)?(t.q_.M_(e),U0(t)):t.q_.set("Unknown")}async function h3(t,e,n){if(t.q_.set("Online"),e instanceof _x&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zf(t,r)}else if(e instanceof Jh?t.Q_.Ke(e):e instanceof yx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const r=await bx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(mn.EMPTY_BYTE_STRING,d.snapshotVersion)),kx(s,l);const h=new Ps(d.target,l,u,d.sequenceNumber);V0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ee("RemoteStore","Failed to raise snapshot:",r),await Zf(t,r)}}async function Zf(t,e,n){if(!fd(e))throw e;t.L_.add(1),await gd(t),t.q_.set("Offline"),n||(n=()=>bx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await em(t)})}function Ox(t,e){return e().catch(n=>Zf(t,n,e))}async function tm(t){const e=Fe(t),n=Ys(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;f3(e);)try{const i=await Y$(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,p3(e,i)}catch(i){await Zf(e,i)}Dx(e)&&Lx(e)}function f3(t){return ga(t)&&t.O_.length<10}function p3(t,e){t.O_.push(e);const n=Ys(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Dx(t){return ga(t)&&!Ys(t).n_()&&t.O_.length>0}function Lx(t){Ys(t).start()}async function m3(t){Ys(t).p_()}async function g3(t){const e=Ys(t);for(const n of t.O_)e.m_(n.mutations)}async function y3(t,e,n){const r=t.O_.shift(),i=k0.from(r,e,n);await Ox(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tm(t)}async function _3(t,e){e&&Ys(t).V_&&await async function(r,i){if(function(o){return o$(o)&&o!==Y.ABORTED}(i.code)){const s=r.O_.shift();Ys(r).s_(),await Ox(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await tm(r)}}(t,e),Dx(t)&&Lx(t)}async function h1(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const r=ga(n);n.L_.add(3),await gd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await em(n)}async function v3(t,e){const n=Fe(t);e?(n.L_.delete(2),await em(n)):e||(n.L_.add(2),await gd(n),n.q_.set("Unknown"))}function Ql(t){return t.K_||(t.K_=function(n,r,i){const s=Fe(n);return s.w_(),new i3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:u3.bind(null,t),Ro:c3.bind(null,t),mo:d3.bind(null,t),d_:h3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),j0(t)?U0(t):t.q_.set("Unknown")):(await t.K_.stop(),Nx(t))})),t.K_}function Ys(t){return t.U_||(t.U_=function(n,r,i){const s=Fe(n);return s.w_(),new s3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:m3.bind(null,t),mo:_3.bind(null,t),f_:g3.bind(null,t),g_:y3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await tm(t)):(await t.U_.stop(),t.O_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new $0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B0(t,e){if(es("AsyncQueue",`${e}: ${t}`),fd(t))return new ge(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Wu(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.W_=new Gt(xe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nl(e,n,dl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class E3{constructor(){this.queries=p1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Fe(n),s=i.queries;i.queries=p1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function p1(){return new Gl(t=>rx(t),Gp)}async function T3(t,e){const n=Fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new w3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=B0(o,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&z0(n)}async function S3(t,e){const n=Fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I3(t,e){const n=Fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&z0(n)}function R3(t,e,n){const r=Fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function z0(t){t.Y_.forEach(e=>{e.next()})}var __,m1;(m1=__||(__={})).ea="default",m1.Cache="cache";class C3{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==__.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.key=e}}class Fx{constructor(e){this.key=e}}class b3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qe(),this.mutatedKeys=qe(),this.Aa=ix(e),this.Ra=new dl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new f1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),p=Qp(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let S=!1;f&&p?f.data.isEqual(p.data)?y!==w&&(r.track({type:3,doc:p}),S=!0):this.ga(f,p)||(r.track({type:2,doc:p}),S=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),S=!0):f&&!p&&(r.track({type:1,doc:f}),S=!0,(l||u)&&(a=!0)),S&&(p?(o=o.add(p),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(p,y){const w=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return w(p)-w(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Nl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new f1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Fx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Mx(r))}),n}ba(e){this.Ta=e.Ts,this.da=qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Nl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class A3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class x3{constructor(e){this.key=e,this.va=!1}}class P3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gl(a=>rx(a),Gp),this.Ma=new Map,this.xa=new Set,this.Oa=new Gt(xe.comparator),this.Na=new Map,this.La=new D0,this.Ba={},this.ka=new Map,this.qa=kl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function k3(t,e,n=!0){const r=zx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Vx(r,e,n,!0),i}async function N3(t,e){const n=zx(t);await Vx(n,e,!0,!1)}async function Vx(t,e,n,r){const i=await X$(t.localStore,vi(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await O3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Px(t.remoteStore,i),a}async function O3(t,e,n,r,i){t.Ka=(h,f,p)=>async function(w,S,T,_){let E=S.view.ma(T);E.ns&&(E=await u1(w.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,E)));const b=_&&_.targetChanges.get(S.targetId),O=_&&_.targetMismatches.get(S.targetId)!=null,F=S.view.applyChanges(E,w.isPrimaryClient,b,O);return y1(w,S.targetId,F.wa),F.snapshot}(t,h,f,p);const s=await u1(t.localStore,e,!0),o=new b3(e,s.Ts),a=o.ma(s.documents),l=md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);y1(t,n,u.wa);const d=new A3(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function D3(t,e,n){const r=Fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Gp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await y_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&F0(r.remoteStore,i.targetId),v_(r,i.targetId)}).catch(hd)):(v_(r,i.targetId),await y_(r.localStore,i.targetId,!0))}async function L3(t,e){const n=Fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F0(n.remoteStore,r.targetId))}async function M3(t,e,n){const r=z3(t);try{const i=await function(o,a){const l=Fe(o),u=Zt.now(),d=a.reduce((p,y)=>p.add(y.key),qe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=ts(),w=qe();return l.cs.getEntries(p,d).next(S=>{y=S,y.forEach((T,_)=>{_.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(S=>{h=S;const T=[];for(const _ of a){const E=t$(_,h.get(_.key).overlayedDocument);E!=null&&T.push(new co(_.key,E,GA(E.value.mapValue),wi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,T,a)}).next(S=>{f=S;const T=S.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(p,S.batchId,T)})}).then(()=>({batchId:f.batchId,changes:ox(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Gt(nt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await yd(r,i.changes),await tm(r.remoteStore)}catch(i){const s=B0(i,"Failed to persist write");n.reject(s)}}async function Ux(t,e){const n=Fe(t);try{const r=await G$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ot(o.va):i.removedDocuments.size>0&&(ot(o.va),o.va=!1))}),await yd(n,r,e)}catch(r){await hd(r)}}function g1(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Fe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&z0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F3(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Gt(xe.comparator);o=o.insert(s,Cn.newNoDocument(s,Me.min()));const a=qe().add(s),l=new Jp(Me.min(),new Map,new Gt(nt),o,a);await Ux(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),H0(r)}else await y_(r.localStore,e,!1).then(()=>v_(r,e,n)).catch(hd)}async function V3(t,e){const n=Fe(t),r=e.batch.batchId;try{const i=await K$(n.localStore,e);$x(n,r,null),jx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yd(n,i)}catch(i){await hd(i)}}async function U3(t,e,n){const r=Fe(t);try{const i=await function(o,a){const l=Fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ot(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);$x(r,e,n),jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yd(r,i)}catch(i){await hd(i)}}function jx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $x(t,e,n){const r=Fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function v_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Bx(t,r)})}function Bx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(F0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),H0(t))}function y1(t,e,n){for(const r of n)r instanceof Mx?(t.La.addReference(r.key,e),j3(t,r)):r instanceof Fx?(Ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Bx(t,r.key)):De()}function j3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),H0(t))}function H0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new xe(Tt.fromString(e)),r=t.qa.next();t.Na.set(r,new x3(n)),t.Oa=t.Oa.insert(n,r),Px(t.remoteStore,new Ps(vi(tx(n.path)),r,"TargetPurposeLimboResolution",I0.oe))}}async function yd(t,e,n){const r=Fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=M0.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=Fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Z.forEach(u,f=>Z.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>Z.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!fd(h))throw h;Ee("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const p=d.os.get(f),y=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,w)}}}(r.localStore,s))}async function $3(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const r=await Cx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ge(Y.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yd(n,r.hs)}}function B3(t,e){const n=Fe(t),r=n.Na.get(e);if(r&&r.va)return qe().add(r.key);{let i=qe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function zx(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ux.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F3.bind(null,e),e.Ca.d_=I3.bind(null,e.eventManager),e.Ca.$a=R3.bind(null,e.eventManager),e}function z3(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U3.bind(null,e),e}class ep{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return q$(this.persistence,new H$,e.initialUser,this.serializer)}Ga(e){return new $$(L0.Zr,this.serializer)}Wa(e){return new Z$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ep.provider={build:()=>new ep};class w_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$3.bind(null,this.syncEngine),await v3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E3}()}createDatastore(e){const n=Zp(e.databaseInfo.databaseId),r=function(s){return new r3(s)}(e.databaseInfo);return function(s,o,a,l){return new o3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new l3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>g1(this.syncEngine,n,0),function(){return d1.D()?new d1:new e3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new P3(i,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Fe(i);Ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}w_.provider={build:()=>new w_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=WA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=B0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bg(t,e){t.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Cx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q3(t);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>h1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>h1(e.remoteStore,i)),t._onlineComponents=e}async function q3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await bg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Y.FAILED_PRECONDITION||i.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Cl("Error using user provided cache. Falling back to memory cache: "+n),await bg(t,new ep)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await bg(t,new ep);return t._offlineComponents}async function Hx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await _1(t,t._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await _1(t,new w_))),t._onlineComponents}function K3(t){return Hx(t).then(e=>e.syncEngine)}async function G3(t){const e=await Hx(t),n=e.eventManager;return n.onListen=k3.bind(null,e.syncEngine),n.onUnlisten=D3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L3.bind(null,e.syncEngine),n}function Q3(t,e,n={}){const r=new $s;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new H3({next:f=>{d.Za(),o.enqueueAndForget(()=>S3(s,h)),f.fromCache&&l.source==="server"?u.reject(new ge(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new C3(a,d,{includeMetadataChanges:!0,_a:!0});return T3(s,h)}(await G3(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e,n){if(!n)throw new ge(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y3(t,e,n,r){if(e===!0&&r===!0)throw new ge(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w1(t){if(!xe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E1(t){if(xe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function Ol(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nm(t);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uj;switch(r.type){case"firstParty":return new fj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v1.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),v1.delete(n),r.terminate())}(this),Promise.resolve()}}function X3(t,e,n,r={}){var i;const s=(t=Ol(t,rm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=In.MOCK_USER;else{a=Hb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new In(u)}t._authCredentials=new cj(new HA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ho(this.firestore,e,this._query)}}class gr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class zs extends ho{constructor(e,n,r){super(e,n,tx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new xe(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function im(t,e,...n){if(t=It(t),qx("collection","path",e),t instanceof rm){const r=Tt.fromString(e,...n);return E1(r),new zs(t,null,r)}{if(!(t instanceof gr||t instanceof zs))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return E1(r),new zs(t.firestore,null,r)}}function Kx(t,e,...n){if(t=It(t),arguments.length===1&&(e=WA.newId()),qx("doc","path",e),t instanceof rm){const r=Tt.fromString(e,...n);return w1(r),new gr(t,null,new xe(r))}{if(!(t instanceof gr||t instanceof zs))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return w1(r),new gr(t.firestore,t instanceof zs?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ax(this,"async_queue_retry"),this.Vu=()=>{const r=Cg();r&&Ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $s;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fd(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw es("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=$0.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class sm extends rm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new S1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S1(e),this._firestoreClient=void 0,await e}}}function J3(t,e){const n=typeof t=="object"?t:d0(),r=typeof t=="string"?t:"(default)",i=$p(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$b("firestore");s&&X3(i,...s)}return i}function Gx(t){if(t._terminated)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Z3(t),t._firestoreClient}function Z3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new Cj(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Wx(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new W3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(mn.fromBase64String(e))}catch(n){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dl(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^__.*__$/;class t6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new pd(e,this.data,n,this.fieldTransforms)}}class Qx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class lm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Yx(this.Cu)&&e6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class n6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zp(e)}Qu(e,n,r,i=!1){return new lm({Cu:e,methodName:n,qu:r,path:dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K0(t){const e=t._freezeSettings(),n=Zp(t._databaseId);return new n6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r6(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Q0("Data must be an object, but it was:",o,r);const a=Xx(r,o);let l,u;if(s.merge)l=new hr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=E_(e,h,n);if(!o.contains(f))throw new ge(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Zx(d,f)||d.push(f)}l=new hr(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new t6(new Jn(a),l,u)}class um extends am{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}function i6(t,e,n){return new lm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class G0 extends am{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=i6(this,e,!0),r=this.Ku.map(s=>Yl(s,n)),i=new Pl(r);return new Xj(e.path,i)}isEqual(e){return e instanceof G0&&Mc(this.Ku,e.Ku)}}function s6(t,e,n,r){const i=t.Qu(1,e,n);Q0("Data must be an object, but it was:",i,r);const s=[],o=Jn.empty();ma(r,(l,u)=>{const d=Y0(e,l,n);u=It(u);const h=i.Nu(d);if(u instanceof um)s.push(d);else{const f=Yl(u,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new hr(s);return new Qx(o,a,i.fieldTransforms)}function o6(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[E_(e,r,n)],l=[i];if(s.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(E_(e,s[f])),l.push(s[f+1]);const u=[],d=Jn.empty();for(let f=a.length-1;f>=0;--f)if(!Zx(u,a[f])){const p=a[f];let y=l[f];y=It(y);const w=o.Nu(p);if(y instanceof um)u.push(p);else{const S=Yl(y,w);S!=null&&(u.push(p),d.set(p,S))}}const h=new hr(u);return new Qx(d,h,o.fieldTransforms)}function a6(t,e,n,r=!1){return Yl(n,t.Qu(r?4:3,e))}function Yl(t,e){if(Jx(t=It(t)))return Q0("Unsupported field value:",e,t),Xx(t,e);if(t instanceof am)return function(r,i){if(!Yx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Yl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Zt.fromDate(r);return{timestampValue:Jf(i.serializer,s)}}if(r instanceof Zt){const s=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jf(i.serializer,s)}}if(r instanceof W0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dl)return{bytesValue:vx(i.serializer,r._byteString)};if(r instanceof gr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:O0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof q0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return P0(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${nm(r)}`)}(t,e)}function Xx(t,e){const n={};return qA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(t,(r,i)=>{const s=Yl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Jx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zt||t instanceof W0||t instanceof Dl||t instanceof gr||t instanceof am||t instanceof q0)}function Q0(t,e,n){if(!Jx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=nm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function E_(t,e,n){if((e=It(e))instanceof om)return e._internalPath;if(typeof e=="string")return Y0(t,e);throw tp("Field path arguments must be of type string or ",t,!1,void 0,n)}const l6=new RegExp("[~\\*/\\[\\]]");function Y0(t,e,n){if(e.search(l6)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new om(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ge(Y.INVALID_ARGUMENT,a+t+l)}function Zx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u6 extends eP{data(){return super.data()}}function cm(t,e){return typeof e=="string"?Y0(t,e):e instanceof om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class J0 extends X0{}function tP(t,e,...n){let r=[];e instanceof X0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Z0).length,a=s.filter(l=>l instanceof dm).length;if(o>1||o>0&&a>0)throw new ge(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class dm extends J0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dm(e,n,r)}_apply(e){const n=this._parse(e);return nP(e._query,n),new ho(e.firestore,e.converter,h_(e._query,n))}_parse(e){const n=K0(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){R1(h,d);const p=[];for(const y of h)p.push(I1(l,s,y));f={arrayValue:{values:p}}}else f=I1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||R1(h,d),f=a6(a,o,h,d==="in"||d==="not-in");return Wt.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function d6(t,e,n){const r=e,i=cm("where",t);return dm._create(i,r,n)}class Z0 extends X0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Z0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)nP(o,l),o=h_(o,l)}(e._query,n),new ho(e.firestore,e.converter,h_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ew extends J0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ew(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wc(s,o)}(e._query,this._field,this._direction);return new ho(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Kl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function h6(t,e="asc"){const n=e,r=cm("orderBy",t);return ew._create(r,n)}class tw extends J0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new tw(e,n,r)}_apply(e){return new ho(e.firestore,e.converter,Qf(e._query,this._limit,this._limitType))}}function f6(t){return tw._create("limit",t,"F")}function I1(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(e)&&n.indexOf("/")!==-1)throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Tt.fromString(n));if(!xe.isDocumentKey(r))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qS(t,new xe(r))}if(n instanceof gr)return qS(t,n._key);throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(n)}.`)}function R1(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p6{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ma(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Vt(o.doubleValue));return new q0(s)}convertGeoPoint(e){return new W0(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=C0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const n=Qs(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tt.fromString(e);ot(Rx(r));const i=new zc(r.get(1),r.get(3)),s=new xe(r.popFirst(5));return i.isEqual(n)||es(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class g6 extends eP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zh extends g6{data(e={}){return super.data(e)}}class y6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Eh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zh(this._firestore,this._userDataWriter,r.key,r,new Eh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Zh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Eh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Zh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Eh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:_6(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}class v6 extends p6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,n)}}function nw(t){t=Ol(t,ho);const e=Ol(t.firestore,sm),n=Gx(e),r=new v6(e);return c6(t._query),Q3(n,t._query).then(i=>new y6(e,r,t,i))}function w6(t,e,n,...r){t=Ol(t,gr);const i=Ol(t.firestore,sm),s=K0(i);let o;return o=typeof(e=It(e))=="string"||e instanceof om?o6(s,"updateDoc",t._key,e,n,r):s6(s,"updateDoc",t._key,e),rP(i,[o.toMutation(t._key,wi.exists(!0))])}function E6(t,e){const n=Ol(t.firestore,sm),r=Kx(t),i=m6(t.converter,e);return rP(n,[r6(K0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wi.exists(!1))]).then(()=>r)}function rP(t,e){return function(r,i){const s=new $s;return r.asyncQueue.enqueueAndForget(async()=>M3(await K3(r),i,s)),s.promise}(Gx(t),e)}function T6(...t){return new G0("arrayUnion",t)}(function(e,n=!0){(function(i){ql=i})(ao),Ks(new Xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new sm(new dj(r.getProvider("auth-internal")),new mj(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nr($S,"4.7.3",e),Nr($S,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="firebasestorage.googleapis.com",sP="storageBucket",S6=2*60*1e3,I6=10*60*1e3,R6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends Ii{constructor(e,n,r=0){super(Ag(e),`Firebase Storage: ${n} (${Ag(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ag(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function Ag(t){return"storage/"+t}function rw(){const t="An unknown error occurred, please check the error payload for server response.";return new Nt(Rt.UNKNOWN,t)}function C6(t){return new Nt(Rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function b6(t){return new Nt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(Rt.UNAUTHENTICATED,t)}function x6(){return new Nt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P6(t){return new Nt(Rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oP(){return new Nt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aP(){return new Nt(Rt.CANCELED,"User canceled the upload/download.")}function k6(t){return new Nt(Rt.INVALID_URL,"Invalid URL '"+t+"'.")}function N6(t){return new Nt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function O6(){return new Nt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sP+"' property when initializing the app?")}function lP(){return new Nt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function D6(){return new Nt(Rt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function L6(){return new Nt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function M6(t){return new Nt(Rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function T_(t){return new Nt(Rt.INVALID_ARGUMENT,t)}function uP(){return new Nt(Rt.APP_DELETED,"The Firebase app was deleted.")}function F6(t){return new Nt(Rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uc(t,e){return new Nt(Rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xu(t){throw new Nt(Rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fr.makeFromUrl(e,n)}catch{return new fr(e,"")}if(r.path==="")return r;throw N6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(b){b.path_=decodeURIComponent(b.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},w=n===iP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",T=new RegExp(`^https?://${w}/${i}/${S}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let b=0;b<E.length;b++){const O=E[b],F=O.regex.exec(e);if(F){const C=F[O.indices.bucket];let g=F[O.indices.path];g||(g=""),r=new fr(C,g),O.postModify(r);break}}if(r==null)throw k6(e);return r}}class V6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...S){u||(u=!0,e.apply(null,S))}function h(S){i=setTimeout(()=>{i=null,t(p,l())},S)}function f(){s&&clearTimeout(s)}function p(S,...T){if(u){f();return}if(S){f(),d.call(null,S,...T);return}if(l()||o){f(),d.call(null,S,...T);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let y=!1;function w(S){y||(y=!0,f(),!u&&(i!==null?(S||(a=2),clearTimeout(i),h(0)):S||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function j6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){return t!==void 0}function B6(t){return typeof t=="function"}function z6(t){return typeof t=="object"&&!Array.isArray(t)}function hm(t){return typeof t=="string"||t instanceof String}function C1(t){return iw()&&t instanceof Blob}function iw(){return typeof Blob<"u"}function b1(t,e,n,r){if(r<e)throw T_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw T_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var zo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n,r,i,s,o,a,l,u,d,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Th(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zo.NO_ERROR,l=s.getStatus();if(!a||dP(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===zo.ABORT;r(!1,new Th(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Th(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());$6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=rw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?uP():aP();o(l)}else{const l=oP();o(l)}};this.canceled_?n(!1,new Th(!1,null,!0)):this.backoffId_=U6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&j6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function W6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function q6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function K6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function G6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Q6(t,e,n,r,i,s,o=!0){const a=cP(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return K6(u,e),W6(u,n),q6(u,s),G6(u,r),new H6(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function X6(...t){const e=Y6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(iw())return new Blob(t);throw new Nt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function J6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t){if(typeof atob>"u")throw M6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xg{constructor(e,n){this.data=e,this.contentType=n||null}}function eB(t,e){switch(t){case pi.RAW:return new xg(hP(e));case pi.BASE64:case pi.BASE64URL:return new xg(fP(t,e));case pi.DATA_URL:return new xg(nB(e),rB(e))}throw rw()}function hP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tB(t){let e;try{e=decodeURIComponent(t)}catch{throw uc(pi.DATA_URL,"Malformed data URL.")}return hP(e)}function fP(t,e){switch(t){case pi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw uc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw uc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Z6(e)}catch(i){throw i.message.includes("polyfill")?i:uc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class pP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uc(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=iB(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function nB(t){const e=new pP(t);return e.base64?fP(pi.BASE64,e.rest):tB(e.rest)}function rB(t){return new pP(t).contentType}function iB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){let r=0,i="";C1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(C1(this.data_)){const r=this.data_,i=J6(r,e,n);return i===null?null:new Rs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Rs(r,!0)}}static getBlob(...e){if(iw()){const n=e.map(r=>r instanceof Rs?r.data_:r);return new Rs(X6.apply(null,n))}else{const n=e.map(o=>hm(o)?eB(pi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Rs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){let e;try{e=JSON.parse(t)}catch{return null}return z6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oB(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function gP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t,e){return e}class Vn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||aB}}let Sh=null;function lB(t){return!hm(t)||t.length<2?t:gP(t)}function yP(){if(Sh)return Sh;const t=[];t.push(new Vn("bucket")),t.push(new Vn("generation")),t.push(new Vn("metageneration")),t.push(new Vn("name","fullPath",!0));function e(s,o){return lB(o)}const n=new Vn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Vn("size");return i.xform=r,t.push(i),t.push(new Vn("timeCreated")),t.push(new Vn("updated")),t.push(new Vn("md5Hash",null,!0)),t.push(new Vn("cacheControl",null,!0)),t.push(new Vn("contentDisposition",null,!0)),t.push(new Vn("contentEncoding",null,!0)),t.push(new Vn("contentLanguage",null,!0)),t.push(new Vn("contentType",null,!0)),t.push(new Vn("metadata","customMetadata",!0)),Sh=t,Sh}function uB(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new fr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function cB(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return uB(r,t),r}function _P(t,e,n){const r=mP(e);return r===null?null:cB(t,r,n)}function dB(t,e,n,r){const i=mP(e);if(i===null||!hm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=_d(f,n,r),y=cP({alt:"media",token:u});return p+y})[0]}function vP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Xl{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){if(!t)throw rw()}function sw(t,e){function n(r,i){const s=_P(t,i,e);return Hi(s!==null),s}return n}function hB(t,e){function n(r,i){const s=_P(t,i,e);return Hi(s!==null),dB(s,i,t.host,t._protocol)}return n}function vd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=x6():i=A6():n.getStatus()===402?i=b6(t.bucket):n.getStatus()===403?i=P6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function wP(t){const e=vd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=C6(t.path)),s.serverResponse=i.serverResponse,s}return n}function fB(t,e,n){const r=e.fullServerUrl(),i=_d(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Xl(i,s,sw(t,n),o);return a.errorHandler=wP(e),a}function pB(t,e,n){const r=e.fullServerUrl(),i=_d(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Xl(i,s,hB(t,n),o);return a.errorHandler=wP(e),a}function mB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function EP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mB(null,e)),r}function gB(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let b=0;b<2;b++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=EP(e,r,i),d=vP(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Rs.getBlob(h,r,f);if(p===null)throw lP();const y={name:u.fullPath},w=_d(s,t.host,t._protocol),S="POST",T=t.maxUploadRetryTime,_=new Xl(w,S,sw(t,n),T);return _.urlParams=y,_.headers=o,_.body=p.uploadData(),_.errorHandler=vd(e),_}class np{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function ow(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Hi(!1)}return Hi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function yB(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=EP(e,r,i),a={name:o.fullPath},l=_d(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=vP(o,n),f=t.maxUploadRetryTime;function p(w){ow(w);let S;try{S=w.getResponseHeader("X-Goog-Upload-URL")}catch{Hi(!1)}return Hi(hm(S)),S}const y=new Xl(l,u,p,f);return y.urlParams=a,y.headers=d,y.body=h,y.errorHandler=vd(e),y}function _B(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const d=ow(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hi(!1)}h||Hi(!1);const f=Number(h);return Hi(!isNaN(f)),new np(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Xl(n,o,s,a);return l.headers=i,l.errorHandler=vd(e),l}const A1=256*1024;function vB(t,e,n,r,i,s,o,a){const l=new np(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw D6();const u=l.total-l.current;let d=u;i>0&&(d=Math.min(d,i));const h=l.current,f=h+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const y={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},w=r.slice(h,f);if(w===null)throw lP();function S(b,O){const F=ow(b,["active","final"]),C=l.current+d,g=r.size();let R;return F==="final"?R=sw(e,s)(b,O):R=null,new np(C,g,F==="final",R)}const T="POST",_=e.maxUploadRetryTime,E=new Xl(n,T,S,_);return E.headers=y,E.body=w.uploadData(),E.progressCallback=a||null,E.errorHandler=vd(t),E}const Yn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pg(t){switch(t){case"running":case"pausing":case"canceling":return Yn.RUNNING;case"paused":return Yn.PAUSED;case"success":return Yn.SUCCESS;case"canceled":return Yn.CANCELED;case"error":return Yn.ERROR;default:return Yn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,n,r){if(B6(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class EB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw xu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TB extends EB{initXhr(){this.xhr_.responseType="text"}}function Ua(){return new TB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=yP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Rt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(dP(i.status,[]))if(s)i=oP();else{this.sleepTime=Math.max(this.sleepTime*2,R6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Rt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=yB(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ua,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=_B(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ua,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=A1*this._chunkMultiplier,n=new np(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=vB(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ua,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){A1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=fB(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ua,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=gB(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ua,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=aP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new wB(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pg(this._state)){case Yn.SUCCESS:Na(this._resolve.bind(null,this.snapshot))();break;case Yn.CANCELED:case Yn.ERROR:const n=this._reject;Na(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pg(this._state)){case Yn.RUNNING:case Yn.PAUSED:e.next&&Na(e.next.bind(e,this.snapshot))();break;case Yn.SUCCESS:e.complete&&Na(e.complete.bind(e))();break;case Yn.CANCELED:case Yn.ERROR:e.error&&Na(e.error.bind(e,this._error))();break;default:e.error&&Na(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this._service=e,n instanceof fr?this._location=n:this._location=fr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ra(e,n)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gP(this._location.path)}get storage(){return this._service}get parent(){const e=sB(this._location.path);if(e===null)return null;const n=new fr(this._location.bucket,e);return new ra(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw F6(e)}}function IB(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new SB(t,new Rs(e),n)}function RB(t){t._throwIfRoot("getDownloadURL");const e=pB(t.storage,t._location,yP());return t.storage.makeRequestWithTokens(e,Ua).then(n=>{if(n===null)throw L6();return n})}function CB(t,e){const n=oB(t._location.path,e),r=new fr(t._location.bucket,n);return new ra(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){return/^[A-Za-z]+:\/\//.test(t)}function AB(t,e){return new ra(t,e)}function TP(t,e){if(t instanceof aw){const n=t;if(n._bucket==null)throw O6();const r=new ra(n,n._bucket);return e!=null?TP(r,e):r}else return e!==void 0?CB(t,e):t}function xB(t,e){if(e&&bB(e)){if(t instanceof aw)return AB(t,e);throw T_("To use ref(service, url), the first argument must be a Storage instance.")}else return TP(t,e)}function x1(t,e){const n=e==null?void 0:e[sP];return n==null?null:fr.makeFromBucketSpec(n,t)}function PB(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Hb(i,t.app.options.projectId))}class aw{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=iP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S6,this._maxUploadRetryTime=I6,this._requests=new Set,i!=null?this._bucket=fr.makeFromBucketSpec(i,this._host):this._bucket=x1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=x1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ra(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new V6(uP());{const o=Q6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const P1="@firebase/storage",k1="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="storage";function kB(t,e,n){return t=It(t),IB(t,e,n)}function NB(t){return t=It(t),RB(t)}function OB(t,e){return t=It(t),xB(t,e)}function DB(t=d0(),e){t=It(t);const r=$p(t,SP).getImmediate({identifier:e}),i=$b("storage");return i&&LB(r,...i),r}function LB(t,e,n,r={}){PB(t,e,n,r)}function MB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new aw(n,r,i,e,ao)}function FB(){Ks(new Xi(SP,MB,"PUBLIC").setMultipleInstances(!0)),Nr(P1,k1,""),Nr(P1,k1,"esm2017")}FB();const VB={apiKey:"AIzaSyBZigODMvIKpL3TRsw5occlRulmM3k_cDE",authDomain:"project-lo-102dd.firebaseapp.com",databaseURL:"https://project-lo-102dd-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"project-lo-102dd",storageBucket:"project-lo-102dd.appspot.com",messagingSenderId:"512742747439",appId:"1:512742747439:web:9c27cd317188de442f85da",measurementId:"G-0N297GGEGD"},lw=Yb(VB),IP=J3(lw),Oa=qU(lw),UB=DB(lw),RP=I.createContext();function jB({children:t}){const[e,n]=I.useState(null),r=new Kr;I.useEffect(()=>{const u=L4(Oa,d=>{n(d||null)});return()=>{u()}},[]);function i(u,d){return A4(Oa,u,d)}function s(u,d){return N4(Oa,SA).then(()=>x4(Oa,u,d))}function o(){return M4(Oa)}function a(){return tU(Oa,r)}const l={currentUser:e,setCurrentUser:n,registerUzer:i,loginUzer:s,logoutUzer:o,loginWithProvider:a,db:IP};return D.jsx(RP.Provider,{value:l,children:t})}function ya(){return I.useContext(RP)}const Oi=(t="Some msg",e="info",n="bottom-center",r=4e3)=>{ft[e](`${t}`,{position:n,autoClose:r,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",transition:ij})};var CP={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:EO,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="/",i(i.s=7)}([function(n,r,i){function s(o,a,l,u,d,h,f,p){if(!o){var y;if(a===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[l,u,d,h,f,p],S=0;y=new Error(a.replace(/%s/g,function(){return w[S++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}}n.exports=s},function(n,r,i){function s(a){return function(){return a}}var o=function(){};o.thatReturns=s,o.thatReturnsFalse=s(!1),o.thatReturnsTrue=s(!0),o.thatReturnsNull=s(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(a){return a},n.exports=o},function(n,r,i){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function l(d){if(d==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(d)}function u(){try{if(!Object.assign)return!1;var d=new String("abc");if(d[5]="de",Object.getOwnPropertyNames(d)[0]==="5")return!1;for(var h={},f=0;f<10;f++)h["_"+String.fromCharCode(f)]=f;var p=Object.getOwnPropertyNames(h).map(function(w){return h[w]});if(p.join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(w){y[w]=w}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}n.exports=u()?Object.assign:function(d,h){for(var f,p=l(d),y,w=1;w<arguments.length;w++){f=Object(arguments[w]);for(var S in f)o.call(f,S)&&(p[S]=f[S]);if(s){y=s(f);for(var T=0;T<y.length;T++)a.call(f,y[T])&&(p[y[T]]=f[y[T]])}}return p}},function(n,r,i){var s=i(1),o=s;n.exports=o},function(n,r,i){var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";n.exports=s},function(n,r,i){var s={};n.exports=s},function(n,r,i){function s(o,a,l,u,d){}n.exports=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=Object.assign||function(b){for(var O=1;O<arguments.length;O++){var F=arguments[O];for(var C in F)Object.prototype.hasOwnProperty.call(F,C)&&(b[C]=F[C])}return b},o=function(){function b(O,F){for(var C=0;C<F.length;C++){var g=F[C];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(O,g.key,g)}}return function(O,F,C){return F&&b(O.prototype,F),C&&b(O,C),O}}(),a=i(8),l=y(a),u=i(11),d=y(u),h=i(14),f=p(h);function p(b){if(b&&b.__esModule)return b;var O={};if(b!=null)for(var F in b)Object.prototype.hasOwnProperty.call(b,F)&&(O[F]=b[F]);return O.default=b,O}function y(b){return b&&b.__esModule?b:{default:b}}function w(b,O){var F={};for(var C in b)O.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(b,C)&&(F[C]=b[C]);return F}function S(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function T(b,O){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:b}function _(b,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);b.prototype=Object.create(O&&O.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(b,O):b.__proto__=O)}var E=function(b){_(O,b);function O(){var F,C,g,R;S(this,O);for(var A=arguments.length,k=Array(A),N=0;N<A;N++)k[N]=arguments[N];return R=(C=(g=T(this,(F=O.__proto__||Object.getPrototypeOf(O)).call.apply(F,[this].concat(k))),g),g.state={delayed:g.props.delay>0},C),T(g,R)}return o(O,[{key:"componentDidMount",value:function(){var C=this,g=this.props.delay,R=this.state.delayed;R&&(this.timeout=setTimeout(function(){C.setState({delayed:!1})},g))}},{key:"componentWillUnmount",value:function(){var C=this.timeout;C&&clearTimeout(C)}},{key:"render",value:function(){var C=this.props,g=C.color;C.delay;var R=C.type,A=C.height,k=C.width,N=w(C,["color","delay","type","height","width"]),P=this.state.delayed?"blank":R,re=f[P],be={fill:g,height:A,width:k};return l.default.createElement("div",s({style:be,dangerouslySetInnerHTML:{__html:re}},N))}}]),O}(a.Component);E.propTypes={color:d.default.string,delay:d.default.number,type:d.default.string,height:d.default.oneOfType([d.default.string,d.default.number]),width:d.default.oneOfType([d.default.string,d.default.number])},E.defaultProps={color:"#fff",delay:0,type:"balls",height:64,width:64},r.default=E},function(n,r,i){n.exports=i(9)},function(n,r,i){/** @license React v16.3.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=i(2),o=i(0),a=i(5),l=i(1),u=typeof Symbol=="function"&&Symbol.for,d=u?Symbol.for("react.element"):60103,h=u?Symbol.for("react.portal"):60106,f=u?Symbol.for("react.fragment"):60107,p=u?Symbol.for("react.strict_mode"):60108,y=u?Symbol.for("react.provider"):60109,w=u?Symbol.for("react.context"):60110,S=u?Symbol.for("react.async_mode"):60111,T=u?Symbol.for("react.forward_ref"):60112,_=typeof Symbol=="function"&&Symbol.iterator;function E(U){for(var G=arguments.length-1,he="http://reactjs.org/docs/error-decoder.html?invariant="+U,se=0;se<G;se++)he+="&args[]="+encodeURIComponent(arguments[se+1]);o(!1,"Minified React error #"+U+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",he)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function O(U,G,he){this.props=U,this.context=G,this.refs=a,this.updater=he||b}O.prototype.isReactComponent={},O.prototype.setState=function(U,G){typeof U!="object"&&typeof U!="function"&&U!=null&&E("85"),this.updater.enqueueSetState(this,U,G,"setState")},O.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=O.prototype;function C(U,G,he){this.props=U,this.context=G,this.refs=a,this.updater=he||b}var g=C.prototype=new F;g.constructor=C,s(g,O.prototype),g.isPureReactComponent=!0;var R={current:null},A=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function N(U,G,he){var se=void 0,fe={},Ve=null,ct=null;if(G!=null)for(se in G.ref!==void 0&&(ct=G.ref),G.key!==void 0&&(Ve=""+G.key),G)A.call(G,se)&&!k.hasOwnProperty(se)&&(fe[se]=G[se]);var Oe=arguments.length-2;if(Oe===1)fe.children=he;else if(1<Oe){for(var Mt=Array(Oe),gn=0;gn<Oe;gn++)Mt[gn]=arguments[gn+2];fe.children=Mt}if(U&&U.defaultProps)for(se in Oe=U.defaultProps,Oe)fe[se]===void 0&&(fe[se]=Oe[se]);return{$$typeof:d,type:U,key:Ve,ref:ct,props:fe,_owner:R.current}}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===d}function re(U){var G={"=":"=0",":":"=2"};return"$"+(""+U).replace(/[=:]/g,function(he){return G[he]})}var be=/\/+/g,Re=[];function te(U,G,he,se){if(Re.length){var fe=Re.pop();return fe.result=U,fe.keyPrefix=G,fe.func=he,fe.context=se,fe.count=0,fe}return{result:U,keyPrefix:G,func:he,context:se,count:0}}function W(U){U.result=null,U.keyPrefix=null,U.func=null,U.context=null,U.count=0,10>Re.length&&Re.push(U)}function Q(U,G,he,se){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var Ve=!1;if(U===null)Ve=!0;else switch(fe){case"string":case"number":Ve=!0;break;case"object":switch(U.$$typeof){case d:case h:Ve=!0}}if(Ve)return he(se,U,G===""?"."+ie(U,0):G),1;if(Ve=0,G=G===""?".":G+":",Array.isArray(U))for(var ct=0;ct<U.length;ct++){fe=U[ct];var Oe=G+ie(fe,ct);Ve+=Q(fe,Oe,he,se)}else if(U===null||typeof U>"u"?Oe=null:(Oe=_&&U[_]||U["@@iterator"],Oe=typeof Oe=="function"?Oe:null),typeof Oe=="function")for(U=Oe.call(U),ct=0;!(fe=U.next()).done;)fe=fe.value,Oe=G+ie(fe,ct++),Ve+=Q(fe,Oe,he,se);else fe==="object"&&(he=""+U,E("31",he==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":he,""));return Ve}function ie(U,G){return typeof U=="object"&&U!==null&&U.key!=null?re(U.key):G.toString(36)}function Pe(U,G){U.func.call(U.context,G,U.count++)}function q(U,G,he){var se=U.result,fe=U.keyPrefix;U=U.func.call(U.context,G,U.count++),Array.isArray(U)?J(U,se,he,l.thatReturnsArgument):U!=null&&(P(U)&&(G=fe+(!U.key||G&&G.key===U.key?"":(""+U.key).replace(be,"$&/")+"/")+he,U={$$typeof:d,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}),se.push(U))}function J(U,G,he,se,fe){var Ve="";he!=null&&(Ve=(""+he).replace(be,"$&/")+"/"),G=te(G,Ve,se,fe),U==null||Q(U,"",q,G),W(G)}var ye={Children:{map:function(U,G,he){if(U==null)return U;var se=[];return J(U,se,null,G,he),se},forEach:function(U,G,he){if(U==null)return U;G=te(null,null,G,he),U==null||Q(U,"",Pe,G),W(G)},count:function(U){return U==null?0:Q(U,"",l.thatReturnsNull,null)},toArray:function(U){var G=[];return J(U,G,null,l.thatReturnsArgument),G},only:function(U){return P(U)||E("143"),U}},createRef:function(){return{current:null}},Component:O,PureComponent:C,createContext:function(U,G){return G===void 0&&(G=null),U={$$typeof:w,_calculateChangedBits:G,_defaultValue:U,_currentValue:U,_changedBits:0,Provider:null,Consumer:null},U.Provider={$$typeof:y,_context:U},U.Consumer=U},forwardRef:function(U){return{$$typeof:T,render:U}},Fragment:f,StrictMode:p,unstable_AsyncMode:S,createElement:N,cloneElement:function(U,G,he){U==null&&E("267",U);var se=void 0,fe=s({},U.props),Ve=U.key,ct=U.ref,Oe=U._owner;if(G!=null){G.ref!==void 0&&(ct=G.ref,Oe=R.current),G.key!==void 0&&(Ve=""+G.key);var Mt=void 0;U.type&&U.type.defaultProps&&(Mt=U.type.defaultProps);for(se in G)A.call(G,se)&&!k.hasOwnProperty(se)&&(fe[se]=G[se]===void 0&&Mt!==void 0?Mt[se]:G[se])}if(se=arguments.length-2,se===1)fe.children=he;else if(1<se){Mt=Array(se);for(var gn=0;gn<se;gn++)Mt[gn]=arguments[gn+2];fe.children=Mt}return{$$typeof:d,type:U.type,key:Ve,ref:ct,props:fe,_owner:Oe}},createFactory:function(U){var G=N.bind(null,U);return G.type=U,G},isValidElement:P,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:s}},Te=Object.freeze({default:ye}),pe=Te&&ye||Te;n.exports=pe.default?pe.default:pe},function(n,r,i){},function(n,r,i){n.exports=i(13)()},function(n,r,i){var s=i(1),o=i(0),a=i(3),l=i(2),u=i(4),d=i(6);n.exports=function(h,f){var p=typeof Symbol=="function"&&Symbol.iterator,y="@@iterator";function w(q){var J=q&&(p&&q[p]||q[y]);if(typeof J=="function")return J}var S="<<anonymous>>",T={array:O("array"),bool:O("boolean"),func:O("function"),number:O("number"),object:O("object"),string:O("string"),symbol:O("symbol"),any:F(),arrayOf:C,element:g(),instanceOf:R,node:P(),objectOf:k,oneOf:A,oneOfType:N,shape:re,exact:be};function _(q,J){return q===J?q!==0||1/q===1/J:q!==q&&J!==J}function E(q){this.message=q,this.stack=""}E.prototype=Error.prototype;function b(q){function J(Te,pe,U,G,he,se,fe){return G=G||S,se=se||U,fe!==u&&f&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),pe[U]==null?Te?pe[U]===null?new E("The "+he+" `"+se+"` is marked as required "+("in `"+G+"`, but its value is `null`.")):new E("The "+he+" `"+se+"` is marked as required in "+("`"+G+"`, but its value is `undefined`.")):null:q(pe,U,G,he,se)}var ye=J.bind(null,!1);return ye.isRequired=J.bind(null,!0),ye}function O(q){function J(ye,Te,pe,U,G,he){var se=ye[Te],fe=W(se);if(fe!==q){var Ve=Q(se);return new E("Invalid "+U+" `"+G+"` of type "+("`"+Ve+"` supplied to `"+pe+"`, expected ")+("`"+q+"`."))}return null}return b(J)}function F(){return b(s.thatReturnsNull)}function C(q){function J(ye,Te,pe,U,G){if(typeof q!="function")return new E("Property `"+G+"` of component `"+pe+"` has invalid PropType notation inside arrayOf.");var he=ye[Te];if(!Array.isArray(he)){var se=W(he);return new E("Invalid "+U+" `"+G+"` of type "+("`"+se+"` supplied to `"+pe+"`, expected an array."))}for(var fe=0;fe<he.length;fe++){var Ve=q(he,fe,pe,U,G+"["+fe+"]",u);if(Ve instanceof Error)return Ve}return null}return b(J)}function g(){function q(J,ye,Te,pe,U){var G=J[ye];if(!h(G)){var he=W(G);return new E("Invalid "+pe+" `"+U+"` of type "+("`"+he+"` supplied to `"+Te+"`, expected a single ReactElement."))}return null}return b(q)}function R(q){function J(ye,Te,pe,U,G){if(!(ye[Te]instanceof q)){var he=q.name||S,se=Pe(ye[Te]);return new E("Invalid "+U+" `"+G+"` of type "+("`"+se+"` supplied to `"+pe+"`, expected ")+("instance of `"+he+"`."))}return null}return b(J)}function A(q){if(!Array.isArray(q))return s.thatReturnsNull;function J(ye,Te,pe,U,G){for(var he=ye[Te],se=0;se<q.length;se++)if(_(he,q[se]))return null;var fe=JSON.stringify(q);return new E("Invalid "+U+" `"+G+"` of value `"+he+"` "+("supplied to `"+pe+"`, expected one of "+fe+"."))}return b(J)}function k(q){function J(ye,Te,pe,U,G){if(typeof q!="function")return new E("Property `"+G+"` of component `"+pe+"` has invalid PropType notation inside objectOf.");var he=ye[Te],se=W(he);if(se!=="object")return new E("Invalid "+U+" `"+G+"` of type "+("`"+se+"` supplied to `"+pe+"`, expected an object."));for(var fe in he)if(he.hasOwnProperty(fe)){var Ve=q(he,fe,pe,U,G+"."+fe,u);if(Ve instanceof Error)return Ve}return null}return b(J)}function N(q){if(!Array.isArray(q))return s.thatReturnsNull;for(var J=0;J<q.length;J++){var ye=q[J];if(typeof ye!="function")return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",ie(ye),J),s.thatReturnsNull}function Te(pe,U,G,he,se){for(var fe=0;fe<q.length;fe++){var Ve=q[fe];if(Ve(pe,U,G,he,se,u)==null)return null}return new E("Invalid "+he+" `"+se+"` supplied to "+("`"+G+"`."))}return b(Te)}function P(){function q(J,ye,Te,pe,U){return Re(J[ye])?null:new E("Invalid "+pe+" `"+U+"` supplied to "+("`"+Te+"`, expected a ReactNode."))}return b(q)}function re(q){function J(ye,Te,pe,U,G){var he=ye[Te],se=W(he);if(se!=="object")return new E("Invalid "+U+" `"+G+"` of type `"+se+"` "+("supplied to `"+pe+"`, expected `object`."));for(var fe in q){var Ve=q[fe];if(Ve){var ct=Ve(he,fe,pe,U,G+"."+fe,u);if(ct)return ct}}return null}return b(J)}function be(q){function J(ye,Te,pe,U,G){var he=ye[Te],se=W(he);if(se!=="object")return new E("Invalid "+U+" `"+G+"` of type `"+se+"` "+("supplied to `"+pe+"`, expected `object`."));var fe=l({},ye[Te],q);for(var Ve in fe){var ct=q[Ve];if(!ct)return new E("Invalid "+U+" `"+G+"` key `"+Ve+"` supplied to `"+pe+"`.\nBad object: "+JSON.stringify(ye[Te],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(q),null,"  "));var Oe=ct(he,Ve,pe,U,G+"."+Ve,u);if(Oe)return Oe}return null}return b(J)}function Re(q){switch(typeof q){case"number":case"string":case"undefined":return!0;case"boolean":return!q;case"object":if(Array.isArray(q))return q.every(Re);if(q===null||h(q))return!0;var J=w(q);if(J){var ye=J.call(q),Te;if(J!==q.entries){for(;!(Te=ye.next()).done;)if(!Re(Te.value))return!1}else for(;!(Te=ye.next()).done;){var pe=Te.value;if(pe&&!Re(pe[1]))return!1}}else return!1;return!0;default:return!1}}function te(q,J){return q==="symbol"||J["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&J instanceof Symbol}function W(q){var J=typeof q;return Array.isArray(q)?"array":q instanceof RegExp?"object":te(J,q)?"symbol":J}function Q(q){if(typeof q>"u"||q===null)return""+q;var J=W(q);if(J==="object"){if(q instanceof Date)return"date";if(q instanceof RegExp)return"regexp"}return J}function ie(q){var J=Q(q);switch(J){case"array":case"object":return"an "+J;case"boolean":case"date":case"regexp":return"a "+J;default:return J}}function Pe(q){return!q.constructor||!q.constructor.name?S:q.constructor.name}return T.checkPropTypes=d,T.PropTypes=T,T}},function(n,r,i){var s=i(1),o=i(0),a=i(4);n.exports=function(){function l(h,f,p,y,w,S){S!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}l.isRequired=l;function u(){return l}var d={array:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:u,element:l,instanceOf:u,node:l,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u};return d.checkPropTypes=s,d.PropTypes=d,d}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(15);Object.defineProperty(r,"blank",{enumerable:!0,get:function(){return y(s).default}});var o=i(16);Object.defineProperty(r,"balls",{enumerable:!0,get:function(){return y(o).default}});var a=i(17);Object.defineProperty(r,"bars",{enumerable:!0,get:function(){return y(a).default}});var l=i(18);Object.defineProperty(r,"bubbles",{enumerable:!0,get:function(){return y(l).default}});var u=i(19);Object.defineProperty(r,"cubes",{enumerable:!0,get:function(){return y(u).default}});var d=i(20);Object.defineProperty(r,"cylon",{enumerable:!0,get:function(){return y(d).default}});var h=i(21);Object.defineProperty(r,"spin",{enumerable:!0,get:function(){return y(h).default}});var f=i(22);Object.defineProperty(r,"spinningBubbles",{enumerable:!0,get:function(){return y(f).default}});var p=i(23);Object.defineProperty(r,"spokes",{enumerable:!0,get:function(){return y(p).default}});function y(w){return w&&w.__esModule?w:{default:w}}},function(n,r){n.exports=`<svg class="icon-blank" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"></svg>
`},function(n,r){n.exports=`<svg class="icon-loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(-8 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="-8 0; 2 0; 2 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.25;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(2 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="2 0; 12 0; 12 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.35;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(12 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="12 0; 22 0; 22 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.45;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(24 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="22 0; 32 0; 32 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.55;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(2)" d="M0 12 V20 H4 V12z"> 
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(8)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.2" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(14)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.4" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
  <path transform="translate(20)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.6" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
  <path transform="translate(26)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.8" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle transform="translate(8 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(16 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.3"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(24 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.6"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(-8 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="-8 0; 2 0; 2 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.25;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(2 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="2 0; 12 0; 12 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.35;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(12 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="12 0; 22 0; 22 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.45;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(24 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="22 0; 32 0; 32 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.55;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
  <path opacity="0.5" transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0.1s" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
  <path opacity="0.25" transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0.2s" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>
  <path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">
    <animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.8s" repeatCount="indefinite" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(45 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.125s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(90 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.25s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(135 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.375s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(225 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.625s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(270 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.75s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(315 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.875s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
</svg>
`},function(n,r){n.exports=`<svg id="loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(0 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(45 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.125s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(90 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.25s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(135 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.375s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(180 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.5s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(225 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.675s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(270 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.75s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(315 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.875s"/>
  </path>
</svg>
`}])})})(CP);var $B=CP.exports;const BB=ev($B),fm=()=>D.jsx(BB,{type:"spokes",color:"white",height:"40%",width:"40%",className:"text-center mx-3 "});function bP(t,e){return function(){return t.apply(e,arguments)}}const{toString:zB}=Object.prototype,{getPrototypeOf:uw}=Object,pm=(t=>e=>{const n=zB.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ii=t=>(t=t.toLowerCase(),e=>pm(e)===t),mm=t=>e=>typeof e===t,{isArray:Jl}=Array,Kc=mm("undefined");function HB(t){return t!==null&&!Kc(t)&&t.constructor!==null&&!Kc(t.constructor)&&yr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const AP=ii("ArrayBuffer");function WB(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&AP(t.buffer),e}const qB=mm("string"),yr=mm("function"),xP=mm("number"),gm=t=>t!==null&&typeof t=="object",KB=t=>t===!0||t===!1,ef=t=>{if(pm(t)!=="object")return!1;const e=uw(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},GB=ii("Date"),QB=ii("File"),YB=ii("Blob"),XB=ii("FileList"),JB=t=>gm(t)&&yr(t.pipe),ZB=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yr(t.append)&&((e=pm(t))==="formdata"||e==="object"&&yr(t.toString)&&t.toString()==="[object FormData]"))},e5=ii("URLSearchParams"),[t5,n5,r5,i5]=["ReadableStream","Request","Response","Headers"].map(ii),s5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Jl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function PP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kP=t=>!Kc(t)&&t!==Lo;function S_(){const{caseless:t}=kP(this)&&this||{},e={},n=(r,i)=>{const s=t&&PP(e,i)||i;ef(e[s])&&ef(r)?e[s]=S_(e[s],r):ef(r)?e[s]=S_({},r):Jl(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wd(arguments[r],n);return e}const o5=(t,e,n,{allOwnKeys:r}={})=>(wd(e,(i,s)=>{n&&yr(i)?t[s]=bP(i,n):t[s]=i},{allOwnKeys:r}),t),a5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),l5=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},u5=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&uw(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},c5=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},d5=t=>{if(!t)return null;if(Jl(t))return t;let e=t.length;if(!xP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},h5=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&uw(Uint8Array)),f5=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},p5=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},m5=ii("HTMLFormElement"),g5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),N1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),y5=ii("RegExp"),NP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};wd(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},_5=t=>{NP(t,(e,n)=>{if(yr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(yr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},v5=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Jl(t)?r(t):r(String(t).split(e)),n},w5=()=>{},E5=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,kg="abcdefghijklmnopqrstuvwxyz",O1="0123456789",OP={DIGIT:O1,ALPHA:kg,ALPHA_DIGIT:kg+kg.toUpperCase()+O1},T5=(t=16,e=OP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function S5(t){return!!(t&&yr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const I5=t=>{const e=new Array(10),n=(r,i)=>{if(gm(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Jl(r)?[]:{};return wd(r,(o,a)=>{const l=n(o,i+1);!Kc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},R5=ii("AsyncFunction"),C5=t=>t&&(gm(t)||yr(t))&&yr(t.then)&&yr(t.catch),DP=((t,e)=>t?setImmediate:e?((n,r)=>(Lo.addEventListener("message",({source:i,data:s})=>{i===Lo&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Lo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",yr(Lo.postMessage)),b5=typeof queueMicrotask<"u"?queueMicrotask.bind(Lo):typeof process<"u"&&process.nextTick||DP,H={isArray:Jl,isArrayBuffer:AP,isBuffer:HB,isFormData:ZB,isArrayBufferView:WB,isString:qB,isNumber:xP,isBoolean:KB,isObject:gm,isPlainObject:ef,isReadableStream:t5,isRequest:n5,isResponse:r5,isHeaders:i5,isUndefined:Kc,isDate:GB,isFile:QB,isBlob:YB,isRegExp:y5,isFunction:yr,isStream:JB,isURLSearchParams:e5,isTypedArray:h5,isFileList:XB,forEach:wd,merge:S_,extend:o5,trim:s5,stripBOM:a5,inherits:l5,toFlatObject:u5,kindOf:pm,kindOfTest:ii,endsWith:c5,toArray:d5,forEachEntry:f5,matchAll:p5,isHTMLForm:m5,hasOwnProperty:N1,hasOwnProp:N1,reduceDescriptors:NP,freezeMethods:_5,toObjectSet:v5,toCamelCase:g5,noop:w5,toFiniteNumber:E5,findKey:PP,global:Lo,isContextDefined:kP,ALPHABET:OP,generateString:T5,isSpecCompliantForm:S5,toJSONObject:I5,isAsyncFn:R5,isThenable:C5,setImmediate:DP,asap:b5};function je(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}H.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const LP=je.prototype,MP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{MP[t]={value:t}});Object.defineProperties(je,MP);Object.defineProperty(LP,"isAxiosError",{value:!0});je.from=(t,e,n,r,i,s)=>{const o=Object.create(LP);return H.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),je.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const A5=null;function I_(t){return H.isPlainObject(t)||H.isArray(t)}function FP(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function D1(t,e,n){return t?t.concat(e).map(function(i,s){return i=FP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function x5(t){return H.isArray(t)&&!t.some(I_)}const P5=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function ym(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!H.isUndefined(S[w])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(H.isDate(y))return y.toISOString();if(!l&&H.isBlob(y))throw new je("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(y)||H.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,w,S){let T=y;if(y&&!S&&typeof y=="object"){if(H.endsWith(w,"{}"))w=r?w:w.slice(0,-2),y=JSON.stringify(y);else if(H.isArray(y)&&x5(y)||(H.isFileList(y)||H.endsWith(w,"[]"))&&(T=H.toArray(y)))return w=FP(w),T.forEach(function(E,b){!(H.isUndefined(E)||E===null)&&e.append(o===!0?D1([w],b,s):o===null?w:w+"[]",u(E))}),!1}return I_(y)?!0:(e.append(D1(S,w,s),u(y)),!1)}const h=[],f=Object.assign(P5,{defaultVisitor:d,convertValue:u,isVisitable:I_});function p(y,w){if(!H.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(y),H.forEach(y,function(T,_){(!(H.isUndefined(T)||T===null)&&i.call(e,T,H.isString(_)?_.trim():_,w,f))===!0&&p(T,w?w.concat(_):[_])}),h.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return p(t),e}function L1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function cw(t,e){this._pairs=[],t&&ym(t,this,e)}const VP=cw.prototype;VP.append=function(e,n){this._pairs.push([e,n])};VP.toString=function(e){const n=e?function(r){return e.call(this,r,L1)}:L1;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function k5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UP(t,e,n){if(!e)return t;const r=n&&n.encode||k5,i=n&&n.serialize;let s;if(i?s=i(e,n):s=H.isURLSearchParams(e)?e.toString():new cw(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class M1{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(r){r!==null&&e(r)})}}const jP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N5=typeof URLSearchParams<"u"?URLSearchParams:cw,O5=typeof FormData<"u"?FormData:null,D5=typeof Blob<"u"?Blob:null,L5={isBrowser:!0,classes:{URLSearchParams:N5,FormData:O5,Blob:D5},protocols:["http","https","file","blob","url","data"]},dw=typeof window<"u"&&typeof document<"u",R_=typeof navigator=="object"&&navigator||void 0,M5=dw&&(!R_||["ReactNative","NativeScript","NS"].indexOf(R_.product)<0),F5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",V5=dw&&window.location.href||"http://localhost",U5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dw,hasStandardBrowserEnv:M5,hasStandardBrowserWebWorkerEnv:F5,navigator:R_,origin:V5},Symbol.toStringTag,{value:"Module"})),ir={...U5,...L5};function j5(t,e){return ym(t,new ir.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ir.isNode&&H.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function $5(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function B5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function $P(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&H.isArray(i)?i.length:o,l?(H.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!H.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&H.isArray(i[o])&&(i[o]=B5(i[o])),!a)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(r,i)=>{e($5(r),i,n,0)}),n}return null}function z5(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Ed={transitional:jP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=H.isObject(e);if(s&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return i?JSON.stringify($P(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return j5(e,this.formSerializer).toString();if((a=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ym(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),z5(e)):e}],transformResponse:[function(e){const n=this.transitional||Ed.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?je.from(a,je.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ir.classes.FormData,Blob:ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{Ed.headers[t]={}});const H5=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),W5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&H5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},F1=Symbol("internals");function Pu(t){return t&&String(t).trim().toLowerCase()}function tf(t){return t===!1||t==null?t:H.isArray(t)?t.map(tf):String(t)}function q5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const K5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ng(t,e,n,r,i){if(H.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!H.isString(e)){if(H.isString(r))return e.indexOf(r)!==-1;if(H.isRegExp(r))return r.test(e)}}function G5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Q5(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class sr{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const d=Pu(l);if(!d)throw new Error("header name must be a non-empty string");const h=H.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=tf(a))}const o=(a,l)=>H.forEach(a,(u,d)=>s(u,d,l));if(H.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(H.isString(e)&&(e=e.trim())&&!K5(e))o(W5(e),n);else if(H.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Pu(e),e){const r=H.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return q5(i);if(H.isFunction(n))return n.call(this,i,r);if(H.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Pu(e),e){const r=H.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ng(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Pu(o),o){const a=H.findKey(r,o);a&&(!n||Ng(r,r[a],a,n))&&(delete r[a],i=!0)}}return H.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Ng(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return H.forEach(this,(i,s)=>{const o=H.findKey(r,s);if(o){n[o]=tf(i),delete n[s];return}const a=e?G5(s):String(s).trim();a!==s&&delete n[s],n[a]=tf(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&H.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[F1]=this[F1]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Pu(o);r[a]||(Q5(i,o),r[a]=!0)}return H.isArray(e)?e.forEach(s):s(e),this}}sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(sr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});H.freezeMethods(sr);function Og(t,e){const n=this||Ed,r=e||n,i=sr.from(r.headers);let s=r.data;return H.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function BP(t){return!!(t&&t.__CANCEL__)}function Zl(t,e,n){je.call(this,t??"canceled",je.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(Zl,je,{__CANCEL__:!0});function zP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new je("Request failed with status code "+n.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Y5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function X5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[s];o||(o=u),n[i]=l,r[i]=u;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function J5(t,e){let n=0,r=1e3/e,i,s;const o=(u,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?o(u,d):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const rp=(t,e,n=3)=>{let r=0;const i=X5(50,250);return J5(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),d=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},V1=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},U1=t=>(...e)=>H.asap(()=>t(...e)),Z5=ir.hasStandardBrowserEnv?function(){const e=ir.navigator&&/(msie|trident)/i.test(ir.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=H.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),e9=ir.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];H.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),H.isString(r)&&o.push("path="+r),H.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function t9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function n9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function HP(t,e){return t&&!t9(e)?n9(t,e):e}const j1=t=>t instanceof sr?{...t}:t;function ia(t,e){e=e||{};const n={};function r(u,d,h){return H.isPlainObject(u)&&H.isPlainObject(d)?H.merge.call({caseless:h},u,d):H.isPlainObject(d)?H.merge({},d):H.isArray(d)?d.slice():d}function i(u,d,h){if(H.isUndefined(d)){if(!H.isUndefined(u))return r(void 0,u,h)}else return r(u,d,h)}function s(u,d){if(!H.isUndefined(d))return r(void 0,d)}function o(u,d){if(H.isUndefined(d)){if(!H.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d)=>i(j1(u),j1(d),!0)};return H.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||i,f=h(t[d],e[d],d);H.isUndefined(f)&&h!==a||(n[d]=f)}),n}const WP=t=>{const e=ia({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=sr.from(o),e.url=UP(HP(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(H.isFormData(n)){if(ir.hasStandardBrowserEnv||ir.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(ir.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(e)),r||r!==!1&&Z5(e.url))){const u=i&&s&&e9.read(s);u&&o.set(i,u)}return e},r9=typeof XMLHttpRequest<"u",i9=r9&&function(t){return new Promise(function(n,r){const i=WP(t);let s=i.data;const o=sr.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,d,h,f,p,y;function w(){p&&p(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function T(){if(!S)return;const E=sr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:E,config:t,request:S};zP(function(C){n(C),w()},function(C){r(C),w()},O),S=null}"onloadend"in S?S.onloadend=T:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(T)},S.onabort=function(){S&&(r(new je("Request aborted",je.ECONNABORTED,t,S)),S=null)},S.onerror=function(){r(new je("Network Error",je.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||jP;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),r(new je(b,O.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,t,S)),S=null},s===void 0&&o.setContentType(null),"setRequestHeader"in S&&H.forEach(o.toJSON(),function(b,O){S.setRequestHeader(O,b)}),H.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),a&&a!=="json"&&(S.responseType=i.responseType),u&&([f,y]=rp(u,!0),S.addEventListener("progress",f)),l&&S.upload&&([h,p]=rp(l),S.upload.addEventListener("progress",h),S.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=E=>{S&&(r(!E||E.type?new Zl(null,t,S):E),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=Y5(i.url);if(_&&ir.protocols.indexOf(_)===-1){r(new je("Unsupported protocol "+_+":",je.ERR_BAD_REQUEST,t));return}S.send(s||null)})},s9=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof je?d:new Zl(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new je(`timeout ${e} of ms exceeded`,je.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>H.asap(a),l}},o9=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},a9=async function*(t,e){for await(const n of l9(t))yield*o9(n,e)},l9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},$1=(t,e,n,r)=>{const i=a9(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){a(),l.close();return}let h=d.byteLength;if(n){let f=s+=h;n(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},_m=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qP=_m&&typeof ReadableStream=="function",u9=_m&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},c9=qP&&KP(()=>{let t=!1;const e=new Request(ir.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),B1=64*1024,C_=qP&&KP(()=>H.isReadableStream(new Response("").body)),ip={stream:C_&&(t=>t.body)};_m&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ip[e]&&(ip[e]=H.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new je(`Response type '${e}' is not supported`,je.ERR_NOT_SUPPORT,r)})})})(new Response);const d9=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(ir.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(H.isArrayBufferView(t)||H.isArrayBuffer(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await u9(t)).byteLength},h9=async(t,e)=>{const n=H.toFiniteNumber(t.getContentLength());return n??d9(e)},f9=_m&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=WP(t);u=u?(u+"").toLowerCase():"text";let p=s9([i,s&&s.toAbortSignal()],o),y;const w=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let S;try{if(l&&c9&&n!=="get"&&n!=="head"&&(S=await h9(d,r))!==0){let O=new Request(e,{method:"POST",body:r,duplex:"half"}),F;if(H.isFormData(r)&&(F=O.headers.get("content-type"))&&d.setContentType(F),O.body){const[C,g]=V1(S,rp(U1(l)));r=$1(O.body,B1,C,g)}}H.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;y=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let _=await fetch(y);const E=C_&&(u==="stream"||u==="response");if(C_&&(a||E&&w)){const O={};["status","statusText","headers"].forEach(R=>{O[R]=_[R]});const F=H.toFiniteNumber(_.headers.get("content-length")),[C,g]=a&&V1(F,rp(U1(a),!0))||[];_=new Response($1(_.body,B1,C,()=>{g&&g(),w&&w()}),O)}u=u||"text";let b=await ip[H.findKey(ip,u)||"text"](_,t);return!E&&w&&w(),await new Promise((O,F)=>{zP(O,F,{data:b,headers:sr.from(_.headers),status:_.status,statusText:_.statusText,config:t,request:y})})}catch(T){throw w&&w(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,t,y),{cause:T.cause||T}):je.from(T,T&&T.code,t,y)}}),b_={http:A5,xhr:i9,fetch:f9};H.forEach(b_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const z1=t=>`- ${t}`,p9=t=>H.isFunction(t)||t===null||t===!1,GP={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!p9(n)&&(r=b_[(o=String(n)).toLowerCase()],r===void 0))throw new je(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(z1).join(`
`):" "+z1(s[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:b_};function Dg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zl(null,t)}function H1(t){return Dg(t),t.headers=sr.from(t.headers),t.data=Og.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),GP.getAdapter(t.adapter||Ed.adapter)(t).then(function(r){return Dg(t),r.data=Og.call(t,t.transformResponse,r),r.headers=sr.from(r.headers),r},function(r){return BP(r)||(Dg(t),r&&r.response&&(r.response.data=Og.call(t,t.transformResponse,r.response),r.response.headers=sr.from(r.response.headers))),Promise.reject(r)})}const QP="1.7.7",hw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{hw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const W1={};hw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+QP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new je(i(o," has been removed"+(n?" in "+n:"")),je.ERR_DEPRECATED);return n&&!W1[o]&&(W1[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function m9(t,e,n){if(typeof t!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new je("option "+s+" must be "+l,je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new je("Unknown option "+s,je.ERR_BAD_OPTION)}}const A_={assertOptions:m9,validators:hw},ms=A_.validators;class Ho{constructor(e){this.defaults=e,this.interceptors={request:new M1,response:new M1}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ia(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&A_.assertOptions(r,{silentJSONParsing:ms.transitional(ms.boolean),forcedJSONParsing:ms.transitional(ms.boolean),clarifyTimeoutError:ms.transitional(ms.boolean)},!1),i!=null&&(H.isFunction(i)?n.paramsSerializer={serialize:i}:A_.assertOptions(i,{encode:ms.function,serialize:ms.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&H.merge(s.common,s[n.method]);s&&H.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=sr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,h=0,f;if(!l){const y=[H1.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,u),f=y.length,d=Promise.resolve(n);h<f;)d=d.then(y[h++],y[h++]);return d}f=a.length;let p=n;for(h=0;h<f;){const y=a[h++],w=a[h++];try{p=y(p)}catch(S){w.call(this,S);break}}try{d=H1.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=ia(this.defaults,e);const n=HP(e.baseURL,e.url);return UP(n,e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(e){Ho.prototype[e]=function(n,r){return this.request(ia(r||{},{method:e,url:n,data:(r||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(ia(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ho.prototype[e]=n(),Ho.prototype[e+"Form"]=n(!0)});class fw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Zl(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new fw(function(i){e=i}),cancel:e}}}function g9(t){return function(n){return t.apply(null,n)}}function y9(t){return H.isObject(t)&&t.isAxiosError===!0}const x_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(x_).forEach(([t,e])=>{x_[e]=t});function YP(t){const e=new Ho(t),n=bP(Ho.prototype.request,e);return H.extend(n,Ho.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return YP(ia(t,i))},n}const Qt=YP(Ed);Qt.Axios=Ho;Qt.CanceledError=Zl;Qt.CancelToken=fw;Qt.isCancel=BP;Qt.VERSION=QP;Qt.toFormData=ym;Qt.AxiosError=je;Qt.Cancel=Qt.CanceledError;Qt.all=function(e){return Promise.all(e)};Qt.spread=g9;Qt.isAxiosError=y9;Qt.mergeConfig=ia;Qt.AxiosHeaders=sr;Qt.formToJSON=t=>$P(H.isHTMLForm(t)?new FormData(t):t);Qt.getAdapter=GP.getAdapter;Qt.HttpStatusCode=x_;Qt.default=Qt;const XP=I.createContext({userArray:[]}),ns=()=>I.useContext(XP);function _9({children:t}){const{db:e,currentUser:n,setCurrentUser:r}=ya(),[i,s]=I.useState(0),[o,a]=I.useState(!1),d={getProjects:async()=>{try{const h=im(e,"projects"),f=await nw(h);let p=[];return f.forEach(y=>{p.push(y.data())}),p}catch{return[]}},transformCloudinaryURL:h=>{if(h==="https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg")return h;const f="q_auto,f_auto",p=h.indexOf("/upload")+7;return h.slice(0,p)+`/${f}`+h.slice(p)},setProgress:s,progress:i,setIsSearchOpen:a,isSearchOpen:o};return D.jsx(XP.Provider,{value:d,children:t})}function v9(){const{currentUser:t,loginUzer:e,setCurrentUser:n}=ya(),r=pa(),{register:i,handleSubmit:s,formState:{errors:o,isSubmitting:a,isSubmitted:l}}=Zv(),u=async d=>{try{e(d.email,d.password).then(h=>{Oi("Login Successful 🥳","success","bottom-center",2e3),r("/project-bazaar-src/",{replace:!0}),n(h.user)}).catch(h=>{h.message==="Firebase: Error (auth/invalid-credential)."?Oi("Invalid User Credentials","error","bottom-center",4e3):Oi(h.message,"error","bottom-center",4e3)})}catch(h){Oi(h.message,"error","bottom-center",4e3)}};return I.useEffect(()=>{t!==null&&r("/project-bazaar-src/")},[t]),D.jsx(D.Fragment,{children:D.jsxs("div",{className:"flex bg-cyan-100 min-h-full  flex-1 flex-col border-2 border-cyan-200  shadow-2xl justify-center px-6 py-10 lg:px-8 m-auto w-80 my-5 rounded-md ",children:[D.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[D.jsx("h1",{className:"mt-10 text-center text-4xl font-bold leading-9 tracking-tight text-blue-900",children:"R-Social"}),D.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Login"})]}),D.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[D.jsxs("form",{onSubmit:s(u),className:"space-y-5",children:[D.jsxs("div",{children:[D.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email"}),D.jsx("div",{className:"mt-2",children:D.jsx("input",{autoFocus:!0,id:"email",name:"email",type:"email",required:!0,...i("email",{required:!0}),autoComplete:"email",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 "})})]}),D.jsxs("div",{children:[D.jsx("div",{className:"flex items-center justify-between",children:D.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),D.jsx("div",{className:"mt-2",children:D.jsx("input",{...i("password",{required:!0,minLength:{value:8,message:"Password must have atleast 8 characters"},maxLength:{value:16,message:"Password must have maximum 16 characters"}}),id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),o.password&&D.jsx("p",{role:"alert",className:"text-red-600",children:o.password.message})]}),D.jsx("div",{children:D.jsxs("button",{disabled:a||t,type:"submit",className:`flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${t?"disabled disabled:bg-slate-500":""}`,children:["Sign in ",D.jsx("span",{children:a&&D.jsx(fm,{type:"spin",color:"white"})})]})})]}),D.jsx("br",{}),!t&&D.jsxs("div",{children:[D.jsx("p",{children:"Not a Registered User?"}),D.jsx(fi,{to:"/project-bazaar-src/register",children:D.jsx("p",{className:"text-blue-700 font-semibold",children:"Register"})})]})]})]})})}var q1={};const K1="@firebase/database",G1="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JP="";function w9(t){JP=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Lc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ss(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new E9(e)}}catch{}return new T9},Mo=ZP("localStorage"),S9=ZP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new jp("@firebase/database"),I9=function(){let t=1;return function(){return t++}}(),ek=function(t){const e=IF(t),n=new vF;n.update(e);const r=n.digest();return a0.encodeByteArray(r)},Td=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Td.apply(null,r):typeof r=="object"?e+=cn(r):e+=r,e+=" "}return e};let cc=null,Q1=!0;const R9=function(t,e){ce(!e,"Can't turn on custom loggers persistently."),hl.logLevel=We.VERBOSE,cc=hl.log.bind(hl)},bn=function(...t){if(Q1===!0&&(Q1=!1,cc===null&&S9.get("logging_enabled")===!0&&R9()),cc){const e=Td.apply(null,t);cc(e)}},Sd=function(t){return function(...e){bn(t,...e)}},P_=function(...t){const e="FIREBASE INTERNAL ERROR: "+Td(...t);hl.error(e)},sa=function(...t){const e=`FIREBASE FATAL ERROR: ${Td(...t)}`;throw hl.error(e),new Error(e)},_r=function(...t){const e="FIREBASE WARNING: "+Td(...t);hl.warn(e)},C9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_r("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},b9=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ll="[MIN_NAME]",oa="[MAX_NAME]",eu=function(t,e){if(t===e)return 0;if(t===Ll||e===oa)return-1;if(e===Ll||t===oa)return 1;{const n=Y1(t),r=Y1(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},A9=function(t,e){return t===e?0:t<e?-1:1},ku=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+cn(e))},pw=function(t){if(typeof t!="object"||t===null)return cn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=cn(e[r]),n+=":",n+=pw(t[e[r]]);return n+="}",n},nk=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Mr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const rk=function(t){ce(!tk(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},x9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},P9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},k9=new RegExp("^-?(0*)\\d{1,10}$"),N9=-2147483648,O9=2147483647,Y1=function(t){if(k9.test(t)){const e=Number(t);if(e>=N9&&e<=O9)return e}return null},Id=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _r("Exception was thrown by user callback.",n),e},Math.floor(0))}},D9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_r(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_r(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="5",ik="v",sk="s",ok="r",ak="f",lk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uk="ls",ck="p",k_="ac",dk="websocket",hk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function V9(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function fk(t,e,n){ce(typeof e=="string","typeof type must == string"),ce(typeof n=="object","typeof params must == object");let r;if(e===dk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===hk)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);V9(t)&&(n.ns=t.namespace);const i=[];return Mr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.counters_={}}incrementCounter(e,n=1){ss(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return tF(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg={},Mg={};function gw(t){const e=t.toString();return Lg[e]||(Lg[e]=new U9),Lg[e]}function j9(t,e){const n=t.toString();return Mg[n]||(Mg[n]=e()),Mg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Id(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="start",B9="close",z9="pLPCommand",H9="pRTLPCB",pk="id",mk="pw",gk="ser",W9="cb",q9="seg",K9="ts",G9="d",Q9="dframe",yk=1870,_k=30,Y9=yk-_k,X9=25e3,J9=3e4;class el{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sd(e),this.stats_=gw(n),this.urlFn=l=>(this.appCheckToken&&(l[k_]=this.appCheckToken),fk(n,hk,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $9(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(J9)),b9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yw((...s)=>{const[o,a,l,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===X1)this.id=a,this.password=l;else if(o===B9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[X1]="t",r[gk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[W9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ik]=mw,this.transportSessionId&&(r[sk]=this.transportSessionId),this.lastSessionId&&(r[uk]=this.lastSessionId),this.applicationId&&(r[ck]=this.applicationId),this.appCheckToken&&(r[k_]=this.appCheckToken),typeof location<"u"&&location.hostname&&lk.test(location.hostname)&&(r[ok]=ak);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){el.forceAllow_=!0}static forceDisallow(){el.forceDisallow_=!0}static isAvailable(){return el.forceAllow_?!0:!el.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!x9()&&!P9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=cn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Vb(n),i=nk(r,Y9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Q9]="t",r[pk]=e,r[mk]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=cn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class yw{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=I9(),window[z9+this.uniqueCallbackIdentifier]=e,window[H9+this.uniqueCallbackIdentifier]=n,this.myIFrame=yw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){bn("frame writing exception"),a.stack&&bn(a.stack),bn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[pk]=this.myID,e[mk]=this.myPW,e[gk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_k+r.length<=yk;){const o=this.pendingSegs.shift();r=r+"&"+q9+i+"="+o.seg+"&"+K9+i+"="+o.ts+"&"+G9+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(X9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{bn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=16384,ez=45e3;let sp=null;typeof MozWebSocket<"u"?sp=MozWebSocket:typeof WebSocket<"u"&&(sp=WebSocket);class Gr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sd(this.connId),this.stats_=gw(n),this.connURL=Gr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[ik]=mw,typeof location<"u"&&location.hostname&&lk.test(location.hostname)&&(o[ok]=ak),n&&(o[sk]=n),r&&(o[uk]=r),i&&(o[k_]=i),s&&(o[ck]=s),fk(e,dk,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mo.set("previous_websocket_failure",!0);try{let r;qb(),this.mySock=new sp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Gr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&sp!==null&&!Gr.forceDisallow_}static previouslyFailed(){return Mo.isInMemoryStorage||Mo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Lc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=cn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=nk(n,Z9);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ez))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Gr.responsesRequiredToBeHealthy=2;Gr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[el,Gr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Gr&&Gr.isAvailable();let r=n&&!Gr.previouslyFailed();if(e.webSocketOnly&&(n||_r("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Gr];else{const i=this.transports_=[];for(const s of Gc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Gc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Gc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=6e4,nz=5e3,rz=10*1024,iz=100*1024,Fg="t",J1="d",sz="s",Z1="r",oz="e",eI="o",tI="a",nI="n",rI="p",az="h";class lz{constructor(e,n,r,i,s,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sd("c:"+this.id+":"),this.transportManager_=new Gc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=dc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fg in e){const n=e[Fg];n===tI?this.upgradeIfSecondaryHealthy_():n===Z1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===eI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ku("t",e),r=ku("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ku("t",e),r=ku("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ku(Fg,e);if(J1 in e){const r=e[J1];if(n===az){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===nI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sz?this.onConnectionShutdown_(r):n===Z1?this.onReset_(r):n===oz?P_("Server Error: "+r):n===eI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mw!==r&&_r("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),dc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends wk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!u0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new op}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=32,sI=768;class Ct{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ut(){return new Ct("")}function Xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xs(t){return t.pieces_.length-t.pieceNum_}function Et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ct(t.pieces_,e)}function Ek(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function uz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Tk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Sk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ct(e,0)}function sn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ct)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ct(n,0)}function Qe(t){return t.pieceNum_>=t.pieces_.length}function Pr(t,e){const n=Xe(t),r=Xe(e);if(n===null)return e;if(n===r)return Pr(Et(t),Et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ik(t,e){if(Xs(t)!==Xs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xs(t)>Xs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class cz{constructor(e,n){this.errorPrefix_=n,this.parts_=Tk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Up(this.parts_[r]);Rk(this)}}function dz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Up(e),Rk(t)}function hz(t){const e=t.parts_.pop();t.byteLength_-=Up(e),t.parts_.length>0&&(t.byteLength_-=1)}function Rk(t){if(t.byteLength_>sI)throw new Error(t.errorPrefix_+"has a key path longer than "+sI+" bytes ("+t.byteLength_+").");if(t.parts_.length>iI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iI+") or object contains a cycle "+bo(t))}function bo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends wk{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new _w}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=1e3,fz=60*5*1e3,oI=30*1e3,pz=1.3,mz=3e4,gz="server_kill",aI=3;class Wi extends vk{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Wi.nextPersistentConnectionId_++,this.log_=Sd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nu,this.maxReconnectDelay_=fz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!qb())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_w.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&op.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(cn(s)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new l0,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;Wi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ss(e,"w")){const r=Il(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();_r(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||_F(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=oI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=yF(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):P_("Unrecognized action received from server: "+cn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>mz&&(this.reconnectDelay_=Nu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*pz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Wi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?bn("getToken() completed but was canceled"):(bn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new lz(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{_r(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(gz)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&_r(h),l())}}}interrupt(e){bn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Gy(this.interruptReasons_)&&(this.reconnectDelay_=Nu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>pw(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ct(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){bn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=aI&&(this.reconnectDelay_=oI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){bn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=aI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+JP.replace(/\./g,"-")]=1,u0()?e["framework.cordova"]=1:Wb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=op.getInstance().currentlyOnline();return Gy(this.interruptReasons_)&&e}}Wi.nextPersistentConnectionId_=0;Wi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(Ll,e),i=new Je(Ll,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih;class Ck extends vm{static get __EMPTY_NODE(){return Ih}static set __EMPTY_NODE(e){Ih=e}compare(e,n){return eu(e.name,n.name)}isDefinedOn(e){throw zl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(oa,Ih)}makePost(e,n){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Ih)}toString(){return".key"}}const fl=new Ck;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rn.RED,this.left=i??er.EMPTY_NODE,this.right=s??er.EMPTY_NODE}copy(e,n,r,i,s){return new rn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return er.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return er.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rn.RED=!0;rn.BLACK=!1;class yz{copy(e,n,r,i,s){return this}insert(e,n,r){return new rn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class er{constructor(e,n=er.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new er(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rn.BLACK,null,null))}remove(e){return new er(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Rh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Rh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Rh(this.root_,null,this.comparator_,!0,e)}}er.EMPTY_NODE=new yz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _z(t,e){return eu(t.name,e.name)}function vw(t,e){return eu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N_;function vz(t){N_=t}const bk=function(t){return typeof t=="number"?"number:"+rk(t):"string:"+t},Ak=function(t){if(t.isLeafNode()){const e=t.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ss(e,".sv"),"Priority must be a string or number.")}else ce(t===N_||t.isEmpty(),"priority of unexpected type.");ce(t===N_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lI;class en{constructor(e,n=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ak(this.priorityNode_)}static set __childrenNodeConstructor(e){lI=e}static get __childrenNodeConstructor(){return lI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Qe(e)?this:Xe(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Xe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||Xs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(Et(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+bk(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=rk(this.value_):e+=this.value_,this.lazyHash_=ek(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=en.VALUE_TYPE_ORDER.indexOf(n),s=en.VALUE_TYPE_ORDER.indexOf(r);return ce(i>=0,"Unknown leaf type: "+n),ce(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xk,Pk;function wz(t){xk=t}function Ez(t){Pk=t}class Tz extends vm{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?eu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(oa,new en("[PRIORITY-POST]",Pk))}makePost(e,n){const r=xk(e);return new Je(n,new en("[PRIORITY-POST]",r))}toString(){return".priority"}}const kn=new Tz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=Math.log(2);class Iz{constructor(e){const n=s=>parseInt(Math.log(s)/Sz,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ap=function(t,e,n,r){t.sort(e);const i=function(l,u){const d=u-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new rn(f,h.node,rn.BLACK,null,null);{const p=parseInt(d/2,10)+l,y=i(l,p),w=i(p+1,u);return h=t[p],f=n?n(h):h,new rn(f,h.node,rn.BLACK,y,w)}},s=function(l){let u=null,d=null,h=t.length;const f=function(y,w){const S=h-y,T=h;h-=y;const _=i(S+1,T),E=t[S],b=n?n(E):E;p(new rn(b,E.node,w,null,_))},p=function(y){u?(u.left=y,u=y):(d=y,u=y)};for(let y=0;y<l.count;++y){const w=l.nextBitIsOne(),S=Math.pow(2,l.count-(y+1));w?f(S,rn.BLACK):(f(S,rn.BLACK),f(S,rn.RED))}return d},o=new Iz(t.length),a=s(o);return new er(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg;const Da={};class ji{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ce(Da&&kn,"ChildrenNode.ts has not been loaded"),Vg=Vg||new ji({".priority":Da},{".priority":kn}),Vg}get(e){const n=Il(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof er?n:null}hasIndex(e){return ss(this.indexSet_,e.toString())}addIndex(e,n){ce(e!==fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ap(r,e.getCompare()):a=Da;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new ji(d,u)}addToIndexes(e,n){const r=Uf(this.indexes_,(i,s)=>{const o=Il(this.indexSet_,s);if(ce(o,"Missing index implementation for "+s),i===Da)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),ap(a,o.getCompare())}else return Da;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new ji(r,this.indexSet_)}removeFromIndexes(e,n){const r=Uf(this.indexes_,i=>{if(i===Da)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new ji(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ou;class it{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ak(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ou||(Ou=new it(new er(vw),null,ji.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ou}updatePriority(e){return this.children_.isEmpty()?this:new it(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ou:n}}getChild(e){const n=Xe(e);return n===null?this:this.getImmediateChild(n).getChild(Et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Ou:this.priorityNode_;return new it(i,o,s)}}updateChild(e,n){const r=Xe(e);if(r===null)return n;{ce(Xe(e)!==".priority"||Xs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Et(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(kn,(o,a)=>{n[o]=a.val(e),r++,s&&it.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+bk(this.getPriority().val())+":"),this.forEachChild(kn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ek(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Rd?-1:0}withIndex(e){if(e===fl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new it(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(kn),i=n.getIterator(kn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fl?null:this.indexMap_.get(e.toString())}}it.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rz extends it{constructor(){super(new er(vw),it.EMPTY_NODE,ji.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}}const Rd=new Rz;Object.defineProperties(Je,{MIN:{value:new Je(Ll,it.EMPTY_NODE)},MAX:{value:new Je(oa,Rd)}});Ck.__EMPTY_NODE=it.EMPTY_NODE;en.__childrenNodeConstructor=it;vz(Rd);Ez(Rd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=!0;function An(t,e=null){if(t===null)return it.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new en(n,An(e))}if(!(t instanceof Array)&&Cz){const n=[];let r=!1;if(Mr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=An(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return it.EMPTY_NODE;const s=ap(n,_z,o=>o.name,vw);if(r){const o=ap(n,kn.getCompare());return new it(s,An(e),new ji({".priority":o},{".priority":kn}))}else return new it(s,An(e),ji.Default)}else{let n=it.EMPTY_NODE;return Mr(t,(r,i)=>{if(ss(t,r)&&r.substring(0,1)!=="."){const s=An(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(An(e))}}wz(An);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz extends vm{constructor(e){super(),this.indexPath_=e,ce(!Qe(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?eu(e.name,n.name):s}makePost(e,n){const r=An(e),i=it.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=it.EMPTY_NODE.updateChild(this.indexPath_,Rd);return new Je(oa,e)}toString(){return Tk(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az extends vm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?eu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=An(e);return new Je(n,r)}toString(){return".value"}}const xz=new Az;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){return{type:"value",snapshotNode:t}}function kz(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Nz(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function uI(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Oz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new ww;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===kn?n="$priority":t.index_===xz?n="$value":t.index_===fl?n="$key":(ce(t.index_ instanceof bz,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=cn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=cn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+cn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=cn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+cn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==kn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends vk{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Sd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=lp.getListenId_(e,r),a={};this.listens_[o]=a;const l=cI(e._queryParams);this.restRequest_(s+".json",l,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),Il(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=lp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=cI(e._queryParams),r=e._path.toString(),i=new l0;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Hl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Lc(a.responseText)}catch{_r("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&_r("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(){return{value:null,children:new Map}}function kk(t,e,n){if(Qe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Xe(e);t.children.has(r)||t.children.set(r,up());const i=t.children.get(r);e=Et(e),kk(i,e,n)}}function O_(t,e,n){t.value!==null?n(e,t.value):Lz(t,(r,i)=>{const s=new Ct(e.toString()+"/"+r);O_(i,s,n)})}function Lz(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Mr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=10*1e3,Fz=30*1e3,Vz=5*60*1e3;class Uz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Mz(e);const r=hI+(Fz-hI)*Math.random();dc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Mr(e,(i,s)=>{s>0&&ss(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),dc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Vz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mi||(mi={}));function Nk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ok(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mi.ACK_USER_WRITE,this.source=Nk()}operationForChild(e){if(Qe(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ct(e));return new cp(ut(),n,this.revert)}}else return ce(Xe(this.path)===e,"operationForChild called for unrelated child."),new cp(Et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mi.OVERWRITE}operationForChild(e){return Qe(this.path)?new aa(this.source,ut(),this.snap.getImmediateChild(e)):new aa(this.source,Et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mi.MERGE}operationForChild(e){if(Qe(this.path)){const n=this.children.subtree(new Ct(e));return n.isEmpty()?null:n.value?new aa(this.source,ut(),n.value):new Qc(this.source,ut(),n)}else return ce(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qc(this.source,Et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jz(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Oz(o.childName,o.snapshotNode))}),Du(t,i,"child_removed",e,r,n),Du(t,i,"child_added",e,r,n),Du(t,i,"child_moved",s,r,n),Du(t,i,"child_changed",e,r,n),Du(t,i,"value",e,r,n),i}function Du(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Bz(t,a,l)),o.forEach(a=>{const l=$z(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function $z(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Bz(t,e,n){if(e.childName==null||n.childName==null)throw zl("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e){return{eventCache:t,serverCache:e}}function hc(t,e,n,r){return Lk(new Ew(e,n,r),t.serverCache)}function Mk(t,e,n,r){return Lk(t.eventCache,new Ew(e,n,r))}function D_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function la(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ug;const zz=()=>(Ug||(Ug=new er(A9)),Ug);class wt{constructor(e,n=zz()){this.value=e,this.children=n}static fromObject(e){let n=new wt(null);return Mr(e,(r,i)=>{n=n.set(new Ct(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ut(),value:this.value};if(Qe(e))return null;{const r=Xe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Et(e),n);return s!=null?{path:sn(new Ct(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qe(e))return this;{const n=Xe(e),r=this.children.get(n);return r!==null?r.subtree(Et(e)):new wt(null)}}set(e,n){if(Qe(e))return new wt(n,this.children);{const r=Xe(e),s=(this.children.get(r)||new wt(null)).set(Et(e),n),o=this.children.insert(r,s);return new wt(this.value,o)}}remove(e){if(Qe(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const n=Xe(e),r=this.children.get(n);if(r){const i=r.remove(Et(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new wt(null):new wt(this.value,s)}else return this}}get(e){if(Qe(e))return this.value;{const n=Xe(e),r=this.children.get(n);return r?r.get(Et(e)):null}}setTree(e,n){if(Qe(e))return n;{const r=Xe(e),s=(this.children.get(r)||new wt(null)).setTree(Et(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new wt(this.value,o)}}fold(e){return this.fold_(ut(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(sn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ut(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Qe(e))return null;{const s=Xe(e),o=this.children.get(s);return o?o.findOnPath_(Et(e),sn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ut(),n)}foreachOnPath_(e,n,r){if(Qe(e))return this;{this.value&&r(n,this.value);const i=Xe(e),s=this.children.get(i);return s?s.foreachOnPath_(Et(e),sn(n,i),r):new wt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(sn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.writeTree_=e}static empty(){return new ei(new wt(null))}}function fc(t,e,n){if(Qe(e))return new ei(new wt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Pr(i,e);return s=s.updateChild(o,n),new ei(t.writeTree_.set(i,s))}else{const i=new wt(n),s=t.writeTree_.setTree(e,i);return new ei(s)}}}function fI(t,e,n){let r=t;return Mr(n,(i,s)=>{r=fc(r,sn(e,i),s)}),r}function pI(t,e){if(Qe(e))return ei.empty();{const n=t.writeTree_.setTree(e,new wt(null));return new ei(n)}}function L_(t,e){return _a(t,e)!=null}function _a(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pr(n.path,e)):null}function mI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kn,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function Hs(t,e){if(Qe(e))return t;{const n=_a(t,e);return n!=null?new ei(new wt(n)):new ei(t.writeTree_.subtree(e))}}function M_(t){return t.writeTree_.isEmpty()}function Ml(t,e){return Fk(ut(),t.writeTree_,e)}function Fk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ce(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Fk(sn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(sn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t,e){return zk(e,t)}function Hz(t,e,n,r,i){ce(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=fc(t.visibleWrites,e,n)),t.lastWriteId=r}function Wz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function qz(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ce(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Kz(a,r.path)?i=!1:Yr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Gz(t),!0;if(r.snap)t.visibleWrites=pI(t.visibleWrites,r.path);else{const a=r.children;Mr(a,l=>{t.visibleWrites=pI(t.visibleWrites,sn(r.path,l))})}return!0}else return!1}function Kz(t,e){if(t.snap)return Yr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yr(sn(t.path,n),e))return!0;return!1}function Gz(t){t.visibleWrites=Uk(t.allWrites,Qz,ut()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Qz(t){return t.visible}function Uk(t,e,n){let r=ei.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Yr(n,o)?(a=Pr(n,o),r=fc(r,a,s.snap)):Yr(o,n)&&(a=Pr(o,n),r=fc(r,ut(),s.snap.getChild(a)));else if(s.children){if(Yr(n,o))a=Pr(n,o),r=fI(r,a,s.children);else if(Yr(o,n))if(a=Pr(o,n),Qe(a))r=fI(r,ut(),s.children);else{const l=Il(s.children,Xe(a));if(l){const u=l.getChild(Et(a));r=fc(r,ut(),u)}}}else throw zl("WriteRecord should have .snap or .children")}}return r}function jk(t,e,n,r,i){if(!r&&!i){const s=_a(t.visibleWrites,e);if(s!=null)return s;{const o=Hs(t.visibleWrites,e);if(M_(o))return n;if(n==null&&!L_(o,ut()))return null;{const a=n||it.EMPTY_NODE;return Ml(o,a)}}}else{const s=Hs(t.visibleWrites,e);if(!i&&M_(s))return n;if(!i&&n==null&&!L_(s,ut()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Yr(u.path,e)||Yr(e,u.path))},a=Uk(t.allWrites,o,e),l=n||it.EMPTY_NODE;return Ml(a,l)}}}function Yz(t,e,n){let r=it.EMPTY_NODE;const i=_a(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Hs(t.visibleWrites,e);return n.forEachChild(kn,(o,a)=>{const l=Ml(Hs(s,new Ct(o)),a);r=r.updateImmediateChild(o,l)}),mI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Hs(t.visibleWrites,e);return mI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Xz(t,e,n,r,i){ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=sn(e,n);if(L_(t.visibleWrites,s))return null;{const o=Hs(t.visibleWrites,s);return M_(o)?i.getChild(n):Ml(o,i.getChild(n))}}function Jz(t,e,n,r){const i=sn(e,n),s=_a(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Hs(t.visibleWrites,i);return Ml(o,r.getNode().getImmediateChild(n))}else return null}function Zz(t,e){return _a(t.visibleWrites,e)}function eH(t,e,n,r,i,s,o){let a;const l=Hs(t.visibleWrites,e),u=_a(l,ut());if(u!=null)a=u;else if(n!=null)a=Ml(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<i;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function tH(){return{visibleWrites:ei.empty(),allWrites:[],lastWriteId:-1}}function F_(t,e,n,r){return jk(t.writeTree,t.treePath,e,n,r)}function $k(t,e){return Yz(t.writeTree,t.treePath,e)}function gI(t,e,n,r){return Xz(t.writeTree,t.treePath,e,n,r)}function dp(t,e){return Zz(t.writeTree,sn(t.treePath,e))}function nH(t,e,n,r,i,s){return eH(t.writeTree,t.treePath,e,n,r,i,s)}function Tw(t,e,n){return Jz(t.writeTree,t.treePath,e,n)}function Bk(t,e){return zk(sn(t.treePath,e),t.writeTree)}function zk(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,uI(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Nz(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,kz(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,uI(r,e.snapshotNode,i.oldSnap));else throw zl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Hk=new iH;class Sw{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ew(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tw(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:la(this.viewCache_),s=nH(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function sH(t,e){ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oH(t,e,n,r,i){const s=new rH;let o,a;if(n.type===mi.OVERWRITE){const u=n;u.source.fromUser?o=V_(t,e,u.path,u.snap,r,i,s):(ce(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Qe(u.path),o=hp(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===mi.MERGE){const u=n;u.source.fromUser?o=lH(t,e,u.path,u.children,r,i,s):(ce(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=U_(t,e,u.path,u.children,r,i,a,s))}else if(n.type===mi.ACK_USER_WRITE){const u=n;u.revert?o=dH(t,e,u.path,r,i,s):o=uH(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===mi.LISTEN_COMPLETE)o=cH(t,e,n.path,r,s);else throw zl("Unknown operation type: "+n.type);const l=s.getChanges();return aH(e,o,l),{viewCache:o,changes:l}}function aH(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=D_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Pz(D_(e)))}}function Wk(t,e,n,r,i,s){const o=e.eventCache;if(dp(r,n)!=null)return e;{let a,l;if(Qe(n))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=la(e),d=u instanceof it?u:it.EMPTY_NODE,h=$k(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=F_(r,la(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Xe(n);if(u===".priority"){ce(Xs(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=gI(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Et(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=gI(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Tw(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,i,s):a=o.getNode()}}return hc(e,a,o.isFullyInitialized()||Qe(n),t.filter.filtersNodes())}}function hp(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(Qe(n))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);u=d.updateFullNode(l.getNode(),p,null)}else{const p=Xe(n);if(!l.isCompleteForPath(n)&&Xs(n)>1)return e;const y=Et(n),S=l.getNode().getImmediateChild(p).updateChild(y,r);p===".priority"?u=d.updatePriority(l.getNode(),S):u=d.updateChild(l.getNode(),p,S,y,Hk,null)}const h=Mk(e,u,l.isFullyInitialized()||Qe(n),d.filtersNodes()),f=new Sw(i,h,s);return Wk(t,h,n,i,f,a)}function V_(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const d=new Sw(i,e,s);if(Qe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=hc(e,u,!0,t.filter.filtersNodes());else{const h=Xe(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=hc(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=Et(n),p=a.getNode().getImmediateChild(h);let y;if(Qe(f))y=r;else{const w=d.getCompleteChild(h);w!=null?Ek(f)===".priority"&&w.getChild(Sk(f)).isEmpty()?y=w:y=w.updateChild(f,r):y=it.EMPTY_NODE}if(p.equals(y))l=e;else{const w=t.filter.updateChild(a.getNode(),h,y,f,d,o);l=hc(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function yI(t,e){return t.eventCache.isCompleteForChild(e)}function lH(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const d=sn(n,l);yI(e,Xe(d))&&(a=V_(t,a,d,u,i,s,o))}),r.foreach((l,u)=>{const d=sn(n,l);yI(e,Xe(d))||(a=V_(t,a,d,u,i,s,o))}),a}function _I(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function U_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Qe(n)?u=r:u=new wt(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),y=_I(t,p,f);l=hp(t,l,new Ct(h),y,i,s,o,a)}}),u.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const y=e.serverCache.getNode().getImmediateChild(h),w=_I(t,y,f);l=hp(t,l,new Ct(h),w,i,s,o,a)}}),l}function uH(t,e,n,r,i,s,o){if(dp(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Qe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return hp(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Qe(n)){let u=new wt(null);return l.getNode().forEachChild(fl,(d,h)=>{u=u.set(new Ct(d),h)}),U_(t,e,n,u,i,s,a,o)}else return e}else{let u=new wt(null);return r.foreach((d,h)=>{const f=sn(n,d);l.isCompleteForPath(f)&&(u=u.set(d,l.getNode().getChild(f)))}),U_(t,e,n,u,i,s,a,o)}}function cH(t,e,n,r,i){const s=e.serverCache,o=Mk(e,s.getNode(),s.isFullyInitialized()||Qe(n),s.isFiltered());return Wk(t,o,n,r,Hk,i)}function dH(t,e,n,r,i,s){let o;if(dp(r,n)!=null)return e;{const a=new Sw(r,e,i),l=e.eventCache.getNode();let u;if(Qe(n)||Xe(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=F_(r,la(e));else{const h=e.serverCache.getNode();ce(h instanceof it,"serverChildren would be complete if leaf node"),d=$k(r,h)}d=d,u=t.filter.updateFullNode(l,d,s)}else{const d=Xe(n);let h=Tw(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?u=t.filter.updateChild(l,d,h,Et(n),a,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,it.EMPTY_NODE,Et(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=F_(r,la(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||dp(r,ut())!=null,hc(e,u,o,t.filter.filtersNodes())}}function hH(t,e){const n=la(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Qe(e)&&!n.getImmediateChild(Xe(e)).isEmpty())?n.getChild(e):null}function vI(t,e,n,r){e.type===mi.MERGE&&e.source.queryId!==null&&(ce(la(t.viewCache_),"We should always have a full cache before handling merges"),ce(D_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=oH(t.processor_,i,e,n,r);return sH(t.processor_,s.viewCache),ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,fH(t,s.changes,s.viewCache.eventCache.getNode())}function fH(t,e,n,r){const i=t.eventRegistrations_;return jz(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wI;function pH(t){ce(!wI,"__referenceConstructor has already been defined"),wI=t}function Iw(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ce(s!=null,"SyncTree gave us an op for an invalid query."),vI(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(vI(o,e,n,r));return s}}function Rw(t,e){let n=null;for(const r of t.views.values())n=n||hH(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EI;function mH(t){ce(!EI,"__referenceConstructor has already been defined"),EI=t}class TI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=tH(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gH(t,e,n,r,i){return Hz(t.pendingWriteTree_,e,n,r,i),i?Em(t,new aa(Nk(),e,n)):[]}function tl(t,e,n=!1){const r=Wz(t.pendingWriteTree_,e);if(qz(t.pendingWriteTree_,e)){let s=new wt(null);return r.snap!=null?s=s.set(ut(),!0):Mr(r.children,o=>{s=s.set(new Ct(o),!0)}),Em(t,new cp(r.path,s,n))}else return[]}function wm(t,e,n){return Em(t,new aa(Ok(),e,n))}function yH(t,e,n){const r=wt.fromObject(n);return Em(t,new Qc(Ok(),e,r))}function _H(t,e,n,r){const i=Qk(t,r);if(i!=null){const s=Yk(i),o=s.path,a=s.queryId,l=Pr(o,e),u=new aa(Dk(a),l,n);return Xk(t,o,u)}else return[]}function vH(t,e,n,r){const i=Qk(t,r);if(i){const s=Yk(i),o=s.path,a=s.queryId,l=Pr(o,e),u=wt.fromObject(n),d=new Qc(Dk(a),l,u);return Xk(t,o,d)}else return[]}function qk(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Pr(o,e),u=Rw(a,l);if(u)return u});return jk(i,e,s,n,!0)}function Em(t,e){return Kk(e,t.syncPointTree_,null,Vk(t.pendingWriteTree_,ut()))}function Kk(t,e,n,r){if(Qe(t.path))return Gk(t,e,n,r);{const i=e.get(ut());n==null&&i!=null&&(n=Rw(i,ut()));let s=[];const o=Xe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=Bk(r,o);s=s.concat(Kk(a,l,u,d))}return i&&(s=s.concat(Iw(i,t,r,n))),s}}function Gk(t,e,n,r){const i=e.get(ut());n==null&&i!=null&&(n=Rw(i,ut()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Bk(r,o),d=t.operationForChild(o);d&&(s=s.concat(Gk(d,a,l,u)))}),i&&(s=s.concat(Iw(i,t,r,n))),s}function Qk(t,e){return t.tagToQueryMap.get(e)}function Yk(t){const e=t.indexOf("$");return ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ct(t.substr(0,e))}}function Xk(t,e,n){const r=t.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const i=Vk(t.pendingWriteTree_,e);return Iw(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Cw(n)}node(){return this.node_}}class bw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=sn(this.path_,e);return new bw(this.syncTree_,n)}node(){return qk(this.syncTree_,this.path_)}}const wH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},SI=function(t,e,n){if(!t||typeof t!="object")return t;if(ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return EH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return TH(t[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},EH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ce(!1,"Unexpected server value: "+t)}},TH=function(t,e,n){t.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const i=e.node();if(ce(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},SH=function(t,e,n,r){return Aw(e,new bw(n,t),r)},IH=function(t,e,n){return Aw(t,new Cw(e),n)};function Aw(t,e,n){const r=t.getPriority().val(),i=SI(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=SI(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new en(a,An(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new en(i))),o.forEachChild(kn,(a,l)=>{const u=Aw(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Pw(t,e){let n=e instanceof Ct?e:new Ct(e),r=t,i=Xe(n);for(;i!==null;){const s=Il(r.node.children,i)||{children:{},childCount:0};r=new xw(i,r,s),n=Et(n),i=Xe(n)}return r}function tu(t){return t.node.value}function Jk(t,e){t.node.value=e,j_(t)}function Zk(t){return t.node.childCount>0}function RH(t){return tu(t)===void 0&&!Zk(t)}function Tm(t,e){Mr(t.node.children,(n,r)=>{e(new xw(n,t,r))})}function eN(t,e,n,r){n&&!r&&e(t),Tm(t,i=>{eN(i,e,!0,r)}),n&&r&&e(t)}function CH(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Cd(t){return new Ct(t.parent===null?t.name:Cd(t.parent)+"/"+t.name)}function j_(t){t.parent!==null&&bH(t.parent,t.name,t)}function bH(t,e,n){const r=RH(n),i=ss(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,j_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,j_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/[\[\].#$\/\u0000-\u001F\u007F]/,xH=/[\[\].#$\u0000-\u001F\u007F]/,jg=10*1024*1024,tN=function(t){return typeof t=="string"&&t.length!==0&&!AH.test(t)},PH=function(t){return typeof t=="string"&&t.length!==0&&!xH.test(t)},kH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),PH(t)},nN=function(t,e,n){const r=n instanceof Ct?new cz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bo(r));if(typeof e=="function")throw new Error(t+"contains a function "+bo(r)+" with contents = "+e.toString());if(tk(e))throw new Error(t+"contains "+e.toString()+" "+bo(r));if(typeof e=="string"&&e.length>jg/3&&Up(e)>jg)throw new Error(t+"contains a string greater than "+jg+" utf8 bytes "+bo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Mr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!tN(o)))throw new Error(t+" contains an invalid key ("+o+") "+bo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);dz(r,o),nN(t,a,r),hz(r)}),i&&s)throw new Error(t+' contains ".value" child '+bo(r)+" in addition to actual children.")}},NH=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kH(n))throw new Error(SF(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function DH(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Ik(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function va(t,e,n){DH(t,n),LH(t,r=>Yr(r,e)||Yr(e,r))}function LH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(MH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function MH(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();cc&&bn("event: "+n.toString()),Id(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH="repo_interrupt",VH=25;class UH{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=up(),this.transactionQueueTree_=new xw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jH(t,e,n){if(t.stats_=gw(t.repoInfo_),t.forceRestClient_||D9())t.server_=new lp(t.repoInfo_,(r,i,s,o)=>{II(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>RI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Wi(t.repoInfo_,e,(r,i,s,o)=>{II(t,r,i,s,o)},r=>{RI(t,r)},r=>{BH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=j9(t.repoInfo_,()=>new Uz(t.stats_,t.server_)),t.infoData_=new Dz,t.infoSyncTree_=new TI({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=wm(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kw(t,"connected",!1),t.serverSyncTree_=new TI({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);va(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function $H(t){const n=t.infoData_.getNode(new Ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function rN(t){return wH({timestamp:$H(t)})}function II(t,e,n,r,i){t.dataUpdateCount++;const s=new Ct(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Uf(n,u=>An(u));o=vH(t.serverSyncTree_,s,l,i)}else{const l=An(n);o=_H(t.serverSyncTree_,s,l,i)}else if(r){const l=Uf(n,u=>An(u));o=yH(t.serverSyncTree_,s,l)}else{const l=An(n);o=wm(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ow(t,s)),va(t.eventQueue_,a,o)}function RI(t,e){kw(t,"connected",e),e===!1&&HH(t)}function BH(t,e){Mr(e,(n,r)=>{kw(t,n,r)})}function kw(t,e,n){const r=new Ct("/.info/"+e),i=An(n);t.infoData_.updateSnapshot(r,i);const s=wm(t.infoSyncTree_,r,i);va(t.eventQueue_,r,s)}function zH(t){return t.nextWriteId_++}function HH(t){iN(t,"onDisconnectEvents");const e=rN(t),n=up();O_(t.onDisconnect_,ut(),(i,s)=>{const o=SH(i,s,t.serverSyncTree_,e);kk(n,i,o)});let r=[];O_(n,ut(),(i,s)=>{r=r.concat(wm(t.serverSyncTree_,i,s));const o=GH(t,i);Ow(t,o)}),t.onDisconnect_=up(),va(t.eventQueue_,ut(),r)}function WH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(FH)}function iN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bn(n,...e)}function sN(t,e,n){return qk(t.serverSyncTree_,e,n)||it.EMPTY_NODE}function Nw(t,e=t.transactionQueueTree_){if(e||Sm(t,e),tu(e)){const n=aN(t,e);ce(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&qH(t,Cd(e),n)}else Zk(e)&&Tm(e,n=>{Nw(t,n)})}function qH(t,e,n){const r=n.map(u=>u.currentWriteId),i=sN(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];ce(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Pr(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{iN(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(tl(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Sm(t,Pw(t.transactionQueueTree_,e)),Nw(t,t.transactionQueueTree_),va(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Id(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{_r("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Ow(t,e)}},o)}function Ow(t,e){const n=oN(t,e),r=Cd(n),i=aN(t,n);return KH(t,i,r),r}function KH(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Pr(n,l.path);let d=!1,h;if(ce(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,i=i.concat(tl(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=VH)d=!0,h="maxretry",i=i.concat(tl(t.serverSyncTree_,l.currentWriteId,!0));else{const f=sN(t,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){nN("transaction failed: Data returned ",p,l.path);let y=An(p);typeof p=="object"&&p!=null&&ss(p,".priority")||(y=y.updatePriority(f.getPriority()));const S=l.currentWriteId,T=rN(t),_=IH(y,f,T);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=_,l.currentWriteId=zH(t),o.splice(o.indexOf(S),1),i=i.concat(gH(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(tl(t.serverSyncTree_,S,!0))}else d=!0,h="nodata",i=i.concat(tl(t.serverSyncTree_,l.currentWriteId,!0))}va(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Sm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Id(r[a]);Nw(t,t.transactionQueueTree_)}function oN(t,e){let n,r=t.transactionQueueTree_;for(n=Xe(e);n!==null&&tu(r)===void 0;)r=Pw(r,n),e=Et(e),n=Xe(e);return r}function aN(t,e){const n=[];return lN(t,e,n),n.sort((r,i)=>r.order-i.order),n}function lN(t,e,n){const r=tu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Tm(e,i=>{lN(t,i,n)})}function Sm(t,e){const n=tu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Jk(e,n.length>0?n:void 0)}Tm(e,r=>{Sm(t,r)})}function GH(t,e){const n=Cd(oN(t,e)),r=Pw(t.transactionQueueTree_,e);return CH(r,i=>{$g(t,i)}),$g(t,r),eN(r,i=>{$g(t,i)}),n}function $g(t,e){const n=tu(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ce(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(tl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Jk(e,void 0):n.length=s+1,va(t.eventQueue_,Cd(e),i);for(let o=0;o<r.length;o++)Id(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function YH(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_r(`Invalid query segment '${n}' in query '${t}'`)}return e}const CI=function(t,e){const n=XH(t),r=n.namespace;n.domain==="firebase.com"&&sa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||C9();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new F9(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ct(n.pathString)}},XH=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(i=QH(t.substring(d,h)));const f=YH(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Qe(this._path)?null:Ek(this._path)}get ref(){return new nu(this._repo,this._path)}get _queryIdentifier(){const e=dI(this._queryParams),n=pw(e);return n==="{}"?"default":n}get _queryObject(){return dI(this._queryParams)}isEqual(e){if(e=It(e),!(e instanceof Dw))return!1;const n=this._repo===e._repo,r=Ik(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+uz(this._path)}}class nu extends Dw{constructor(e,n){super(e,n,new ww,!1)}get parent(){const e=Sk(this._path);return e===null?null:new nu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}pH(nu);mH(nu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH="FIREBASE_DATABASE_EMULATOR_HOST",$_={};let ZH=!1;function e8(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=CI(s,i),a=o.repoInfo,l;typeof process<"u"&&q1&&(l=q1[JH]),l?(s=`http://${l}?ns=${a.namespace}`,o=CI(s,i),a=o.repoInfo):o.repoInfo.secure;const u=new M9(t.name,t.options,e);NH("Invalid Firebase Database URL",o),Qe(o.path)||sa("Database URL must point to the root of a Firebase Database (not including a child path).");const d=n8(a,t,u,new L9(t.name,n));return new r8(d,t)}function t8(t,e){const n=$_[e];(!n||n[t.key]!==t)&&sa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),WH(t),delete n[t.key]}function n8(t,e,n,r){let i=$_[e.name];i||(i={},$_[e.name]=i);let s=i[t.toURLString()];return s&&sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new UH(t,ZH,n,r),i[t.toURLString()]=s,s}class r8{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nu(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(t8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&sa("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){w9(ao),Ks(new Xi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return e8(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Nr(K1,G1,t),Nr(K1,G1,"esm2017")}Wi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};i8();function s8(){const t=pa(),{register:e,handleSubmit:n,formState:{errors:r,isSubmitting:i,isSubmitted:s}}=Zv(),{currentUser:o,registerUzer:a,loginWithProvider:l,setCurrentUser:u,db:d}=ya();ns();const h=async()=>l().then(async p=>{Kr.credentialFromResult(p).accessToken;const w=p.user;u(w),t("/project-bazaar-src/")}).catch(p=>{p.code;const y=p.message;Oi(y,"error","bottom-center",4e3),p.customData.email,Kr.credentialFromError(p)}),f=async p=>{try{await a(p.email,p.password).then(async y=>{Oi("User Registered Successfully 🥳","success","bottom-center",2e3);const w=y.user;try{await k4(w,{displayName:p.fname})}catch{}t("/project-bazaar-src/login",{replace:!0})}).catch(y=>{y.message==="Firebase: Error (auth/email-already-in-use)."?Oi("User with this Email already exists!","error","bottom-center",4e3):Oi(y.message,"error","bottom-center",4e3)})}catch(y){Oi(y.message,"error","bottom-center",4e3)}};return D.jsx(D.Fragment,{children:D.jsxs("div",{className:"flex bg-cyan-200 min-h-full  flex-1 flex-col border-2   border-cyan-300  shadow-2xl justify-center px-6 py-7 lg:px-8 m-auto w-80 my-5 rounded-md ",children:[D.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[D.jsx("h1",{className:"mt-10 text-center text-4xl font-bold leading-9 tracking-tight text-blue-900",children:"Project-Lo"}),D.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign Up"})]}),D.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[D.jsxs("form",{onSubmit:n(f),className:"space-y-5",children:[D.jsxs("div",{children:[D.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),D.jsx("div",{className:"mt-2",children:D.jsx("input",{id:"email",name:"email",type:"email",required:!0,...e("email",{required:!0}),autoComplete:"email",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),D.jsxs("div",{children:[D.jsx("label",{htmlFor:"fname",className:"block text-sm font-medium leading-6 text-gray-900",children:"First Name"}),D.jsx("div",{className:"mt-2",children:D.jsx("input",{...e("fname",{required:!0}),id:"fname",name:"fname",type:"text",required:!0,autoComplete:"fname",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),D.jsxs("div",{children:[D.jsx("div",{className:"flex items-center justify-between",children:D.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),D.jsx("div",{className:"mt-2",children:D.jsx("input",{...e("password",{required:!0,minLength:{value:8,message:"Password must have atleast 8 characters"},maxLength:{value:16,message:"Password must have maximum 16 characters"}}),id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),r.password&&D.jsx("p",{role:"alert",className:"text-red-600",children:r.password.message})]}),D.jsx("div",{children:D.jsxs("button",{disabled:i||o,type:"submit",className:`flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${i?"disabled":""} ${o?"disabled disabled:bg-slate-500":""}`,children:["Sign Up",D.jsx("span",{children:i&&D.jsx(fm,{type:"spin",color:"white"})})]})})]}),D.jsx("br",{}),D.jsx("div",{className:"flex items-center justify-center ",children:D.jsxs("button",{disabled:o,onClick:h,className:`px-4 py-2 border flex gap-2 border-slate-200 dark:border-slate-700 rounded-lg text-blue-600 bg-white dark:text-slate-200 hover:border-slate-400 dark:hover:border-slate-500 hover:text-slate-900 dark:hover:text-slate-300 hover:shadow transition duration-150 ${o?"disabled disabled:bg-slate-500":""}`,children:[D.jsx("img",{className:"w-6 h-6",src:"https://www.svgrepo.com/show/475656/google-color.svg",loading:"lazy",alt:"google logo"}),D.jsx("span",{className:"text-slate-600 font-mono size-30 ",children:"Login with Google"})]})}),!o&&D.jsxs("div",{children:[D.jsx("p",{children:"Already a user?"}),D.jsx(fi,{to:"/project-bazaar-src/login",children:D.jsx("p",{className:"text-blue-700 font-semibold",children:"Login"})})]})]})]})})}const o8=({proj_title:t,proj_media_url:e,proj_desc:n,proj_pid:r})=>{const i=(a,l)=>a.length<=l?a:a.slice(0,l)+"...",{transformCloudinaryURL:s}=ns(),o=pa();return D.jsx(D.Fragment,{children:D.jsx("div",{className:"h-auto pt-6 mt-2 items-stretch",children:D.jsx("div",{className:"max-w-sm mx-auto bg-white dark:bg-gray-900 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all hover:shadow-blue-300 h-[450px] flex flex-col justify-between",children:D.jsxs("div",{className:"border-b px-4 pb-6",children:[D.jsxs("div",{className:"text-center my-4",children:[D.jsx(fi,{to:`/project-bazaar-src/project/${r}`,replace:!0,children:e&&!e.includes("firebasestorage")?D.jsx("img",{className:"h-48 w-full object-cover rounded-sm border-4 border-white dark:border-gray-800 mx-auto my-4",src:s(e),alt:"Project Media"}):D.jsxs("video",{autoPlay:!0,controls:!0,className:"object-cover h-48 w-full rounded-sm border-2 border-white dark:border-gray-800 mx-auto my-4",children:[D.jsx("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]})}),D.jsxs("div",{className:"py-2",children:[D.jsx("h3",{className:"font-bold text-xl text-gray-800 dark:text-white mb-1",children:i(t,20)}),D.jsxs("div",{className:"inline-flex text-gray-700 dark:text-gray-300 items-center",children:[D.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-600 mr-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:D.jsx("path",{d:"M5.64 16.36a9 9 0 1 1 12.72 0l-5.65 5.66a1 1 0 0 1-1.42 0l-5.65-5.66zm11.31-1.41a7 7 0 1 0-9.9 0L12 19.9l4.95-4.95zM12 14a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})}),i(n,28)]})]})]}),D.jsx("div",{className:"flex gap-2 px-2 justify-center",children:D.jsx(fi,{to:`/project-bazaar-src/project/${r}`,replace:!0,children:D.jsx("button",{onClick:()=>o(`/project-bazaar-src/project/${t}`),className:"flex-1 rounded-full bg-blue-600 dark:bg-blue-800 text-white font-bold hover:bg-blue-800 dark:hover:bg-blue-900 px-4 py-2",children:"View Project"})})})]})})})})},a8=(t,e=800)=>{const[n,r]=I.useState(t),[i,s]=I.useState(!1);return I.useEffect(()=>{const o=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(o)}},[t,e]),[n,i,s]},Lw=()=>{const{db:t}=ya(),[e,n]=I.useState(""),[r,i]=I.useState([]),[s,o]=I.useState(!1),[a,l]=I.useState(!1),{isSearchOpen:u,setIsSearchOpen:d}=ns(),[h]=a8(e),f=(p,y)=>y?p.split(new RegExp(`(${y})`,"gi")).map((S,T)=>S.toLowerCase()===y.toLowerCase()?D.jsx("span",{className:"text-blue-500",children:S},T):S):p;return I.useEffect(()=>{(async()=>{if(!h||e===""){i([]);return}o(!0);const y=tP(im(t,"projects"),h6("title"),f6(50)),T=(await nw(y)).docs.map(_=>_.data()).filter(_=>_.title.toLowerCase().includes(h.toLowerCase()));i(T),o(!1),l(!0)})()},[h,t]),D.jsx("div",{className:"max-w-md mx-auto bg-white   p-6 mt-0 ",children:D.jsxs("div",{className:"flex flex-col space-y-2",children:[D.jsx("div",{className:"relative",children:D.jsx("input",{type:"text",value:e,onChange:p=>{n(p.target.value),p.target.value===""&&l(!1)},className:"w-full rounded-lg px-3 py-2 bg-gray-100 text-gray-800 outline-none focus:ring-2 ring-2 ring-blue-900 focus:ring-blue-500 focus:ring-opacity-50 shadow-sm",placeholder:"Search Projects...🔍"})}),s?D.jsx("div",{className:"text-center",children:"Loading..."}):D.jsx("div",{className:"mt-4",children:D.jsx("div",{className:"flex flex-wrap gap-3 justify-start text-center",children:r.length>0?r.map(p=>D.jsx(fi,{to:`/project-bazaar-src/project/${p.pid}`,onClick:()=>{d(!1)},children:D.jsx("div",{className:"rounded-lg w-60 h-auto flex flex-col justify-start items-start px-3 py-2 bg-gray-100 hover:bg-gray-200 shadow-sm",children:D.jsx("div",{className:"font-medium text-blue-500 mb-1",children:f(p.title,h)})},p.pid)},p)):a&&D.jsxs("div",{className:"text-gray-500 w-full text-center",children:['No projects found matching "',h,'".']})})})]})})};function l8(){const{getProjects:t}=ns(),[e,n]=I.useState([]),{currentUser:r}=ns(),i=[];return I.useEffect(()=>{t().then(s=>{s.forEach(o=>{i.push(o)}),n(i)}).catch(s=>{})},[]),I.useEffect(()=>{},[r]),D.jsxs(D.Fragment,{children:[D.jsx(Lw,{}),D.jsx("div",{className:"flex gap-2 justify-evenly flex-wrap mx-2 ",children:e==null?void 0:e.map(s=>D.jsx(o8,{proj_title:s.title,proj_desc:s.description,proj_media_url:s.media[0],proj_pid:s.pid},s.title))})]})}const u8=async t=>{try{const e=tP(im(IP,"projects"),d6("pid","==",t)),n=await nw(e);return n.empty?null:n.docs.map(i=>i.data())[0]}catch(e){throw console.error("Error fetching project: ",e),new Error("Failed to fetch project")}},c8=()=>{const{pid:t}=gM(),[e,n]=I.useState(null),[r,i]=I.useState(0),[s,o]=I.useState(!0),{transformCloudinaryURL:a}=ns();if(I.useEffect(()=>{(async()=>{try{const b=await u8(t);n(b),o(!1)}catch(b){console.error("Error fetching project:",b),o(!1)}})()},[t]),s)return D.jsx("div",{children:D.jsx(fm,{})});if(!e)return D.jsx("div",{children:"No project found with the given pid."});const{title:l,description:u,tools:d,platform:h,price:f,media:p}=e,y=()=>{i(E=>(E+1)%p.length)},w=()=>{i(E=>E===0?p.length-1:E-1)},S=E=>E.includes("youtube.com")||E.includes("youtu.be"),T=E=>{const b=E.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/))([a-zA-Z0-9_-]{11})/);return b?b[1]:null},_=()=>{const E=p.findIndex(S);E!==-1&&i(E)};return D.jsxs("div",{className:"flex flex-col items-center p-6 max-w-5xl mx-auto",children:[D.jsxs("div",{className:"relative w-full max-w-2xl",children:[p[r].includes("cloudinary")?D.jsx("img",{src:a(p[r]),alt:`Slide ${r+1}`,className:"w-full h-auto rounded-lg shadow-lg"}):S(p[r])?D.jsx("iframe",{src:`https://www.youtube.com/embed/${T(p[r])}?autoplay=1`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture",allowFullScreen:!0,className:"w-5/6 flex justify-center h-72 rounded-md shadow-lg mx-auto"}):D.jsxs("video",{autoFocus:!0,className:"w-full h-auto rounded-lg shadow-lg",controls:!0,children:[D.jsx("source",{src:p[r],type:"video/mp4"}),"Your browser does not support the video tag."]}),D.jsx("button",{onClick:w,className:"absolute top-1/2 left-1 bg-blue-700 text-white p-2 rounded-full shadow-md transform -translate-y-1/2",children:"←"}),D.jsx("button",{onClick:y,className:"absolute top-1/2 right-1 bg-blue-700 text-white p-2 rounded-full shadow-md transform -translate-y-1/2",children:"→"})]}),D.jsx("div",{children:D.jsx("button",{onClick:_,children:D.jsx("h3",{className:"text-blue-600 underline",children:"Watch Demo Video"})})}),D.jsxs("h2",{className:"text-3xl font-semibold mt-6 mb-4",children:["Title: ",l]}),D.jsxs("p",{className:"text-gray-600 text-lg mb-6",children:["Description: ",u]}),D.jsxs("div",{className:"mb-6",children:[D.jsxs("p",{className:"text-gray-800 font-medium",children:["Tools Used: ",D.jsx("span",{className:"text-gray-600",children:d})]}),D.jsxs("p",{className:"text-gray-800 font-medium",children:["Platform: ",D.jsx("span",{className:"text-gray-600",children:h})]})]}),D.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-6",children:["₹",f]}),D.jsx("button",{className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition duration-200",children:"Buy"})]})};var ln=[];for(var Bg=0;Bg<256;++Bg)ln.push((Bg+256).toString(16).slice(1));function d8(t,e=0){return(ln[t[e+0]]+ln[t[e+1]]+ln[t[e+2]]+ln[t[e+3]]+"-"+ln[t[e+4]]+ln[t[e+5]]+"-"+ln[t[e+6]]+ln[t[e+7]]+"-"+ln[t[e+8]]+ln[t[e+9]]+"-"+ln[t[e+10]]+ln[t[e+11]]+ln[t[e+12]]+ln[t[e+13]]+ln[t[e+14]]+ln[t[e+15]]).toLowerCase()}var Ch,h8=new Uint8Array(16);function f8(){if(!Ch&&(Ch=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ch))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ch(h8)}var p8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const bI={randomUUID:p8};function m8(t,e,n){if(bI.randomUUID&&!e&&!t)return bI.randomUUID();t=t||{};var r=t.random||(t.rng||f8)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,d8(r)}const g8=()=>{const{register:t,handleSubmit:e,watch:n,reset:r}=Zv(),[i,s]=I.useState([]),[o,a]=I.useState(null),[l,u]=I.useState(!1),[d,h]=I.useState(0),{db:f,currentUser:p}=ya(),y=pa();n("media");const w=async T=>{u(!0);try{if(!o&&!T.youtubeURLs){alert("Please upload some media files or provide YouTube URLs."),u(!1);return}const _=m8(),E=await E6(im(f,"projects"),{pid:_,title:T.title,description:T.description,tools:T.tools,platform:T.platform,price:T.price,media:[]}),b=o?o.map(async C=>{if(C.type.startsWith("image")){const g="https://api.cloudinary.com/v1_1/dnpesnh4i/upload",R=new FormData;return R.append("file",C),R.append("upload_preset","userProfile"),(await Qt.post(g,R,{headers:{"Content-Type":"multipart/form-data"}})).data.secure_url}else if(C.type.startsWith("video")){const g=OB(UB,`projects/${_}/${C.name}`),R=kB(g,C);return new Promise((A,k)=>{R.on("state_changed",N=>{const P=N.bytesTransferred/N.totalBytes*100;h(P)},N=>{console.error("Error uploading video:",N),k(N)},async()=>{const N=await NB(R.snapshot.ref);A(N)})})}}):[];if(T.youtubeURLs){const C=T.youtubeURLs.split(",").map(g=>g.trim());b.push(...C)}const O=await Promise.all(b),F=Kx(f,"projects",E.id);await w6(F,{media:T6(...O)}),u(!1),r(),alert("Project added successfully!")}catch(_){console.error("Error adding project:",_),u(!1)}},S=T=>{const _=Array.from(T.target.files);a(_);const E=_.map(b=>({url:URL.createObjectURL(b),type:b.type.startsWith("image")?"image":"video"}));s(E)};return I.useEffect(()=>{(p==null?void 0:p.email)!=="sarcasticgamer96@gmail.com"&&y("/project-bazaar-src/",{replace:!0})},[p]),D.jsxs("div",{className:"max-w-xl mt-6 border border-blue-400 mx-auto p-6 bg-white shadow-md rounded-md",children:[D.jsx("h2",{className:"text-2xl text-center font-bold mb-4",children:"Add New Project"}),D.jsxs("form",{onSubmit:e(w),className:"space-y-6",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),D.jsx("input",{type:"text",...t("title",{required:!0}),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"Project Title"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),D.jsx("textarea",{...t("description",{required:!0}),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"Project Description",rows:"3"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Media (Images/Videos)"}),D.jsx("input",{type:"file",...t("media"),accept:"image/*,video/*",multiple:!0,onChange:S,className:"mt-1 block w-full text-gray-500"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"YouTube Video URLs (separated by commas)"}),D.jsx("input",{type:"text",...t("youtubeURLs"),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"https://youtube.com/video1, https://youtube.com/video2"})]}),i.length>0&&D.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:i.map((T,_)=>D.jsx("div",{className:"w-32 h-32 overflow-hidden border",children:T.type==="image"?D.jsx("img",{src:T.url,alt:"Preview",className:"w-full h-full object-cover"}):D.jsxs("video",{autoPlay:!0,controls:!0,className:"h-full w-full object-cover",children:[D.jsx("source",{src:T.url,type:"video/mp4"}),"Your browser does not support the video tag."]})},_))}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tools Used"}),D.jsx("input",{type:"text",...t("tools",{required:!0}),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"React, Firebase, etc."})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Platform"}),D.jsxs("select",{...t("platform",{required:!0}),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",children:[D.jsx("option",{value:"web",children:"Web"}),D.jsx("option",{value:"app",children:"App"})]})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price (in Rs.)"}),D.jsx("input",{type:"number",...t("price",{required:!0}),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"Price in Rs."})]}),D.jsxs("button",{type:"submit",disabled:l,className:"w-full py-2 px-4 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-600 transition duration-300",children:["Add Project",D.jsx("span",{children:l&&D.jsx(fm,{type:"spin",color:"white"})})]})]}),D.jsxs("h3",{className:"text-center text-2xl text-green-600",children:[d,"%"]})]})};function Lu({children:t}){const{currentUser:e}=ya(),n=pa(),r=Bl();return I.useEffect(()=>{e===null&&n("/project-bazaar-src/login",{replace:!0})},[e,r]),t}const uN=typeof document<"u"?ve.useLayoutEffect:()=>{};function y8(t){const e=I.useRef(null);return uN(()=>{e.current=t},[t]),I.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const bd=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Fo=t=>t&&"window"in t&&t.window===t?t:bd(t).defaultView||window;function _8(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function v8(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function cN(t){let e=null;return()=>(e==null&&(e=t()),e)}const w8=cN(function(){return v8(/^Mac/i)}),E8=cN(function(){return _8(/Android/i)});function T8(t){return t.mozInputSource===0&&t.isTrusted?!0:E8()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class S8{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function dN(t){let e=I.useRef({isFocused:!1,observer:null});uN(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=y8(r=>{t==null||t(r)});return I.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{e.current.isFocused=!1,i.disabled&&n(new S8("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function I8(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=I.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),o=dN(s),a=I.useCallback(l=>{const u=bd(l.target);l.target===l.currentTarget&&u.activeElement===l.target&&(n&&n(l),i&&i(!0),o(l))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}let Ad=null,B_=new Set,pc=new Map,ua=!1,z_=!1;const R8={Tab:!0,Escape:!0};function Mw(t,e){for(let n of B_)n(t,e)}function C8(t){return!(t.metaKey||!w8()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function fp(t){ua=!0,C8(t)&&(Ad="keyboard",Mw("keyboard",t))}function Ar(t){Ad="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(ua=!0,Mw("pointer",t))}function hN(t){T8(t)&&(ua=!0,Ad="virtual")}function fN(t){t.target===window||t.target===document||(!ua&&!z_&&(Ad="virtual",Mw("virtual",t)),ua=!1,z_=!1)}function pN(){ua=!1,z_=!0}function H_(t){if(typeof window>"u"||pc.get(Fo(t)))return;const e=Fo(t),n=bd(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){ua=!0,r.apply(this,arguments)},n.addEventListener("keydown",fp,!0),n.addEventListener("keyup",fp,!0),n.addEventListener("click",hN,!0),e.addEventListener("focus",fN,!0),e.addEventListener("blur",pN,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",Ar,!0),n.addEventListener("pointermove",Ar,!0),n.addEventListener("pointerup",Ar,!0)):(n.addEventListener("mousedown",Ar,!0),n.addEventListener("mousemove",Ar,!0),n.addEventListener("mouseup",Ar,!0)),e.addEventListener("beforeunload",()=>{mN(t)},{once:!0}),pc.set(e,{focus:r})}const mN=(t,e)=>{const n=Fo(t),r=bd(t);e&&r.removeEventListener("DOMContentLoaded",e),pc.has(n)&&(n.HTMLElement.prototype.focus=pc.get(n).focus,r.removeEventListener("keydown",fp,!0),r.removeEventListener("keyup",fp,!0),r.removeEventListener("click",hN,!0),n.removeEventListener("focus",fN,!0),n.removeEventListener("blur",pN,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",Ar,!0),r.removeEventListener("pointermove",Ar,!0),r.removeEventListener("pointerup",Ar,!0)):(r.removeEventListener("mousedown",Ar,!0),r.removeEventListener("mousemove",Ar,!0),r.removeEventListener("mouseup",Ar,!0)),pc.delete(n))};function b8(t){const e=bd(t);let n;return e.readyState!=="loading"?H_(t):(n=()=>{H_(t)},e.addEventListener("DOMContentLoaded",n)),()=>mN(t,n)}typeof document<"u"&&b8();function gN(){return Ad!=="pointer"}const A8=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function x8(t,e,n){var r;const i=typeof window<"u"?Fo(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Fo(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Fo(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?Fo(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||(n==null?void 0:n.target)instanceof i&&!A8.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||(n==null?void 0:n.target)instanceof s||(n==null?void 0:n.target)instanceof o&&(n==null?void 0:n.target.isContentEditable),!(t&&e==="keyboard"&&n instanceof a&&!R8[n.key])}function P8(t,e,n){H_(),I.useEffect(()=>{let r=(i,s)=>{x8(!!(n!=null&&n.isTextInput),i,s)&&t(gN())};return B_.add(r),()=>{B_.delete(r)}},e)}function k8(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=I.useRef({isFocusWithin:!1}),o=I.useCallback(u=>{s.current.isFocusWithin&&!u.currentTarget.contains(u.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(u),i&&i(!1))},[n,i,s]),a=dN(o),l=I.useCallback(u=>{!s.current.isFocusWithin&&document.activeElement===u.target&&(r&&r(u),i&&i(!0),s.current.isFocusWithin=!0,a(u))},[r,i,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let pp=!1,zg=0;function W_(){pp=!0,setTimeout(()=>{pp=!1},50)}function AI(t){t.pointerType==="touch"&&W_()}function N8(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",AI):document.addEventListener("touchend",W_),zg++,()=>{zg--,!(zg>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",AI):document.removeEventListener("touchend",W_))}}function yN(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=I.useState(!1),a=I.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;I.useEffect(N8,[]);let{hoverProps:l,triggerHoverEnd:u}=I.useMemo(()=>{let d=(p,y)=>{if(a.pointerType=y,i||y==="touch"||a.isHovered||!p.currentTarget.contains(p.target))return;a.isHovered=!0;let w=p.currentTarget;a.target=w,e&&e({type:"hoverstart",target:w,pointerType:y}),n&&n(!0),o(!0)},h=(p,y)=>{if(a.pointerType="",a.target=null,y==="touch"||!a.isHovered)return;a.isHovered=!1;let w=p.currentTarget;r&&r({type:"hoverend",target:w,pointerType:y}),n&&n(!1),o(!1)},f={};return typeof PointerEvent<"u"?(f.onPointerEnter=p=>{pp&&p.pointerType==="mouse"||d(p,p.pointerType)},f.onPointerLeave=p=>{!i&&p.currentTarget.contains(p.target)&&h(p,p.pointerType)}):(f.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},f.onMouseEnter=p=>{!a.ignoreEmulatedMouseEvents&&!pp&&d(p,"mouse"),a.ignoreEmulatedMouseEvents=!1},f.onMouseLeave=p=>{!i&&p.currentTarget.contains(p.target)&&h(p,"mouse")}),{hoverProps:f,triggerHoverEnd:h}},[e,n,r,i,a]);return I.useEffect(()=>{i&&u({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:l,isHovered:s}}function _N(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=I.useRef({isFocused:!1,isFocusVisible:e||gN()}),[s,o]=I.useState(!1),[a,l]=I.useState(()=>i.current.isFocused&&i.current.isFocusVisible),u=I.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),d=I.useCallback(p=>{i.current.isFocused=p,o(p),u()},[u]);P8(p=>{i.current.isFocusVisible=p,u()},[],{isTextInput:n});let{focusProps:h}=I8({isDisabled:r,onFocusChange:d}),{focusWithinProps:f}=k8({isDisabled:!r,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:a,focusProps:r?f:h}}var O8=Object.defineProperty,D8=(t,e,n)=>e in t?O8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hg=(t,e,n)=>(D8(t,typeof e!="symbol"?e+"":e,n),n);let L8=class{constructor(){Hg(this,"current",this.detect()),Hg(this,"handoffState","pending"),Hg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Wo=new L8;function wa(t){return Wo.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function vN(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ri(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return vN(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Ri();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function Im(){let[t]=I.useState(Ri);return I.useEffect(()=>()=>t.dispose(),[t]),t}let qt=(t,e)=>{Wo.isServer?I.useEffect(t,e):I.useLayoutEffect(t,e)};function xd(t){let e=I.useRef(t);return qt(()=>{e.current=t},[t]),e}let rt=function(t){let e=xd(t);return ve.useCallback((...n)=>e.current(...n),[e])};function M8(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function F8(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function wN({disabled:t=!1}={}){let e=I.useRef(null),[n,r]=I.useState(!1),i=Im(),s=rt(()=>{e.current=null,r(!1),i.dispose()}),o=rt(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=wa(a.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",u=>{if(e.current){let d=M8(u);r(F8(d,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let V8=I.createContext(void 0);function EN(){return I.useContext(V8)}function xI(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function fo(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,fo),r}var Yc=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Yc||{}),U8=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(U8||{});function Kn({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??j8;let l=TN(e,t);if(s)return bh(l,n,r,o,a);let u=i??0;if(u&2){let{static:d=!1,...h}=l;if(d)return bh(h,n,r,o,a)}if(u&1){let{unmount:d=!0,...h}=l;return fo(d?0:1,{0(){return null},1(){return bh({...h,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return bh(l,n,r,o,a)}function bh(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...l}=Wg(t,["unmount","static"]),u=t.ref!==void 0?{[a]:t.ref}:{},d=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let h={};if(e){let f=!1,p=[];for(let[y,w]of Object.entries(e))typeof w=="boolean"&&(f=!0),w===!0&&p.push(y.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(f){h["data-headlessui-state"]=p.join(" ");for(let y of p)h[`data-${y}`]=""}}if(s===I.Fragment&&(Object.keys(La(l)).length>0||Object.keys(La(h)).length>0))if(!I.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(La(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(La(l)).concat(Object.keys(La(h))).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}else{let f=d.props,p=f==null?void 0:f.className,y=typeof p=="function"?(...T)=>xI(p(...T),l.className):xI(p,l.className),w=y?{className:y}:{},S=TN(d.props,La(Wg(l,["ref"])));for(let T in h)T in S&&delete h[T];return I.cloneElement(d,Object.assign({},S,h,u,{ref:i(d.ref,u.ref)},w))}return I.createElement(s,Object.assign({},Wg(l,["ref"]),s!==I.Fragment&&u,s!==I.Fragment&&h),d)}function Fw(){let t=I.useRef([]),e=I.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function j8(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function TN(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function mp(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function Gn(t){var e;return Object.assign(I.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function La(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Wg(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let $8=I.createContext(void 0);function B8(){return I.useContext($8)}function SN(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&z8(n)?!1:r}function z8(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let IN=Symbol();function RN(t,e=!0){return Object.assign(t,{[IN]:e})}function Fr(...t){let e=I.useRef(t);I.useEffect(()=>{e.current=t},[t]);let n=rt(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[IN]))?void 0:n}let Vw=I.createContext(null);Vw.displayName="DescriptionContext";function CN(){let t=I.useContext(Vw);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,CN),e}return t}function H8(){let[t,e]=I.useState([]);return[t.length>0?t.join(" "):void 0,I.useMemo(()=>function(n){let r=rt(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=I.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ve.createElement(Vw.Provider,{value:i},n.children)},[e])]}let W8="p";function q8(t,e){let n=I.useId(),r=EN(),{id:i=`headlessui-description-${n}`,...s}=t,o=CN(),a=Fr(e);qt(()=>o.register(i),[i,o.register]);let l=r||!1,u=I.useMemo(()=>({...o.slot,disabled:l}),[o.slot,l]),d={ref:a,...o.props,id:i};return Kn({ourProps:d,theirProps:s,slot:u,defaultTag:W8,name:o.name||"Description"})}let K8=Gn(q8);Object.assign(K8,{});var Dt=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Dt||{});let Rm=I.createContext(null);Rm.displayName="LabelContext";function Uw(){let t=I.useContext(Rm);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Uw),e}return t}function G8(t){var e,n,r;let i=(n=(e=I.useContext(Rm))==null?void 0:e.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function bN({inherit:t=!1}={}){let e=G8(),[n,r]=I.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,I.useMemo(()=>function(s){let o=rt(l=>(r(u=>[...u,l]),()=>r(u=>{let d=u.slice(),h=d.indexOf(l);return h!==-1&&d.splice(h,1),d}))),a=I.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return ve.createElement(Rm.Provider,{value:a},s.children)},[r])]}let Q8="label";function Y8(t,e){var n;let r=I.useId(),i=Uw(),s=B8(),o=EN(),{id:a=`headlessui-label-${r}`,htmlFor:l=s??((n=i.props)==null?void 0:n.htmlFor),passive:u=!1,...d}=t,h=Fr(e);qt(()=>i.register(a),[a,i.register]);let f=rt(S=>{let T=S.currentTarget;if(T instanceof HTMLLabelElement&&S.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(S),T instanceof HTMLLabelElement){let _=document.getElementById(T.htmlFor);if(_){let E=_.getAttribute("disabled");if(E==="true"||E==="")return;let b=_.getAttribute("aria-disabled");if(b==="true"||b==="")return;(_ instanceof HTMLInputElement&&(_.type==="radio"||_.type==="checkbox")||_.role==="radio"||_.role==="checkbox"||_.role==="switch")&&_.click(),_.focus({preventScroll:!0})}}}),p=o||!1,y=I.useMemo(()=>({...i.slot,disabled:p}),[i.slot,p]),w={ref:h,...i.props,id:a,htmlFor:l,onClick:f};return u&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in d&&delete d.onClick),Kn({ourProps:w,theirProps:d,slot:y,defaultTag:l?Q8:"div",name:i.name||"Label"})}let X8=Gn(Y8);Object.assign(X8,{});let J8=I.createContext(()=>{});function Z8({value:t,children:e}){return ve.createElement(J8.Provider,{value:t},e)}function eW(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function tW(t,e=!1){let[n,r]=I.useReducer(()=>({}),{}),i=I.useMemo(()=>eW(t),[t,n]);return qt(()=>{if(!t)return;let s=new ResizeObserver(r);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let nW=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function AN(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function xN(t){return I.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let rW=new nW(()=>AN(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function jw(t,e){let n=rW.get(e),r=I.useId(),i=xN(n);if(qt(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),o=i.length;return s===-1&&(s=o,o+=1),s===o-1}let q_=new Map,mc=new Map;function PI(t){var e;let n=(e=mc.get(t))!=null?e:0;return mc.set(t,n+1),n!==0?()=>kI(t):(q_.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>kI(t))}function kI(t){var e;let n=(e=mc.get(t))!=null?e:1;if(n===1?mc.delete(t):mc.set(t,n-1),n!==1)return;let r=q_.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,q_.delete(t))}function iW(t,{allowed:e,disallowed:n}={}){let r=jw(t,"inert-others");qt(()=>{var i,s;if(!r)return;let o=Ri();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&o.add(PI(l));let a=(s=e==null?void 0:e())!=null?s:[];for(let l of a){if(!l)continue;let u=wa(l);if(!u)continue;let d=l.parentElement;for(;d&&d!==u.body;){for(let h of d.children)a.some(f=>h.contains(f))||o.add(PI(h));d=d.parentElement}}return o.dispose},[r,e,n])}function sW(t,e,n){let r=xd(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});I.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=Ri();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,r,t])}let K_=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),oW=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var G_=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(G_||{}),aW=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(aW||{}),lW=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(lW||{});function PN(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(K_)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function uW(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(oW)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var $w=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))($w||{});function Bw(t,e=0){var n;return t===((n=wa(t))==null?void 0:n.body)?!1:fo(e,{0(){return t.matches(K_)},1(){let r=t;for(;r!==null;){if(r.matches(K_))return!0;r=r.parentElement}return!1}})}function kN(t){let e=wa(t);Ri().nextFrame(()=>{e&&!Bw(e.activeElement,0)&&dW(t)})}var cW=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(cW||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function dW(t){t==null||t.focus({preventScroll:!0})}let hW=["textarea","input"].join(",");function fW(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,hW))!=null?n:!1}function NN(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function pW(t,e){return mW(PN(),e,{relativeTo:t})}function mW(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?NN(t):t:e&64?uW(t):PN(t);i.length>0&&o.length>1&&(o=o.filter(p=>!i.some(y=>y!=null&&"current"in y?(y==null?void 0:y.current)===p:y===p))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,h=o.length,f;do{if(d>=h||d+h<=0)return 0;let p=l+d;if(e&16)p=(p+h)%h;else{if(p<0)return 3;if(p>=h)return 1}f=o[p],f==null||f.focus(u),d+=a}while(f!==s.activeElement);return e&6&&fW(f)&&f.select(),2}function ON(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function gW(){return/Android/gi.test(window.navigator.userAgent)}function yW(){return ON()||gW()}function Mu(t,e,n,r){let i=xd(n);I.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function _W(t,e,n,r){let i=xd(n);I.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const NI=30;function vW(t,e,n){let r=jw(t,"outside-click"),i=xd(n),s=I.useCallback(function(l,u){if(l.defaultPrevented)return;let d=u(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let h=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let f of h)if(f!==null&&(f.contains(d)||l.composed&&l.composedPath().includes(f)))return;return!Bw(d,$w.Loose)&&d.tabIndex!==-1&&l.preventDefault(),i.current(l,d)},[i,e]),o=I.useRef(null);Mu(r,"pointerdown",l=>{var u,d;o.current=((d=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:d[0])||l.target},!0),Mu(r,"mousedown",l=>{var u,d;o.current=((d=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:d[0])||l.target},!0),Mu(r,"click",l=>{yW()||o.current&&(s(l,()=>o.current),o.current=null)},!0);let a=I.useRef({x:0,y:0});Mu(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),Mu(r,"touchend",l=>{let u={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(u.x-a.current.x)>=NI||Math.abs(u.y-a.current.y)>=NI))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),_W(r,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function zw(...t){return I.useMemo(()=>wa(...t),[...t])}function DN(t,e){return I.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function wW(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function EW(){return ON()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=Ri();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),d=t.querySelector(u);d&&!r(d)&&(o=d)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function TW(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function SW(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Vo=AN(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Ri(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:SW(n)},i=[EW(),wW(),TW()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Vo.subscribe(()=>{let t=Vo.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Vo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Vo.dispatch("TEARDOWN",n)}});function IW(t,e,n=()=>({containers:[]})){let r=xN(Vo),i=e?r.get(e):void 0,s=i?i.count>0:!1;return qt(()=>{if(!(!e||!t))return Vo.dispatch("PUSH",e,n),()=>Vo.dispatch("POP",e,n)},[t,e]),s}function RW(t,e,n=()=>[document.body]){let r=jw(t,"scroll-lock");IW(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function OI(t){return[t.screenX,t.screenY]}function CW(){let t=I.useRef([-1,-1]);return{wasMoved(e){let n=OI(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=OI(e)}}}function bW(t=0){let[e,n]=I.useState(t),r=I.useCallback(l=>n(l),[e]),i=I.useCallback(l=>n(u=>u|l),[e]),s=I.useCallback(l=>(e&l)===l,[e]),o=I.useCallback(l=>n(u=>u&~l),[n]),a=I.useCallback(l=>n(u=>u^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}var AW={},DI,LI;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((DI=process==null?void 0:AW)==null?void 0:DI.NODE_ENV)==="test"&&typeof((LI=Element==null?void 0:Element.prototype)==null?void 0:LI.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var xW=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(xW||{});function LN(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function MN(t,e,n,r){let[i,s]=I.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=bW(t&&i?3:0),u=I.useRef(!1),d=I.useRef(!1),h=Im();return qt(()=>{var f;if(t){if(n&&s(!0),!e){n&&a(3);return}return(f=void 0)==null||f.call(r,n),PW(e,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){d.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var p;d.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,l(7),n||s(!1),(p=void 0)==null||p.call(r,n))}})}},[t,n,e,h]),t?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function PW(t,{prepare:e,run:n,done:r,inFlight:i}){let s=Ri();return NW(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(kW(t,r))})}),s.dispose}function kW(t,e){var n,r;let i=Ri();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),i.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||e()}),i.dispose)}function NW(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function OW(t,{container:e,accept:n,walk:r}){let i=I.useRef(n),s=I.useRef(r);I.useEffect(()=>{i.current=n,s.current=r},[n,r]),qt(()=>{if(!e||!t)return;let o=wa(e);if(!o)return;let a=i.current,l=s.current,u=Object.assign(h=>a(h),{acceptNode:a}),d=o.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;d.nextNode();)l(d.currentNode)},[e,t,i,s])}function Cm(){return typeof window<"u"}function ru(t){return FN(t)?(t.nodeName||"").toLowerCase():"#document"}function vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ci(t){var e;return(e=(FN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FN(t){return Cm()?t instanceof Node||t instanceof vr(t).Node:!1}function zn(t){return Cm()?t instanceof Element||t instanceof vr(t).Element:!1}function Si(t){return Cm()?t instanceof HTMLElement||t instanceof vr(t).HTMLElement:!1}function MI(t){return!Cm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vr(t).ShadowRoot}function Pd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ri(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function DW(t){return["table","td","th"].includes(ru(t))}function bm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Hw(t){const e=Ww(),n=zn(t)?ri(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function LW(t){let e=Js(t);for(;Si(e)&&!Fl(e);){if(Hw(e))return e;if(bm(e))return null;e=Js(e)}return null}function Ww(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fl(t){return["html","body","#document"].includes(ru(t))}function ri(t){return vr(t).getComputedStyle(t)}function Am(t){return zn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Js(t){if(ru(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MI(t)&&t.host||Ci(t);return MI(e)?e.host:e}function VN(t){const e=Js(t);return Fl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Si(e)&&Pd(e)?e:VN(e)}function Xc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=VN(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=vr(i);if(s){const a=Q_(o);return e.concat(o,o.visualViewport||[],Pd(i)?i:[],a&&n?Xc(a):[])}return e.concat(i,Xc(i,[],n))}function Q_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function MW(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const Vl=Math.min,xn=Math.max,Jc=Math.round,Ah=Math.floor,Zs=t=>({x:t,y:t}),FW={left:"right",right:"left",bottom:"top",top:"bottom"},VW={start:"end",end:"start"};function FI(t,e,n){return xn(t,Vl(e,n))}function iu(t,e){return typeof t=="function"?t(e):t}function eo(t){return t.split("-")[0]}function kd(t){return t.split("-")[1]}function UN(t){return t==="x"?"y":"x"}function jN(t){return t==="y"?"height":"width"}function ca(t){return["top","bottom"].includes(eo(t))?"y":"x"}function $N(t){return UN(ca(t))}function UW(t,e,n){n===void 0&&(n=!1);const r=kd(t),i=$N(t),s=jN(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=gp(o)),[o,gp(o)]}function jW(t){const e=gp(t);return[Y_(t),e,Y_(e)]}function Y_(t){return t.replace(/start|end/g,e=>VW[e])}function $W(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function BW(t,e,n,r){const i=kd(t);let s=$W(eo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Y_)))),s}function gp(t){return t.replace(/left|right|bottom|top/g,e=>FW[e])}function zW(t){return{top:0,right:0,bottom:0,left:0,...t}}function HW(t){return typeof t!="number"?zW(t):{top:t,right:t,bottom:t,left:t}}function yp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function VI(t,e,n){let{reference:r,floating:i}=t;const s=ca(e),o=$N(e),a=jN(o),l=eo(e),u=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(kd(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const WW=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=VI(u,r,l),f=r,p={},y=0;for(let w=0;w<a.length;w++){const{name:S,fn:T}=a[w],{x:_,y:E,data:b,reset:O}=await T({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=_??d,h=E??h,p={...p,[S]:{...p[S],...b}},O&&y<=50&&(y++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:d,y:h}=VI(u,f,l)),w=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:p}};async function xm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=iu(e,t),y=HW(p),S=a[f?h==="floating"?"reference":"floating":h],T=yp(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},O=yp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:E,strategy:l}):_);return{top:(T.top-O.top+y.top)/b.y,bottom:(O.bottom-T.bottom+y.bottom)/b.y,left:(T.left-O.left+y.left)/b.x,right:(O.right-T.right+y.right)/b.x}}const qW=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:w=!0,...S}=iu(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const T=eo(i),_=ca(a),E=eo(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=f||(E||!w?[gp(a)]:jW(a)),F=y!=="none";!f&&F&&O.push(...BW(a,w,y,b));const C=[a,...O],g=await xm(e,S),R=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&R.push(g[T]),h){const re=UW(i,o,b);R.push(g[re[0]],g[re[1]])}if(A=[...A,{placement:i,overflows:R}],!R.every(re=>re<=0)){var k,N;const re=(((k=s.flip)==null?void 0:k.index)||0)+1,be=C[re];if(be)return{data:{index:re,overflows:A},reset:{placement:be}};let Re=(N=A.filter(te=>te.overflows[0]<=0).sort((te,W)=>te.overflows[1]-W.overflows[1])[0])==null?void 0:N.placement;if(!Re)switch(p){case"bestFit":{var P;const te=(P=A.filter(W=>{if(F){const Q=ca(W.placement);return Q===_||Q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Q=>Q>0).reduce((Q,ie)=>Q+ie,0)]).sort((W,Q)=>W[1]-Q[1])[0])==null?void 0:P[0];te&&(Re=te);break}case"initialPlacement":Re=a;break}if(i!==Re)return{reset:{placement:Re}}}return{}}}};async function KW(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=eo(n),a=kd(n),l=ca(n)==="y",u=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=iu(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const GW=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await KW(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},QW=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:T,y:_}=S;return{x:T,y:_}}},...l}=iu(t,e),u={x:n,y:r},d=await xm(e,l),h=ca(eo(i)),f=UN(h);let p=u[f],y=u[h];if(s){const S=f==="y"?"top":"left",T=f==="y"?"bottom":"right",_=p+d[S],E=p-d[T];p=FI(_,p,E)}if(o){const S=h==="y"?"top":"left",T=h==="y"?"bottom":"right",_=y+d[S],E=y-d[T];y=FI(_,y,E)}const w=a.fn({...e,[f]:p,[h]:y});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[f]:s,[h]:o}}}}}},YW=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=iu(t,e),d=await xm(e,u),h=eo(i),f=kd(i),p=ca(i)==="y",{width:y,height:w}=s.floating;let S,T;h==="top"||h==="bottom"?(S=h,T=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(T=h,S=f==="end"?"top":"bottom");const _=w-d.top-d.bottom,E=y-d.left-d.right,b=Vl(w-d[S],_),O=Vl(y-d[T],E),F=!e.middlewareData.shift;let C=b,g=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(g=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=_),F&&!f){const A=xn(d.left,0),k=xn(d.right,0),N=xn(d.top,0),P=xn(d.bottom,0);p?g=y-2*(A!==0||k!==0?A+k:xn(d.left,d.right)):C=w-2*(N!==0||P!==0?N+P:xn(d.top,d.bottom))}await l({...e,availableWidth:g,availableHeight:C});const R=await o.getDimensions(a.floating);return y!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function BN(t){const e=ri(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Si(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Jc(n)!==s||Jc(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function qw(t){return zn(t)?t:t.contextElement}function pl(t){const e=qw(t);if(!Si(e))return Zs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=BN(e);let o=(s?Jc(n.width):n.width)/r,a=(s?Jc(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const XW=Zs(0);function zN(t){const e=vr(t);return!Ww()||!e.visualViewport?XW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function JW(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vr(t)?!1:e}function da(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=qw(t);let o=Zs(1);e&&(r?zn(r)&&(o=pl(r)):o=pl(t));const a=JW(s,n,r)?zN(s):Zs(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const f=vr(s),p=r&&zn(r)?vr(r):r;let y=f,w=Q_(y);for(;w&&r&&p!==y;){const S=pl(w),T=w.getBoundingClientRect(),_=ri(w),E=T.left+(w.clientLeft+parseFloat(_.paddingLeft))*S.x,b=T.top+(w.clientTop+parseFloat(_.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,h*=S.y,l+=E,u+=b,y=vr(w),w=Q_(y)}}return yp({width:d,height:h,x:l,y:u})}function ZW(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Ci(r),a=e?bm(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Zs(1);const d=Zs(0),h=Si(r);if((h||!h&&!s)&&((ru(r)!=="body"||Pd(o))&&(l=Am(r)),Si(r))){const f=da(r);u=pl(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x,y:n.y*u.y-l.scrollTop*u.y+d.y}}function e7(t){return Array.from(t.getClientRects())}function X_(t,e){const n=Am(t).scrollLeft;return e?e.left+n:da(Ci(t)).left+n}function t7(t){const e=Ci(t),n=Am(t),r=t.ownerDocument.body,i=xn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=xn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+X_(t);const a=-n.scrollTop;return ri(r).direction==="rtl"&&(o+=xn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function n7(t,e){const n=vr(t),r=Ci(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=Ww();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function r7(t,e){const n=da(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Si(t)?pl(t):Zs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function UI(t,e,n){let r;if(e==="viewport")r=n7(t,n);else if(e==="document")r=t7(Ci(t));else if(zn(e))r=r7(e,n);else{const i=zN(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return yp(r)}function HN(t,e){const n=Js(t);return n===e||!zn(n)||Fl(n)?!1:ri(n).position==="fixed"||HN(n,e)}function i7(t,e){const n=e.get(t);if(n)return n;let r=Xc(t,[],!1).filter(a=>zn(a)&&ru(a)!=="body"),i=null;const s=ri(t).position==="fixed";let o=s?Js(t):t;for(;zn(o)&&!Fl(o);){const a=ri(o),l=Hw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Pd(o)&&!l&&HN(t,o))?r=r.filter(d=>d!==o):i=a,o=Js(o)}return e.set(t,r),r}function s7(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?bm(e)?[]:i7(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const h=UI(e,d,i);return u.top=xn(h.top,u.top),u.right=Vl(h.right,u.right),u.bottom=Vl(h.bottom,u.bottom),u.left=xn(h.left,u.left),u},UI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function o7(t){const{width:e,height:n}=BN(t);return{width:e,height:n}}function a7(t,e,n){const r=Si(e),i=Ci(e),s=n==="fixed",o=da(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Zs(0);if(r||!r&&!s)if((ru(e)!=="body"||Pd(i))&&(a=Am(e)),r){const p=da(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=X_(i));let u=0,d=0;if(i&&!r&&!s){const p=i.getBoundingClientRect();d=p.top+a.scrollTop,u=p.left+a.scrollLeft-X_(i,p)}const h=o.left+a.scrollLeft-l.x-u,f=o.top+a.scrollTop-l.y-d;return{x:h,y:f,width:o.width,height:o.height}}function qg(t){return ri(t).position==="static"}function jI(t,e){if(!Si(t)||ri(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ci(t)===n&&(n=n.ownerDocument.body),n}function WN(t,e){const n=vr(t);if(bm(t))return n;if(!Si(t)){let i=Js(t);for(;i&&!Fl(i);){if(zn(i)&&!qg(i))return i;i=Js(i)}return n}let r=jI(t,e);for(;r&&DW(r)&&qg(r);)r=jI(r,e);return r&&Fl(r)&&qg(r)&&!Hw(r)?n:r||LW(t)||n}const l7=async function(t){const e=this.getOffsetParent||WN,n=this.getDimensions,r=await n(t.floating);return{reference:a7(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function u7(t){return ri(t).direction==="rtl"}const c7={convertOffsetParentRelativeRectToViewportRelativeRect:ZW,getDocumentElement:Ci,getClippingRect:s7,getOffsetParent:WN,getElementRects:l7,getClientRects:e7,getDimensions:o7,getScale:pl,isElement:zn,isRTL:u7};function d7(t,e){let n=null,r;const i=Ci(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:d,width:h,height:f}=t.getBoundingClientRect();if(a||e(),!h||!f)return;const p=Ah(d),y=Ah(i.clientWidth-(u+h)),w=Ah(i.clientHeight-(d+f)),S=Ah(u),_={rootMargin:-p+"px "+-y+"px "+-w+"px "+-S+"px",threshold:xn(0,Vl(1,l))||1};let E=!0;function b(O){const F=O[0].intersectionRatio;if(F!==l){if(!E)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{n=new IntersectionObserver(b,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,_)}n.observe(t)}return o(!0),s}function h7(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=qw(t),d=i||s?[...u?Xc(u):[],...Xc(e)]:[];d.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),s&&T.addEventListener("resize",n)});const h=u&&a?d7(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(T=>{let[_]=T;_&&_.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let y,w=l?da(t):null;l&&S();function S(){const T=da(t);w&&(T.x!==w.x||T.y!==w.y||T.width!==w.width||T.height!==w.height)&&n(),w=T,y=requestAnimationFrame(S)}return n(),()=>{var T;d.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),h==null||h(),(T=p)==null||T.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const Kg=xm,f7=GW,p7=QW,m7=qW,g7=YW,y7=(t,e,n)=>{const r=new Map,i={platform:c7,...n},s={...i.platform,_c:r};return WW(t,e,{...i,platform:s})};var nf=typeof document<"u"?I.useLayoutEffect:I.useEffect;function _p(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_p(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!_p(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function qN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $I(t,e){const n=qN(t);return Math.round(e*n)/n}function Gg(t){const e=I.useRef(t);return nf(()=>{e.current=t}),e}function _7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=I.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=I.useState(r);_p(f,r)||p(r);const[y,w]=I.useState(null),[S,T]=I.useState(null),_=I.useCallback(W=>{W!==F.current&&(F.current=W,w(W))},[]),E=I.useCallback(W=>{W!==C.current&&(C.current=W,T(W))},[]),b=s||y,O=o||S,F=I.useRef(null),C=I.useRef(null),g=I.useRef(d),R=l!=null,A=Gg(l),k=Gg(i),N=Gg(u),P=I.useCallback(()=>{if(!F.current||!C.current)return;const W={placement:e,strategy:n,middleware:f};k.current&&(W.platform=k.current),y7(F.current,C.current,W).then(Q=>{const ie={...Q,isPositioned:N.current!==!1};re.current&&!_p(g.current,ie)&&(g.current=ie,mr.flushSync(()=>{h(ie)}))})},[f,e,n,k,N]);nf(()=>{u===!1&&g.current.isPositioned&&(g.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[u]);const re=I.useRef(!1);nf(()=>(re.current=!0,()=>{re.current=!1}),[]),nf(()=>{if(b&&(F.current=b),O&&(C.current=O),b&&O){if(A.current)return A.current(b,O,P);P()}},[b,O,P,A,R]);const be=I.useMemo(()=>({reference:F,floating:C,setReference:_,setFloating:E}),[_,E]),Re=I.useMemo(()=>({reference:b,floating:O}),[b,O]),te=I.useMemo(()=>{const W={position:n,left:0,top:0};if(!Re.floating)return W;const Q=$I(Re.floating,d.x),ie=$I(Re.floating,d.y);return a?{...W,transform:"translate("+Q+"px, "+ie+"px)",...qN(Re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:ie}},[n,a,Re.floating,d.x,d.y]);return I.useMemo(()=>({...d,update:P,refs:be,elements:Re,floatingStyles:te}),[d,P,be,Re,te])}const KN=(t,e)=>({...f7(t),options:[t,e]}),v7=(t,e)=>({...p7(t),options:[t,e]}),w7=(t,e)=>({...m7(t),options:[t,e]}),E7=(t,e)=>({...g7(t),options:[t,e]}),GN={...rf},T7=GN.useInsertionEffect,S7=T7||(t=>t());function QN(t){const e=I.useRef(()=>{});return S7(()=>{e.current=t}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var J_=typeof document<"u"?I.useLayoutEffect:I.useEffect;let BI=!1,I7=0;const zI=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+I7++;function R7(){const[t,e]=I.useState(()=>BI?zI():void 0);return J_(()=>{t==null&&e(zI())},[]),I.useEffect(()=>{BI=!0},[]),t}const C7=GN.useId,b7=C7||R7;function A7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const x7=I.createContext(null),P7=I.createContext(null),k7=()=>{var t;return((t=I.useContext(x7))==null?void 0:t.id)||null},N7=()=>I.useContext(P7),O7="data-floating-ui-focusable";function D7(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=b7(),s=I.useRef({}),[o]=I.useState(()=>A7()),a=k7()!=null,[l,u]=I.useState(r.reference),d=QN((p,y,w)=>{s.current.openEvent=p?y:void 0,o.emit("openchange",{open:p,event:y,reason:w,nested:a}),n==null||n(p,y,w)}),h=I.useMemo(()=>({setPositionReference:u}),[]),f=I.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:f,events:o,floatingId:i,refs:h}),[e,d,f,o,i,h])}function L7(t){t===void 0&&(t={});const{nodeId:e}=t,n=D7({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,l]=I.useState(null),d=(i==null?void 0:i.reference)||s,h=I.useRef(null),f=N7();J_(()=>{d&&(h.current=d)},[d]);const p=_7({...t,elements:{...i,...a&&{reference:a}}}),y=I.useCallback(E=>{const b=zn(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l(b),p.refs.setReference(b)},[p.refs]),w=I.useCallback(E=>{(zn(E)||E===null)&&(h.current=E,o(E)),(zn(p.refs.reference.current)||p.refs.reference.current===null||E!==null&&!zn(E))&&p.refs.setReference(E)},[p.refs]),S=I.useMemo(()=>({...p.refs,setReference:w,setPositionReference:y,domReference:h}),[p.refs,w,y]),T=I.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),_=I.useMemo(()=>({...p,...r,refs:S,elements:T,nodeId:e}),[p,S,T,e,r]);return J_(()=>{r.dataRef.current.floatingContext=_;const E=f==null?void 0:f.nodesRef.current.find(b=>b.id===e);E&&(E.context=_)}),I.useMemo(()=>({...p,context:_,refs:S,elements:T}),[p,S,T,_])}const HI="active",WI="selected";function Qg(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[HI]:o,[WI]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[O7]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,d]=l;if(!(i&&[HI,WI].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof d=="function"){var h;(h=r.get(u))==null||h.push(d),o[u]=function(){for(var f,p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];return(f=r.get(u))==null?void 0:f.map(S=>S(...y)).find(S=>S!==void 0)}}}else o[u]=d}),o),{})}}function M7(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),i=I.useCallback(a=>Qg(a,t,"reference"),e),s=I.useCallback(a=>Qg(a,t,"floating"),n),o=I.useCallback(a=>Qg(a,t,"item"),r);return I.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function qI(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const F7=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:u,...d}=iu(t,e),{rects:h,elements:{floating:f}}=e,p=n.current[o],y=(u==null?void 0:u.current)||f,w=f.clientTop||y.clientTop,S=f.clientTop!==0,T=y.clientTop!==0,_=f===y;if(!p)return{};const E={...e,...await KN(-p.offsetTop-f.clientTop-h.reference.height/2-p.offsetHeight/2-s).fn(e)},b=await Kg(qI(E,y.scrollHeight+w+f.clientTop),d),O=await Kg(E,{...d,elementContext:"reference"}),F=xn(0,b.top),C=E.y+F,g=Jc(xn(0,y.scrollHeight+(S&&_||T?w*2:0)-F-xn(0,b.bottom)));if(y.style.maxHeight=g+"px",y.scrollTop=F,i){const R=y.scrollHeight>y.offsetHeight&&y.offsetHeight<p.offsetHeight*a-1||O.top>=-l||O.bottom>=-l;mr.flushSync(()=>i(R))}return r&&(r.current=await Kg(qI({...E,y:C},y.offsetHeight+w+f.clientTop),d)),{y:C}}});function V7(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:s,scrollRef:o,onChange:a}=e,l=QN(a),u=I.useRef(!1),d=I.useRef(null),h=I.useRef(null);I.useEffect(()=>{if(!i)return;function p(w){if(w.ctrlKey||!y||s.current==null)return;const S=w.deltaY,T=s.current.top>=-.5,_=s.current.bottom>=-.5,E=y.scrollHeight-y.clientHeight,b=S<0?-1:1,O=S<0?"max":"min";y.scrollHeight<=y.clientHeight||(!T&&S>0||!_&&S<0?(w.preventDefault(),mr.flushSync(()=>{l(F=>F+Math[O](S,E*b))})):/firefox/i.test(MW())&&(y.scrollTop+=S))}const y=(o==null?void 0:o.current)||r.floating;if(n&&y)return y.addEventListener("wheel",p),requestAnimationFrame(()=>{d.current=y.scrollTop,s.current!=null&&(h.current={...s.current})}),()=>{d.current=null,h.current=null,y.removeEventListener("wheel",p)}},[i,n,r.floating,s,o,l]);const f=I.useMemo(()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const p=(o==null?void 0:o.current)||r.floating;if(!(!s.current||!p||!u.current)){if(d.current!==null){const y=p.scrollTop-d.current;(s.current.bottom<-.5&&y<-1||s.current.top<-.5&&y>1)&&mr.flushSync(()=>l(w=>w+y))}requestAnimationFrame(()=>{d.current=p.scrollTop})}}}),[r.floating,l,s,o]);return I.useMemo(()=>i?{floating:f}:{},[i,f])}let su=I.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});su.displayName="FloatingContext";let Kw=I.createContext(null);Kw.displayName="PlacementContext";function U7(t){return I.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function j7(){return I.useContext(su).setReference}function $7(){return I.useContext(su).getReferenceProps}function B7(){let{getFloatingProps:t,slot:e}=I.useContext(su);return I.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function z7(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=I.useContext(Kw),n=I.useMemo(()=>t,[JSON.stringify(t,(i,s)=>{var o;return(o=s==null?void 0:s.outerHTML)!=null?o:s})]);qt(()=>{e==null||e(n??null)},[e,n]);let r=I.useContext(su);return I.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let KI=4;function H7({children:t,enabled:e=!0}){let[n,r]=I.useState(null),[i,s]=I.useState(0),o=I.useRef(null),[a,l]=I.useState(null);W7(a);let u=e&&n!==null&&a!==null,{to:d="bottom",gap:h=0,offset:f=0,padding:p=0,inner:y}=q7(n,a),[w,S="center"]=d.split(" ");qt(()=>{u&&s(0)},[u]);let{refs:T,floatingStyles:_,context:E}=L7({open:u,placement:w==="selection"?S==="center"?"bottom":`bottom-${S}`:S==="center"?`${w}`:`${w}-${S}`,strategy:"absolute",transform:!1,middleware:[KN({mainAxis:w==="selection"?0:h,crossAxis:f}),v7({padding:p}),w!=="selection"&&w7({padding:p}),w==="selection"&&y?F7({...y,padding:p,overflowRef:o,offset:i,minItemsVisible:KI,referenceOverflowThreshold:p,onFallbackChange(k){var N,P;if(!k)return;let re=E.elements.floating;if(!re)return;let be=parseFloat(getComputedStyle(re).scrollPaddingBottom)||0,Re=Math.min(KI,re.childElementCount),te=0,W=0;for(let Q of(P=(N=E.elements.floating)==null?void 0:N.childNodes)!=null?P:[])if(Q instanceof HTMLElement){let ie=Q.offsetTop,Pe=ie+Q.clientHeight+be,q=re.scrollTop,J=q+re.clientHeight;if(ie>=q&&Pe<=J)Re--;else{W=Math.max(0,Math.min(Pe,J)-Math.max(ie,q)),te=Q.clientHeight;break}}Re>=1&&s(Q=>{let ie=te*Re-W+be;return Q>=ie?Q:ie})}}):null,E7({padding:p,apply({availableWidth:k,availableHeight:N,elements:P}){Object.assign(P.floating.style,{overflow:"auto",maxWidth:`${k}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${N}px)`})}})].filter(Boolean),whileElementsMounted:h7}),[b=w,O=S]=E.placement.split("-");w==="selection"&&(b="selection");let F=I.useMemo(()=>({anchor:[b,O].filter(Boolean).join(" ")}),[b,O]),C=V7(E,{overflowRef:o,onChange:s}),{getReferenceProps:g,getFloatingProps:R}=M7([C]),A=rt(k=>{l(k),T.setFloating(k)});return I.createElement(Kw.Provider,{value:r},I.createElement(su.Provider,{value:{setFloating:A,setReference:T.setReference,styles:_,getReferenceProps:g,getFloatingProps:R,slot:F}},t))}function W7(t){qt(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function q7(t,e){var n,r,i;let s=Yg((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),o=Yg((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),a=Yg((i=t==null?void 0:t.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:o,padding:a}}function Yg(t,e,n=void 0){let r=Im(),i=rt((l,u)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!u)return[n,null];let d=GI(l,u);return[d,h=>{let f=YN(l);{let p=f.map(y=>window.getComputedStyle(u).getPropertyValue(y));r.requestAnimationFrame(function y(){r.nextFrame(y);let w=!1;for(let[T,_]of f.entries()){let E=window.getComputedStyle(u).getPropertyValue(_);if(p[T]!==E){p[T]=E,w=!0;break}}if(!w)return;let S=GI(l,u);d!==S&&(h(S),d=S)})}return r.dispose}]}return[n,null]}),s=I.useMemo(()=>i(t,e)[0],[t,e]),[o=s,a]=I.useState();return qt(()=>{let[l,u]=i(t,e);if(a(l),!!u)return u(a)},[t,e]),o}function YN(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...YN(i)]:[r]}return[]}function GI(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let Pm=I.createContext(null);Pm.displayName="OpenClosedContext";var rs=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(rs||{});function XN(){return I.useContext(Pm)}function JN({value:t,children:e}){return ve.createElement(Pm.Provider,{value:t},e)}function K7({children:t}){return ve.createElement(Pm.Provider,{value:null},t)}function G7(t){throw new Error("Unexpected object: "+t)}var Pn=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Pn||{});function Xg(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1;switch(t.focus){case 0:{for(let s=0;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 1:{i===-1&&(i=n.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 2:{for(let s=i+1;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 3:{for(let s=n.length-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 4:{for(let s=0;s<n.length;++s)if(e.resolveId(n[s],s,n)===t.id)return s;return r}case 5:return null;default:G7(t)}}function Q7(t){let e=rt(t),n=I.useRef(!1);I.useEffect(()=>(n.current=!1,()=>{n.current=!0,vN(()=>{n.current&&e()})}),[e])}function Y7(){let t=typeof document>"u";return"useSyncExternalStore"in rf?(e=>e.useSyncExternalStore)(rf)(()=>()=>{},()=>!1,()=>!t):!1}function X7(){let t=Y7(),[e,n]=I.useState(Wo.isHandoffComplete);return e&&Wo.isHandoffComplete===!1&&n(!1),I.useEffect(()=>{e!==!0&&n(!0)},[e]),I.useEffect(()=>Wo.handoff(),[]),t?!1:e}let J7=I.createContext(!1);function Z7(){return I.useContext(J7)}function eq(t){let e=Z7(),n=I.useContext(eO),r=zw(t),[i,s]=I.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(Wo.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return I.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),I.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),i}let ZN=I.Fragment,tq=Gn(function(t,e){let n=t,r=I.useRef(null),i=Fr(RN(d=>{r.current=d}),e),s=zw(r),o=eq(r),[a]=I.useState(()=>{var d;return Wo.isServer?null:(d=s==null?void 0:s.createElement("div"))!=null?d:null}),l=I.useContext(sq),u=X7();return qt(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),qt(()=>{if(a&&l)return l.register(a)},[l,a]),Q7(()=>{var d;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))}),u?!o||!a?null:mr.createPortal(Kn({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:ZN,name:"Portal"}),a):null});function nq(t,e){let n=Fr(e),{enabled:r=!0,...i}=t;return r?ve.createElement(tq,{...i,ref:n}):Kn({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:ZN,name:"Portal"})}let rq=I.Fragment,eO=I.createContext(null);function iq(t,e){let{target:n,...r}=t,i={ref:Fr(e)};return ve.createElement(eO.Provider,{value:n},Kn({ourProps:i,theirProps:r,defaultTag:rq,name:"Popover.Group"}))}let sq=I.createContext(null),oq=Gn(nq),aq=Gn(iq),lq=Object.assign(oq,{Group:aq});var QI;let uq=(QI=ve.startTransition)!=null?QI:function(t){t()};var cq=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(cq||{}),dq=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.SetButtonElement=4]="SetButtonElement",t[t.SetPanelElement=5]="SetPanelElement",t))(dq||{});let hq={0:t=>({...t,disclosureState:fo(t.disclosureState,{0:1,1:0})}),1:t=>t.disclosureState===1?t:{...t,disclosureState:1},2(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},3(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}},4(t,e){return t.buttonElement===e.element?t:{...t,buttonElement:e.element}},5(t,e){return t.panelElement===e.element?t:{...t,panelElement:e.element}}},Gw=I.createContext(null);Gw.displayName="DisclosureContext";function Qw(t){let e=I.useContext(Gw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Qw),n}return e}let Yw=I.createContext(null);Yw.displayName="DisclosureAPIContext";function tO(t){let e=I.useContext(Yw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tO),n}return e}let Xw=I.createContext(null);Xw.displayName="DisclosurePanelContext";function fq(){return I.useContext(Xw)}function pq(t,e){return fo(e.type,hq,t,e)}let mq=I.Fragment;function gq(t,e){let{defaultOpen:n=!1,...r}=t,i=I.useRef(null),s=Fr(e,RN(y=>{i.current=y},t.as===void 0||t.as===I.Fragment)),o=I.useReducer(pq,{disclosureState:n?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:a,buttonId:l},u]=o,d=rt(y=>{u({type:1});let w=wa(i);if(!w||!l)return;let S=y?y instanceof HTMLElement?y:y.current instanceof HTMLElement?y.current:w.getElementById(l):w.getElementById(l);S==null||S.focus()}),h=I.useMemo(()=>({close:d}),[d]),f=I.useMemo(()=>({open:a===0,close:d}),[a,d]),p={ref:s};return ve.createElement(Gw.Provider,{value:o},ve.createElement(Yw.Provider,{value:h},ve.createElement(Z8,{value:d},ve.createElement(JN,{value:fo(a,{0:rs.Open,1:rs.Closed})},Kn({ourProps:p,theirProps:r,slot:f,defaultTag:mq,name:"Disclosure"})))))}let yq="button";function _q(t,e){let n=I.useId(),{id:r=`headlessui-disclosure-button-${n}`,disabled:i=!1,autoFocus:s=!1,...o}=t,[a,l]=Qw("Disclosure.Button"),u=fq(),d=u===null?!1:u===a.panelId,h=I.useRef(null),f=Fr(h,e,rt(A=>{if(!d)return l({type:4,element:A})})),p=Fw();I.useEffect(()=>{if(!d)return l({type:2,buttonId:r}),()=>{l({type:2,buttonId:null})}},[r,l,d]);let y=rt(A=>{var k;if(d){if(a.disclosureState===1)return;switch(A.key){case Dt.Space:case Dt.Enter:A.preventDefault(),A.stopPropagation(),l({type:0}),(k=a.buttonElement)==null||k.focus();break}}else switch(A.key){case Dt.Space:case Dt.Enter:A.preventDefault(),A.stopPropagation(),l({type:0});break}}),w=rt(A=>{switch(A.key){case Dt.Space:A.preventDefault();break}}),S=rt(A=>{var k;SN(A.currentTarget)||i||(d?(l({type:0}),(k=a.buttonElement)==null||k.focus()):l({type:0}))}),{isFocusVisible:T,focusProps:_}=_N({autoFocus:s}),{isHovered:E,hoverProps:b}=yN({isDisabled:i}),{pressed:O,pressProps:F}=wN({disabled:i}),C=I.useMemo(()=>({open:a.disclosureState===0,hover:E,active:O,disabled:i,focus:T,autofocus:s}),[a,E,O,T,i,s]),g=DN(t,a.buttonElement),R=mp(d?{ref:f,type:g,disabled:i||void 0,autoFocus:s,onKeyDown:y,onClick:S}:{ref:f,id:r,type:g,"aria-expanded":a.disclosureState===0,"aria-controls":a.panelElement?a.panelId:void 0,disabled:i||void 0,autoFocus:s,onKeyDown:y,onKeyUp:w,onClick:S},_,b,F);return Kn({mergeRefs:p,ourProps:R,theirProps:o,slot:C,defaultTag:yq,name:"Disclosure.Button"})}let vq="div",wq=Yc.RenderStrategy|Yc.Static;function Eq(t,e){let n=I.useId(),{id:r=`headlessui-disclosure-panel-${n}`,transition:i=!1,...s}=t,[o,a]=Qw("Disclosure.Panel"),{close:l}=tO("Disclosure.Panel"),u=Fw(),[d,h]=I.useState(null),f=Fr(e,rt(_=>{uq(()=>a({type:5,element:_}))}),h);I.useEffect(()=>(a({type:3,panelId:r}),()=>{a({type:3,panelId:null})}),[r,a]);let p=XN(),[y,w]=MN(i,d,p!==null?(p&rs.Open)===rs.Open:o.disclosureState===0),S=I.useMemo(()=>({open:o.disclosureState===0,close:l}),[o.disclosureState,l]),T={ref:f,id:r,...LN(w)};return ve.createElement(K7,null,ve.createElement(Xw.Provider,{value:o.panelId},Kn({mergeRefs:u,ourProps:T,theirProps:s,slot:S,defaultTag:vq,features:wq,visible:y,name:"Disclosure.Panel"})))}let Tq=Gn(gq),Z_=Gn(_q),nO=Gn(Eq),Sq=Object.assign(Tq,{Button:Z_,Panel:nO});function Iq(t,e){let n=I.useRef({left:0,top:0});if(qt(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(n.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let r=e.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let YI=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function XI(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?(n=i.innerText)!=null?n:"":r;return YI.test(o)&&(o=o.replace(YI,"")),o}function Rq(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let s=document.getElementById(i);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():XI(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return XI(t).trim()}function Cq(t){let e=I.useRef(""),n=I.useRef("");return rt(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let s=Rq(r).trim().toLowerCase();return e.current=i,n.current=s,s})}var bq=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(bq||{}),Aq=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Aq||{}),xq=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t))(xq||{});function Jg(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=NN(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let Pq={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},0(t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},2:(t,e)=>{var n,r,i,s,o;if(t.menuState===1)return t;let a={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===Pn.Nothing)return{...a,activeItemIndex:null};if(e.focus===Pn.Specific)return{...a,activeItemIndex:t.items.findIndex(d=>d.id===e.id)};if(e.focus===Pn.Previous){let d=t.activeItemIndex;if(d!==null){let h=t.items[d].dataRef.current.domRef,f=Xg(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(f!==null){let p=t.items[f].dataRef.current.domRef;if(((r=h.current)==null?void 0:r.previousElementSibling)===p.current||((i=p.current)==null?void 0:i.previousElementSibling)===null)return{...a,activeItemIndex:f}}}}else if(e.focus===Pn.Next){let d=t.activeItemIndex;if(d!==null){let h=t.items[d].dataRef.current.domRef,f=Xg(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});if(f!==null){let p=t.items[f].dataRef.current.domRef;if(((s=h.current)==null?void 0:s.nextElementSibling)===p.current||((o=p.current)==null?void 0:o.nextElementSibling)===null)return{...a,activeItemIndex:f}}}}let l=Jg(t),u=Xg(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});return{...a,...l,activeItemIndex:u}},3:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(o=>{var a;return((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!o.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let n=Jg(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},6:(t,e)=>{let n=Jg(t,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element}},Jw=I.createContext(null);Jw.displayName="MenuContext";function km(t){let e=I.useContext(Jw);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,km),n}return e}function kq(t,e){return fo(e.type,Pq,t,e)}let Nq=I.Fragment;function Oq(t,e){let{__demoMode:n=!1,...r}=t,i=I.useReducer(kq,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:o,buttonElement:a},l]=i,u=Fr(e);vW(s===0,[a,o],(p,y)=>{l({type:1}),Bw(y,$w.Loose)||(p.preventDefault(),a==null||a.focus())});let d=rt(()=>{l({type:1})}),h=I.useMemo(()=>({open:s===0,close:d}),[s,d]),f={ref:u};return ve.createElement(H7,null,ve.createElement(Jw.Provider,{value:i},ve.createElement(JN,{value:fo(s,{0:rs.Open,1:rs.Closed})},Kn({ourProps:f,theirProps:r,slot:h,defaultTag:Nq,name:"Menu"}))))}let Dq="button";function Lq(t,e){var n;let r=I.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:s=!1,autoFocus:o=!1,...a}=t,[l,u]=km("Menu.Button"),d=$7(),h=Fw(),f=Fr(e,j7(),rt(g=>u({type:7,element:g}))),p=rt(g=>{switch(g.key){case Dt.Space:case Dt.Enter:case Dt.ArrowDown:g.preventDefault(),g.stopPropagation(),mr.flushSync(()=>u({type:0})),u({type:2,focus:Pn.First});break;case Dt.ArrowUp:g.preventDefault(),g.stopPropagation(),mr.flushSync(()=>u({type:0})),u({type:2,focus:Pn.Last});break}}),y=rt(g=>{switch(g.key){case Dt.Space:g.preventDefault();break}}),w=rt(g=>{var R;if(SN(g.currentTarget))return g.preventDefault();s||(l.menuState===0?(mr.flushSync(()=>u({type:1})),(R=l.buttonElement)==null||R.focus({preventScroll:!0})):(g.preventDefault(),u({type:0})))}),{isFocusVisible:S,focusProps:T}=_N({autoFocus:o}),{isHovered:_,hoverProps:E}=yN({isDisabled:s}),{pressed:b,pressProps:O}=wN({disabled:s}),F=I.useMemo(()=>({open:l.menuState===0,active:b||l.menuState===0,disabled:s,hover:_,focus:S,autofocus:o}),[l,_,S,b,s,o]),C=mp(d(),{ref:f,id:i,type:DN(t,l.buttonElement),"aria-haspopup":"menu","aria-controls":(n=l.itemsElement)==null?void 0:n.id,"aria-expanded":l.menuState===0,disabled:s||void 0,autoFocus:o,onKeyDown:p,onKeyUp:y,onClick:w},T,E,O);return Kn({mergeRefs:h,ourProps:C,theirProps:a,slot:F,defaultTag:Dq,name:"Menu.Button"})}let Mq="div",Fq=Yc.RenderStrategy|Yc.Static;function Vq(t,e){var n,r;let i=I.useId(),{id:s=`headlessui-menu-items-${i}`,anchor:o,portal:a=!1,modal:l=!0,transition:u=!1,...d}=t,h=U7(o),[f,p]=km("Menu.Items"),[y,w]=z7(h),S=B7(),[T,_]=I.useState(null),E=Fr(e,h?y:null,rt(te=>p({type:8,element:te})),_),b=zw(f.itemsElement);h&&(a=!0);let O=XN(),[F,C]=MN(u,T,O!==null?(O&rs.Open)===rs.Open:f.menuState===0);sW(F,f.buttonElement,()=>{p({type:1})});let g=f.__demoMode?!1:l&&f.menuState===0;RW(g,b);let R=f.__demoMode?!1:l&&f.menuState===0;iW(R,{allowed:I.useCallback(()=>[f.buttonElement,f.itemsElement],[f.buttonElement,f.itemsElement])});let A=f.menuState!==0,k=Iq(A,f.buttonElement)?!1:F;I.useEffect(()=>{let te=f.itemsElement;te&&f.menuState===0&&te!==(b==null?void 0:b.activeElement)&&te.focus({preventScroll:!0})},[f.menuState,f.itemsElement,b]),OW(f.menuState===0,{container:f.itemsElement,accept(te){return te.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:te.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(te){te.setAttribute("role","none")}});let N=Im(),P=rt(te=>{var W,Q,ie;switch(N.dispose(),te.key){case Dt.Space:if(f.searchQuery!=="")return te.preventDefault(),te.stopPropagation(),p({type:3,value:te.key});case Dt.Enter:if(te.preventDefault(),te.stopPropagation(),p({type:1}),f.activeItemIndex!==null){let{dataRef:Pe}=f.items[f.activeItemIndex];(Q=(W=Pe.current)==null?void 0:W.domRef.current)==null||Q.click()}kN(f.buttonElement);break;case Dt.ArrowDown:return te.preventDefault(),te.stopPropagation(),p({type:2,focus:Pn.Next});case Dt.ArrowUp:return te.preventDefault(),te.stopPropagation(),p({type:2,focus:Pn.Previous});case Dt.Home:case Dt.PageUp:return te.preventDefault(),te.stopPropagation(),p({type:2,focus:Pn.First});case Dt.End:case Dt.PageDown:return te.preventDefault(),te.stopPropagation(),p({type:2,focus:Pn.Last});case Dt.Escape:te.preventDefault(),te.stopPropagation(),mr.flushSync(()=>p({type:1})),(ie=f.buttonElement)==null||ie.focus({preventScroll:!0});break;case Dt.Tab:te.preventDefault(),te.stopPropagation(),mr.flushSync(()=>p({type:1})),pW(f.buttonElement,te.shiftKey?G_.Previous:G_.Next);break;default:te.key.length===1&&(p({type:3,value:te.key}),N.setTimeout(()=>p({type:4}),350));break}}),re=rt(te=>{switch(te.key){case Dt.Space:te.preventDefault();break}}),be=I.useMemo(()=>({open:f.menuState===0}),[f.menuState]),Re=mp(h?S():{},{"aria-activedescendant":f.activeItemIndex===null||(n=f.items[f.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=f.buttonElement)==null?void 0:r.id,id:s,onKeyDown:P,onKeyUp:re,role:"menu",tabIndex:f.menuState===0?0:void 0,ref:E,style:{...d.style,...w,"--button-width":tW(f.buttonElement,!0).width},...LN(C)});return ve.createElement(lq,{enabled:a?t.static||F:!1},Kn({ourProps:Re,theirProps:d,slot:be,defaultTag:Mq,features:Fq,visible:k,name:"Menu.Items"}))}let Uq=I.Fragment;function jq(t,e){let n=I.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...s}=t,[o,a]=km("Menu.Item"),l=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,u=I.useRef(null),d=Fr(e,u);qt(()=>{if(!o.__demoMode&&o.menuState===0&&l&&o.activationTrigger!==0)return Ri().requestAnimationFrame(()=>{var R,A;(A=(R=u.current)==null?void 0:R.scrollIntoView)==null||A.call(R,{block:"nearest"})})},[o.__demoMode,u,l,o.menuState,o.activationTrigger,o.activeItemIndex]);let h=Cq(u),f=I.useRef({disabled:i,domRef:u,get textValue(){return h()}});qt(()=>{f.current.disabled=i},[f,i]),qt(()=>(a({type:5,id:r,dataRef:f}),()=>a({type:6,id:r})),[f,r]);let p=rt(()=>{a({type:1})}),y=rt(R=>{if(i)return R.preventDefault();a({type:1}),kN(o.buttonElement)}),w=rt(()=>{if(i)return a({type:2,focus:Pn.Nothing});a({type:2,focus:Pn.Specific,id:r})}),S=CW(),T=rt(R=>{S.update(R),!i&&(l||a({type:2,focus:Pn.Specific,id:r,trigger:0}))}),_=rt(R=>{S.wasMoved(R)&&(i||l||a({type:2,focus:Pn.Specific,id:r,trigger:0}))}),E=rt(R=>{S.wasMoved(R)&&(i||l&&a({type:2,focus:Pn.Nothing}))}),[b,O]=bN(),[F,C]=H8(),g=I.useMemo(()=>({active:l,focus:l,disabled:i,close:p}),[l,i,p]);return ve.createElement(O,null,ve.createElement(C,null,Kn({ourProps:{id:r,ref:d,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":b,"aria-describedby":F,disabled:void 0,onClick:y,onFocus:w,onPointerEnter:T,onMouseEnter:T,onPointerMove:_,onMouseMove:_,onPointerLeave:E,onMouseLeave:E},theirProps:s,slot:g,defaultTag:Uq,name:"Menu.Item"})))}let $q="div";function Bq(t,e){let[n,r]=bN();return ve.createElement(r,null,Kn({ourProps:{ref:e,"aria-labelledby":n,role:"group"},theirProps:t,slot:{},defaultTag:$q,name:"Menu.Section"}))}let zq="header";function Hq(t,e){let n=I.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=t,s=Uw();qt(()=>s.register(r),[r,s.register]);let o={id:r,ref:e,role:"presentation",...s.props};return Kn({ourProps:o,theirProps:i,slot:{},defaultTag:zq,name:"Menu.Heading"})}let Wq="div";function qq(t,e){return Kn({ourProps:{ref:e,role:"separator"},theirProps:t,slot:{},defaultTag:Wq,name:"Menu.Separator"})}let Kq=Gn(Oq),rO=Gn(Lq),iO=Gn(Vq),sO=Gn(jq),Gq=Gn(Bq),Qq=Gn(Hq),Yq=Gn(qq),Xq=Object.assign(Kq,{Button:rO,Items:iO,Item:sO,Section:Gq,Heading:Qq,Separator:Yq});function Jq({title:t,titleId:e,...n},r){return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?I.createElement("title",{id:e},t):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Zq=I.forwardRef(Jq);function eK({title:t,titleId:e,...n},r){return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?I.createElement("title",{id:e},t):null,I.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const tK=I.forwardRef(eK);function JI(...t){return t.filter(Boolean).join(" ")}function So(){const t=pa(),{logoutUzer:e,currentUser:n,setCurrentUser:r}=ya(),{isSearchOpen:i,setIsSearchOpen:s}=ns(),o=I.useRef(null);I.useEffect(()=>{},[n]);const a=[{name:"Home",href:"/project-bazaar-src",show:!!n},{name:"Projects",href:"/project-bazaar-src/titles",show:!!n},{name:"Register",href:"/project-bazaar-src/register",show:!n},{name:"Sign in",href:"/project-bazaar-src/login",show:!n},{name:"Add",href:"/project-bazaar-src/project/form",show:(n==null?void 0:n.email)==="sarcasticgamer96@gmail.com"}];function l(){e(),r(null),t("/project-bazaar-src/login")}const u=d=>{o.current&&!o.current.contains(d.target)&&s(!1)};return I.useEffect(()=>(i?document.addEventListener("mousedown",u):document.removeEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}),[i]),D.jsxs(Sq,{as:"nav",className:"bg-gray-800 top-0 right-0 left-0",children:[D.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:D.jsxs("div",{className:"relative flex h-16 items-center justify-between",children:[D.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:D.jsxs(Z_,{className:"group relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[D.jsx("span",{className:"absolute -inset-0.5"}),D.jsx("span",{className:"sr-only",children:"Open main menu"}),D.jsx(Zq,{"aria-hidden":"true",className:"block h-6 w-6 group-data-[open]:hidden"}),D.jsx(tK,{"aria-hidden":"true",className:"hidden h-6 w-6 group-data-[open]:block"})]})}),D.jsxs("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[D.jsx("div",{className:"flex flex-shrink-0 items-center font-mono text-white text-4xl",children:D.jsx(fi,{to:"/project-bazaar-src/",children:"Project-Lo"})}),D.jsx("div",{className:"hidden sm:ml-6 sm:block",children:D.jsx("div",{className:"flex space-x-4",children:a.map(d=>D.jsx(fi,{to:d.href,"aria-current":d.current?"page":void 0,className:({isActive:h})=>JI("rounded-md px-3 py-2 text-sm font-medium",d.show?"":"hidden ",h?"bg-gray-900 text-cyan-500":"text-white hover:bg-gray-700 hover:text-white"),children:d.name},d.name))})})]}),D.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:D.jsxs(Xq,{as:"div",className:"relative ml-3",children:[n&&D.jsx("div",{children:D.jsxs(rO,{className:"relative flex rounded-full bg-gray-800 text-sm focus:outline-none ring-2 ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[D.jsx("span",{className:"absolute -inset-1.5"}),D.jsx("span",{className:"sr-only",children:"Open user menu"}),D.jsx("img",{src:"https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg",alt:"User Profile",className:"h-8 w-8 rounded-full"})]})}),D.jsxs(iO,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none",children:[D.jsx("span",{className:"text-blue-700 font-mono p-2 m-auto",children:n&&(n==null?void 0:n.displayName)}),D.jsx(sO,{children:D.jsx(fi,{onClick:()=>{confirm("Do you wanna LOGOUT?")&&l()},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})})]})]})})]})}),D.jsx(nO,{className:"sm:hidden",children:D.jsxs("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[n&&(n==null?void 0:n.username),a.map(d=>D.jsx(fi,{to:d.href,"aria-current":d.current?"page":void 0,className:({isActive:h})=>JI("block rounded-md px-3 py-2 text-base font-medium hover:cursor-pointer",d.show?"":"hidden ",h?"bg-gray-900 text-cyan-300":"text-white hover:bg-gray-700 hover:text-white"),children:D.jsx(Z_,{children:d.name})},d.name))]})}),i&&D.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:D.jsx("div",{ref:o,className:"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full",children:D.jsx(Lw,{})})})]})}const nK=()=>{const{getProjects:t}=ns(),[e,n]=I.useState([]);ns();const r=[];return I.useEffect(()=>{t().then(i=>{i.forEach(s=>{r.push(s)}),n(r)}).catch(i=>{console.log(i)})},[]),D.jsxs(D.Fragment,{children:[D.jsx("h1",{className:"text-center text-2xl text-blue-800",children:"Projects"}),D.jsx("div",{className:"mt-1",children:D.jsx("div",{className:"flex flex-wrap gap-3 justify-center text-center",children:e.map((i,s,o)=>D.jsx(fi,{to:`/project-bazaar-src/project/${i.pid}`,children:D.jsx("div",{className:"rounded-lg text-blue-500 underline text-center w-60 h-auto flex flex-col justify-start items-center px-3 py-2 bg-gray-100 hover:bg-gray-200 shadow-sm",children:i.title})},i.pid))})})]})},rK=MM([{path:"/project-bazaar-src/",element:D.jsxs(Lu,{children:[D.jsx(So,{}),D.jsx(l8,{})]})},{path:"/project-bazaar-src/register",element:D.jsxs(D.Fragment,{children:[D.jsx(So,{}),D.jsx(s8,{})]})},{path:"/project-bazaar-src/login",element:D.jsxs(D.Fragment,{children:[D.jsx(So,{}),D.jsx(v9,{})]})},{path:"/project-bazaar-src/project/:pid",element:D.jsxs(Lu,{children:[D.jsx(So,{}),D.jsx(c8,{})]})},{path:"/project-bazaar-src/titles",element:D.jsxs(Lu,{children:[D.jsx(So,{}),D.jsx(nK,{})]})},{path:"/project-bazaar-src/search",element:D.jsxs(Lu,{children:[D.jsx(So,{}),D.jsx(Lw,{})]})},{path:"/project-bazaar-src/project/form",element:D.jsxs(Lu,{children:[D.jsx(So,{}),D.jsx(g8,{})]})}]);hb(document.getElementById("root")).render(D.jsx(D.Fragment,{children:D.jsx(jB,{children:D.jsxs(_9,{children:[D.jsx(HM,{router:rK}),D.jsx(oj,{})]})})}));
